
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A simple async ORM with fastapi in mind and pydantic validation.">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>ormar - ormar</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-72514911-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ormar" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ormar" class="md-header__button md-logo" aria-label="ormar" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ormar
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ormar
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/collerek/ormar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    collerek/ormar
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ormar" class="md-nav__button md-logo" aria-label="ormar" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ormar
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/collerek/ormar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    collerek/ormar
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        Definition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models/inheritance/" class="md-nav__link">
        Inheritance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models/methods/" class="md-nav__link">
        Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models/migrations/" class="md-nav__link">
        Migrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models/internals/" class="md-nav__link">
        Internals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Fields
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fields" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Fields
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fields/common-parameters/" class="md-nav__link">
        Common parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fields/field-types/" class="md-nav__link">
        Fields types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fields/pydantic-fields/" class="md-nav__link">
        Pydantic only fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fields/encryption/" class="md-nav__link">
        Fields encryption
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../relations/">Relations</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Relations" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Relations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../relations/postponed-annotations/" class="md-nav__link">
        Postponed annotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../relations/foreign-key/" class="md-nav__link">
        ForeignKey
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../relations/many-to-many/" class="md-nav__link">
        ManyToMany
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../relations/queryset-proxy/" class="md-nav__link">
        QuerySetProxy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../queries/">Queries</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Queries" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Queries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/create/" class="md-nav__link">
        Insert data into database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/read/" class="md-nav__link">
        Read data from database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/update/" class="md-nav__link">
        Update data in database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/delete/" class="md-nav__link">
        Delete data from database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/joins-and-subqueries/" class="md-nav__link">
        Joins and subqueries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/filter-and-sort/" class="md-nav__link">
        Filtering and sorting data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/select-columns/" class="md-nav__link">
        Selecting subset of columns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/pagination-and-rows-number/" class="md-nav__link">
        Pagination and rows number
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/aggregations/" class="md-nav__link">
        Aggregation functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../queries/raw-data/" class="md-nav__link">
        Return raw data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../signals/" class="md-nav__link">
        Signals
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../transactions/" class="md-nav__link">
        Transactions
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Use with Fastapi
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use with Fastapi" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Use with Fastapi
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fastapi/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fastapi/response/" class="md-nav__link">
        Using ormar in responses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fastapi/requests/" class="md-nav__link">
        Using ormar in requests
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mypy/" class="md-nav__link">
        Use with mypy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../plugin/" class="md-nav__link">
        PyCharm plugin
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          Api (BETA)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Api (BETA)" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Api (BETA)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1" type="checkbox" id="__nav_14_1" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">ormar</a>
          
            <label for="__nav_14_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="ormar" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_1">
          <span class="md-nav__icon md-icon"></span>
          ormar
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_1" type="checkbox" id="__nav_14_1_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="decorators/">decorators</a>
          
            <label for="__nav_14_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="decorators" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_1">
          <span class="md-nav__icon md-icon"></span>
          decorators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="decorators/property_field/" class="md-nav__link">
        property_field
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="decorators/signals/" class="md-nav__link">
        signals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="exceptions/" class="md-nav__link">
        exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_3" type="checkbox" id="__nav_14_1_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="fields/">fields</a>
          
            <label for="__nav_14_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="fields" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_3">
          <span class="md-nav__icon md-icon"></span>
          fields
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/constraints/" class="md-nav__link">
        constraints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/foreign_key/" class="md-nav__link">
        foreign_key
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/many_to_many/" class="md-nav__link">
        many_to_many
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/model_fields/" class="md-nav__link">
        model_fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/parsers/" class="md-nav__link">
        parsers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/referential_actions/" class="md-nav__link">
        referential_actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/sqlalchemy_encrypted/" class="md-nav__link">
        sqlalchemy_encrypted
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/sqlalchemy_uuid/" class="md-nav__link">
        sqlalchemy_uuid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fields/through_field/" class="md-nav__link">
        through_field
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_4" type="checkbox" id="__nav_14_1_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="models/">models</a>
          
            <label for="__nav_14_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="models" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_4">
          <span class="md-nav__icon md-icon"></span>
          models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_4_1" type="checkbox" id="__nav_14_1_4_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="models/descriptors/">descriptors</a>
          
            <label for="__nav_14_1_4_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="descriptors" data-md-level="4">
        <label class="md-nav__title" for="__nav_14_1_4_1">
          <span class="md-nav__icon md-icon"></span>
          descriptors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/descriptors/descriptors/" class="md-nav__link">
        descriptors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/excludable/" class="md-nav__link">
        excludable
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_4_3" type="checkbox" id="__nav_14_1_4_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="models/helpers/">helpers</a>
          
            <label for="__nav_14_1_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="helpers" data-md-level="4">
        <label class="md-nav__title" for="__nav_14_1_4_3">
          <span class="md-nav__icon md-icon"></span>
          helpers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/helpers/models/" class="md-nav__link">
        models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/helpers/pydantic/" class="md-nav__link">
        pydantic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/helpers/related_names_validation/" class="md-nav__link">
        related_names_validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/helpers/relations/" class="md-nav__link">
        relations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/helpers/sqlalchemy/" class="md-nav__link">
        sqlalchemy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/helpers/validation/" class="md-nav__link">
        validation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/metaclass/" class="md-nav__link">
        metaclass
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_4_5" type="checkbox" id="__nav_14_1_4_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="models/mixins/">mixins</a>
          
            <label for="__nav_14_1_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="mixins" data-md-level="4">
        <label class="md-nav__title" for="__nav_14_1_4_5">
          <span class="md-nav__icon md-icon"></span>
          mixins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/alias_mixin/" class="md-nav__link">
        alias_mixin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/excludable_mixin/" class="md-nav__link">
        excludable_mixin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/merge_mixin/" class="md-nav__link">
        merge_mixin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/prefetch_mixin/" class="md-nav__link">
        prefetch_mixin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/pydantic_mixin/" class="md-nav__link">
        pydantic_mixin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/relation_mixin/" class="md-nav__link">
        relation_mixin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/mixins/save_mixin/" class="md-nav__link">
        save_mixin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/model/" class="md-nav__link">
        model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/model_row/" class="md-nav__link">
        model_row
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/modelproxy/" class="md-nav__link">
        modelproxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/newbasemodel/" class="md-nav__link">
        newbasemodel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/quick_access_views/" class="md-nav__link">
        quick_access_views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/traversible/" class="md-nav__link">
        traversible
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_5" type="checkbox" id="__nav_14_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="protocols/">protocols</a>
          
            <label for="__nav_14_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="protocols" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_5">
          <span class="md-nav__icon md-icon"></span>
          protocols
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="protocols/queryset_protocol/" class="md-nav__link">
        queryset_protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="protocols/relation_protocol/" class="md-nav__link">
        relation_protocol
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_6" type="checkbox" id="__nav_14_1_6" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="queryset/">queryset</a>
          
            <label for="__nav_14_1_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="queryset" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_6">
          <span class="md-nav__icon md-icon"></span>
          queryset
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_6_1" type="checkbox" id="__nav_14_1_6_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="queryset/actions/">actions</a>
          
            <label for="__nav_14_1_6_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="actions" data-md-level="4">
        <label class="md-nav__title" for="__nav_14_1_6_1">
          <span class="md-nav__icon md-icon"></span>
          actions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/actions/filter_action/" class="md-nav__link">
        filter_action
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/actions/order_action/" class="md-nav__link">
        order_action
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/actions/query_action/" class="md-nav__link">
        query_action
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/actions/select_action/" class="md-nav__link">
        select_action
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/clause/" class="md-nav__link">
        clause
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/field_accessor/" class="md-nav__link">
        field_accessor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/join/" class="md-nav__link">
        join
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_6_5" type="checkbox" id="__nav_14_1_6_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="queryset/queries/">queries</a>
          
            <label for="__nav_14_1_6_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="queries" data-md-level="4">
        <label class="md-nav__title" for="__nav_14_1_6_5">
          <span class="md-nav__icon md-icon"></span>
          queries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queries/filter_query/" class="md-nav__link">
        filter_query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queries/limit_query/" class="md-nav__link">
        limit_query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queries/offset_query/" class="md-nav__link">
        offset_query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queries/order_query/" class="md-nav__link">
        order_query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queries/prefetch_query/" class="md-nav__link">
        prefetch_query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queries/query/" class="md-nav__link">
        query
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/queryset/" class="md-nav__link">
        queryset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/reverse_alias_resolver/" class="md-nav__link">
        reverse_alias_resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="queryset/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_7" type="checkbox" id="__nav_14_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="relations/">relations</a>
          
            <label for="__nav_14_1_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="relations" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_7">
          <span class="md-nav__icon md-icon"></span>
          relations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relations/alias_manager/" class="md-nav__link">
        alias_manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relations/querysetproxy/" class="md-nav__link">
        querysetproxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relations/relation/" class="md-nav__link">
        relation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relations/relation_manager/" class="md-nav__link">
        relation_manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relations/relation_proxy/" class="md-nav__link">
        relation_proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relations/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1_8" type="checkbox" id="__nav_14_1_8" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="signals/">signals</a>
          
            <label for="__nav_14_1_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="signals" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_1_8">
          <span class="md-nav__icon md-icon"></span>
          signals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="signals/signal/" class="md-nav__link">
        signal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ormar" class="md-nav__link">
    ormar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.BaseField" class="md-nav__link">
    BaseField
  </a>
  
    <nav class="md-nav" aria-label="BaseField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.construct_constraints" class="md-nav__link">
    construct_constraints()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.default_value" class="md-nav__link">
    default_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.evaluate_forward_ref" class="md-nav__link">
    evaluate_forward_ref()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.expand_relationship" class="md-nav__link">
    expand_relationship()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.get_alias" class="md-nav__link">
    get_alias()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.get_column" class="md-nav__link">
    get_column()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.get_default" class="md-nav__link">
    get_default()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.get_pydantic_default" class="md-nav__link">
    get_pydantic_default()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.get_related_name" class="md-nav__link">
    get_related_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.has_default" class="md-nav__link">
    has_default()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.has_unresolved_forward_refs" class="md-nav__link">
    has_unresolved_forward_refs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.is_auto_primary_key" class="md-nav__link">
    is_auto_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.is_valid_uni_relation" class="md-nav__link">
    is_valid_uni_relation()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.base.BaseField.set_self_reference_flag" class="md-nav__link">
    set_self_reference_flag()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.BigInteger" class="md-nav__link">
    BigInteger
  </a>
  
    <nav class="md-nav" aria-label="BigInteger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.BigInteger.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Boolean" class="md-nav__link">
    Boolean
  </a>
  
    <nav class="md-nav" aria-label="Boolean">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Boolean.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.CheckColumns" class="md-nav__link">
    CheckColumns
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Date" class="md-nav__link">
    Date
  </a>
  
    <nav class="md-nav" aria-label="Date">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Date.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.DateTime" class="md-nav__link">
    DateTime
  </a>
  
    <nav class="md-nav" aria-label="DateTime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.DateTime.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Decimal" class="md-nav__link">
    Decimal
  </a>
  
    <nav class="md-nav" aria-label="Decimal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Decimal.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Decimal.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Enum" class="md-nav__link">
    Enum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ExcludableItems" class="md-nav__link">
    ExcludableItems
  </a>
  
    <nav class="md-nav" aria-label="ExcludableItems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.models.excludable.ExcludableItems.build" class="md-nav__link">
    build()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.excludable.ExcludableItems.from_excludable" class="md-nav__link">
    from_excludable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.excludable.ExcludableItems.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.excludable.ExcludableItems.include_entry_count" class="md-nav__link">
    include_entry_count()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Float" class="md-nav__link">
    Float
  </a>
  
    <nav class="md-nav" aria-label="Float">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Float.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ForeignKeyField" class="md-nav__link">
    ForeignKeyField
  </a>
  
    <nav class="md-nav" aria-label="ForeignKeyField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.default_source_field_name" class="md-nav__link">
    default_source_field_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.default_target_field_name" class="md-nav__link">
    default_target_field_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.evaluate_forward_ref" class="md-nav__link">
    evaluate_forward_ref()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.expand_relationship" class="md-nav__link">
    expand_relationship()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.get_related_name" class="md-nav__link">
    get_related_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.get_relation_name" class="md-nav__link">
    get_relation_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.get_source_model" class="md-nav__link">
    get_source_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.get_source_related_name" class="md-nav__link">
    get_source_related_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.has_unresolved_forward_refs" class="md-nav__link">
    has_unresolved_forward_refs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.foreign_key.ForeignKeyField.register_relation" class="md-nav__link">
    register_relation()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Integer" class="md-nav__link">
    Integer
  </a>
  
    <nav class="md-nav" aria-label="Integer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Integer.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.JSON" class="md-nav__link">
    JSON
  </a>
  
    <nav class="md-nav" aria-label="JSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.JSON.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.LargeBinary" class="md-nav__link">
    LargeBinary
  </a>
  
    <nav class="md-nav" aria-label="LargeBinary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.LargeBinary.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.LargeBinary.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ManyToManyField" class="md-nav__link">
    ManyToManyField
  </a>
  
    <nav class="md-nav" aria-label="ManyToManyField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.many_to_many.ManyToManyField.create_default_through_model" class="md-nav__link">
    create_default_through_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.many_to_many.ManyToManyField.evaluate_forward_ref" class="md-nav__link">
    evaluate_forward_ref()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.many_to_many.ManyToManyField.get_relation_name" class="md-nav__link">
    get_relation_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.many_to_many.ManyToManyField.get_source_model" class="md-nav__link">
    get_source_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.many_to_many.ManyToManyField.get_source_related_name" class="md-nav__link">
    get_source_related_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.many_to_many.ManyToManyField.has_unresolved_forward_refs" class="md-nav__link">
    has_unresolved_forward_refs()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Model" class="md-nav__link">
    Model
  </a>
  
    <nav class="md-nav" aria-label="Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.load" class="md-nav__link">
    load()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.load_all" class="md-nav__link">
    load_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.save_related" class="md-nav__link">
    save_related()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.update" class="md-nav__link">
    update()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.models.model.Model.upsert" class="md-nav__link">
    upsert()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ModelDefinitionError" class="md-nav__link">
    ModelDefinitionError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ModelMeta" class="md-nav__link">
    ModelMeta
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.MultipleMatches" class="md-nav__link">
    MultipleMatches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.NoMatch" class="md-nav__link">
    NoMatch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.OrderAction" class="md-nav__link">
    OrderAction
  </a>
  
    <nav class="md-nav" aria-label="OrderAction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.actions.order_action.OrderAction.check_if_filter_apply" class="md-nav__link">
    check_if_filter_apply()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.actions.order_action.OrderAction.get_field_name_text" class="md-nav__link">
    get_field_name_text()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.actions.order_action.OrderAction.get_min_or_max" class="md-nav__link">
    get_min_or_max()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.actions.order_action.OrderAction.get_text_clause" class="md-nav__link">
    get_text_clause()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.QuerySet" class="md-nav__link">
    QuerySet
  </a>
  
    <nav class="md-nav" aria-label="QuerySet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.all" class="md-nav__link">
    all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.avg" class="md-nav__link">
    avg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.build_select_expression" class="md-nav__link">
    build_select_expression()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.bulk_create" class="md-nav__link">
    bulk_create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.bulk_update" class="md-nav__link">
    bulk_update()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.check_single_result_rows_count" class="md-nav__link">
    check_single_result_rows_count()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.count" class="md-nav__link">
    count()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.create" class="md-nav__link">
    create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.database" class="md-nav__link">
    database()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.exclude" class="md-nav__link">
    exclude()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.exclude_fields" class="md-nav__link">
    exclude_fields()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.exists" class="md-nav__link">
    exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.fields" class="md-nav__link">
    fields()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.filter" class="md-nav__link">
    filter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.first" class="md-nav__link">
    first()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.get_or_create" class="md-nav__link">
    get_or_create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.get_or_none" class="md-nav__link">
    get_or_none()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.iterate" class="md-nav__link">
    iterate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.limit" class="md-nav__link">
    limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.max" class="md-nav__link">
    max()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.min" class="md-nav__link">
    min()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.model" class="md-nav__link">
    model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.model_meta" class="md-nav__link">
    model_meta()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.offset" class="md-nav__link">
    offset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.order_by" class="md-nav__link">
    order_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.paginate" class="md-nav__link">
    paginate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.prefetch_related" class="md-nav__link">
    prefetch_related()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.rebuild_self" class="md-nav__link">
    rebuild_self()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.select_all" class="md-nav__link">
    select_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.select_related" class="md-nav__link">
    select_related()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.sum" class="md-nav__link">
    sum()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.table" class="md-nav__link">
    table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.update" class="md-nav__link">
    update()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.update_or_create" class="md-nav__link">
    update_or_create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.values" class="md-nav__link">
    values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.queryset.queryset.QuerySet.values_list" class="md-nav__link">
    values_list()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ReferentialAction" class="md-nav__link">
    ReferentialAction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.RelationType" class="md-nav__link">
    RelationType
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Signal" class="md-nav__link">
    Signal
  </a>
  
    <nav class="md-nav" aria-label="Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.signals.signal.Signal.connect" class="md-nav__link">
    connect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.signals.signal.Signal.disconnect" class="md-nav__link">
    disconnect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.signals.signal.Signal.send" class="md-nav__link">
    send()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.SmallInteger" class="md-nav__link">
    SmallInteger
  </a>
  
    <nav class="md-nav" aria-label="SmallInteger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.SmallInteger.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.String" class="md-nav__link">
    String
  </a>
  
    <nav class="md-nav" aria-label="String">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.String.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.String.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Text" class="md-nav__link">
    Text
  </a>
  
    <nav class="md-nav" aria-label="Text">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Text.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.Time" class="md-nav__link">
    Time
  </a>
  
    <nav class="md-nav" aria-label="Time">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.Time.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.UUID" class="md-nav__link">
    UUID
  </a>
  
    <nav class="md-nav" aria-label="UUID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ormar.fields.model_fields.UUID.get_column_type" class="md-nav__link">
    get_column_type()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.UniqueColumns" class="md-nav__link">
    UniqueColumns
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ForeignKey" class="md-nav__link">
    ForeignKey()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.ManyToMany" class="md-nav__link">
    ManyToMany()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.and_" class="md-nav__link">
    and_()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.or_" class="md-nav__link">
    or_()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.post_bulk_update" class="md-nav__link">
    post_bulk_update()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.post_delete" class="md-nav__link">
    post_delete()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.post_relation_add" class="md-nav__link">
    post_relation_add()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.post_relation_remove" class="md-nav__link">
    post_relation_remove()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.post_save" class="md-nav__link">
    post_save()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.post_update" class="md-nav__link">
    post_update()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.pre_delete" class="md-nav__link">
    pre_delete()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.pre_relation_add" class="md-nav__link">
    pre_relation_add()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.pre_relation_remove" class="md-nav__link">
    pre_relation_remove()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.pre_save" class="md-nav__link">
    pre_save()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ormar.pre_update" class="md-nav__link">
    pre_update()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/collerek/ormar/edit/master/docs/ormar/__init__.py" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>ormar</h1>

<div class="doc doc-object doc-module">


<a id="ormar"></a>
  <div class="doc doc-contents first">
  
      <p>The <code>ormar</code> package is an async mini ORM for Python, with support for <strong>Postgres,
MySQL</strong>, and <strong>SQLite</strong>.</p>
<p>The main benefit of using <code>ormar</code> are:</p>
<ul>
<li>getting an <strong>async ORM that can be used with async frameworks</strong>
(fastapi, starlette etc.)</li>
<li>getting just <strong>one model to maintain</strong> - you don't have to maintain pydantic
and other orm model (sqlalchemy, peewee, gino etc.)</li>
</ul>
<p>The goal was to create a simple ORM that can be <strong>used directly
(as request and response models)
with <code>fastapi</code></strong> that bases it's data validation on pydantic.</p>
<p>Ormar - apart form obvious ORM in name - get it's name from ormar in swedish which means
snakes, and ormar(e) in italian which means cabinet.</p>
<p>And what's a better name for python ORM than snakes cabinet :)</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="ormar.BaseField" class="doc doc-heading">
        <code>BaseField</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="pydantic.fields.FieldInfo">FieldInfo</span></code></p>

  
      <p>BaseField serves as a parent class for all basic Fields in ormar.
It keeps all common parameters available for all fields as well as
set of useful functions.</p>
<p>All values are kept as class variables, ormar Fields are never instantiated.
Subclasses pydantic.FieldInfo to keep the fields related
to pydantic field types like ConstrainedStr</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/base.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BaseField</span><span class="p">(</span><span class="n">FieldInfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    BaseField serves as a parent class for all basic Fields in ormar.</span>
<span class="sd">    It keeps all common parameters available for all fields as well as</span>
<span class="sd">    set of useful functions.</span>

<span class="sd">    All values are kept as class variables, ormar Fields are never instantiated.</span>
<span class="sd">    Subclasses pydantic.FieldInfo to keep the fields related</span>
<span class="sd">    to pydantic field types like ConstrainedStr</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__type__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pydantic_type__</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__pydantic_type__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sample__</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__sample__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;related_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">:</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;column_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;constraints&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;alias&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoincrement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;autoincrement&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nullable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;nullable&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sql_nullable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;sql_nullable&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unique</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pydantic_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pydantic_only&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pydantic_only</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Parameter `pydantic_only` is deprecated and will &quot;</span>
                <span class="s2">&quot;be removed in one of the next releases.</span><span class="se">\n</span><span class="s2"> You can declare &quot;</span>
                <span class="s2">&quot;pydantic fields in a normal way. </span><span class="se">\n</span><span class="s2"> Check documentation: &quot;</span>
                <span class="s2">&quot;https://collerek.github.io/ormar/fields/pydantic-fields&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">choices</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">virtual</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;virtual&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>  <span class="c1"># ManyToManyFields and reverse ForeignKeyFields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_multi</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;is_multi&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># ManyToManyField</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;is_relation&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>  <span class="c1"># ForeignKeyField + subclasses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;is_through&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># ThroughFields</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">through_relation_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;through_relation_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">through_reverse_relation_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;through_reverse_relation_name&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">skip_reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;skip_reverse&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skip_field</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;skip_field&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;to&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;through&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;self_reference&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">self_reference_primary</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;self_reference_primary&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orders_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;orders_by&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_orders_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;related_orders_by&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">encrypt_secret</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;encrypt_secret&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encrypt_backend</span><span class="p">:</span> <span class="n">EncryptBackends</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;encrypt_backend&quot;</span><span class="p">,</span> <span class="n">EncryptBackends</span><span class="o">.</span><span class="n">NONE</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encrypt_custom_backend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">EncryptBackend</span><span class="p">]]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;encrypt_custom_backend&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;server_default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;comment&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">represent_as_base64_str</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;represent_as_base64_str&quot;</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_pydantic_default</span><span class="p">())</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_valid_uni_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if field is a relation definition but only for ForeignKey relation,</span>
<span class="sd">        so excludes ManyToMany fields, as well as virtual ForeignKey</span>
<span class="sd">        (second side of FK relation).</span>

<span class="sd">        Is used to define if a field is a db ForeignKey column that</span>
<span class="sd">        should be saved/populated when dealing with internal/own</span>
<span class="sd">        Model columns only.</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_multi</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">virtual</span>

    <span class="k">def</span> <span class="nf">get_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to translate Model column names to database column names during db queries.</span>

<span class="sd">        :return: returns custom database column name if defined by user,</span>
<span class="sd">        otherwise field name in ormar/pydantic</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">get_pydantic_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates base pydantic.FieldInfo with only default and optionally</span>
<span class="sd">        required to fix pydantic Json field being set to required=False.</span>
<span class="sd">        Used in an ormar Model Metaclass.</span>

<span class="sd">        :return: instance of base pydantic.FieldInfo</span>
<span class="sd">        :rtype: pydantic.FieldInfo</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nullable</span> <span class="k">else</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">Undefined</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span> <span class="o">==</span> <span class="n">Json</span> <span class="ow">and</span> <span class="n">base</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Undefined</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Required</span>
        <span class="k">return</span> <span class="n">base</span>

    <span class="k">def</span> <span class="nf">default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a FieldInfo instance with populated default</span>
<span class="sd">        (static) or default_factory (function).</span>
<span class="sd">        If the field is a autoincrement primary key the default is None.</span>
<span class="sd">        Otherwise field have to has either default, or default_factory populated.</span>

<span class="sd">        If all default conditions fail None is returned.</span>

<span class="sd">        Used in converting to pydantic FieldInfo.</span>

<span class="sd">        :param use_server: flag marking if server_default should be</span>
<span class="sd">        treated as default value, default False</span>
<span class="sd">        :type use_server: bool</span>
<span class="sd">        :return: returns a call to pydantic.Field</span>
<span class="sd">        which is returning a FieldInfo instance</span>
<span class="sd">        :rtype: Optional[pydantic.FieldInfo]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_auto_primary_key</span><span class="p">():</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">(</span><span class="n">use_server</span><span class="o">=</span><span class="n">use_server</span><span class="p">):</span>
            <span class="n">default</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_default</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">default</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa CCR001</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return default value for a field.</span>
<span class="sd">        If the field is Callable the function is called and actual result is returned.</span>
<span class="sd">        Used to populate default_values for pydantic Model in ormar Model Metaclass.</span>

<span class="sd">        :param use_server: flag marking if server_default should be</span>
<span class="sd">        treated as default value, default False</span>
<span class="sd">        :type use_server: bool</span>
<span class="sd">        :return: default value for the field if set, otherwise implicit None</span>
<span class="sd">        :rtype: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">default</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_default</span> <span class="k">if</span> <span class="n">use_server</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">default</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">default</span> <span class="o">=</span> <span class="n">default</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">default</span>

    <span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the field has default value set.</span>

<span class="sd">        :param use_server: flag marking if server_default should be</span>
<span class="sd">        treated as default value, default False</span>
<span class="sd">        :type use_server: bool</span>
<span class="sd">        :return: result of the check if default value is set</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">use_server</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_auto_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if field is first a primary key and if it,</span>
<span class="sd">        it&#39;s than check if it&#39;s set to autoincrement.</span>
<span class="sd">        Autoincrement primary_key is nullable/optional.</span>

<span class="sd">        :return: result of the check for primary key and autoincrement</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoincrement</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">construct_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts list of ormar constraints into sqlalchemy ForeignKeys.</span>
<span class="sd">        Has to be done dynamically as sqlalchemy binds ForeignKey to the table.</span>
<span class="sd">        And we need a new ForeignKey for subclasses of current model</span>

<span class="sd">        :return: List of sqlalchemy foreign keys - by default one.</span>
<span class="sd">        :rtype: List[sqlalchemy.schema.ForeignKey]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
                <span class="n">con</span><span class="o">.</span><span class="n">reference</span><span class="p">,</span>
                <span class="n">ondelete</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">ondelete</span><span class="p">,</span>
                <span class="n">onupdate</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">onupdate</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;fk_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">tablename</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">tablename</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">constraints</span>

    <span class="k">def</span> <span class="nf">get_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns definition of sqlalchemy.Column used in creation of sqlalchemy.Table.</span>
<span class="sd">        Populates name, column type constraints, as well as a number of parameters like</span>
<span class="sd">        primary_key, index, unique, nullable, default and server_default.</span>

<span class="sd">        :param name: name of the db column - used if alias is not set</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: actual definition of the database column as sqlalchemy requires.</span>
<span class="sd">        :rtype: sqlalchemy.Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypt_backend</span> <span class="o">==</span> <span class="n">EncryptBackends</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
            <span class="n">column</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="ow">or</span> <span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">,</span>
                <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">construct_constraints</span><span class="p">(),</span>
                <span class="n">primary_key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span><span class="p">,</span>
                <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sql_nullable</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                <span class="n">unique</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span><span class="p">,</span>
                <span class="n">server_default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_default</span><span class="p">,</span>
                <span class="n">comment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_encrypted_column</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">column</span>

    <span class="k">def</span> <span class="nf">_get_encrypted_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns EncryptedString column type instead of actual column.</span>

<span class="sd">        :param name: column name</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: newly defined column</span>
<span class="sd">        :rtype:  sqlalchemy.Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;Primary key field and relations fields&quot;</span> <span class="s2">&quot;cannot be encrypted!&quot;</span>
            <span class="p">)</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="ow">or</span> <span class="n">name</span><span class="p">,</span>
            <span class="n">EncryptedString</span><span class="p">(</span>
                <span class="n">_field_type</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">encrypt_secret</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encrypt_secret</span><span class="p">,</span>
                <span class="n">encrypt_backend</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encrypt_backend</span><span class="p">,</span>
                <span class="n">encrypt_custom_backend</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encrypt_custom_backend</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nullable</span><span class="p">,</span>
            <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="n">unique</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span><span class="p">,</span>
            <span class="n">server_default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_default</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">column</span>

    <span class="k">def</span> <span class="nf">expand_relationship</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">child</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="s2">&quot;NewBaseModel&quot;</span><span class="p">],</span>
        <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function overwritten for relations, in basic field the value is returned as is.</span>
<span class="sd">        For relations the child model is first constructed (if needed),</span>
<span class="sd">        registered in relation and returned.</span>
<span class="sd">        For relation fields the value can be a pk value (Any type of field),</span>
<span class="sd">        dict (from Model) or actual instance/list of a &quot;Model&quot;.</span>

<span class="sd">        :param value: a Model field value, returned untouched for non relation fields.</span>
<span class="sd">        :type value: Any</span>
<span class="sd">        :param child: a child Model to register</span>
<span class="sd">        :type child: Union[&quot;Model&quot;, &quot;NewBaseModel&quot;]</span>
<span class="sd">        :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">        :type to_register: bool</span>
<span class="sd">        :return: returns untouched value for normal fields, expands only for relations</span>
<span class="sd">        :rtype: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_self_reference_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets `self_reference` to True if field to and owner are same model.</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">self_reference_primary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">has_unresolved_forward_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies if the filed has any ForwardRefs that require updating before the</span>
<span class="sd">        model can be used.</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">evaluate_forward_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">globalns</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">localns</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluates the ForwardRef to actual Field based on global and local namespaces</span>

<span class="sd">        :param globalns: global namespace</span>
<span class="sd">        :type globalns: Any</span>
<span class="sd">        :param localns: local namespace</span>
<span class="sd">        :type localns: Any</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns name to use for reverse relation.</span>
<span class="sd">        It&#39;s either set as `related_name` or by default it&#39;s owner model. get_name + &#39;s&#39;</span>
<span class="sd">        :return: name of the related_name or default related name.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.construct_constraints" class="doc doc-heading">
<code class="highlight language-python"><span class="n">construct_constraints</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Converts list of ormar constraints into sqlalchemy ForeignKeys.
Has to be done dynamically as sqlalchemy binds ForeignKey to the table.
And we need a new ForeignKey for subclasses of current model</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>List[sqlalchemy.schema.ForeignKey]</code>
          </td>
          <td><p>List of sqlalchemy foreign keys - by default one.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">construct_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts list of ormar constraints into sqlalchemy ForeignKeys.</span>
<span class="sd">    Has to be done dynamically as sqlalchemy binds ForeignKey to the table.</span>
<span class="sd">    And we need a new ForeignKey for subclasses of current model</span>

<span class="sd">    :return: List of sqlalchemy foreign keys - by default one.</span>
<span class="sd">    :rtype: List[sqlalchemy.schema.ForeignKey]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
            <span class="n">con</span><span class="o">.</span><span class="n">reference</span><span class="p">,</span>
            <span class="n">ondelete</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">ondelete</span><span class="p">,</span>
            <span class="n">onupdate</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">onupdate</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;fk_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">tablename</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">tablename</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">constraints</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.default_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default_value</span><span class="p">(</span><span class="n">use_server</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a FieldInfo instance with populated default
(static) or default_factory (function).
If the field is a autoincrement primary key the default is None.
Otherwise field have to has either default, or default_factory populated.</p>
<p>If all default conditions fail None is returned.</p>
<p>Used in converting to pydantic FieldInfo.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>use_server</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag marking if server_default should be treated as default value, default False</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Optional[pydantic.FieldInfo]</code>
          </td>
          <td><p>returns a call to pydantic.Field which is returning a FieldInfo instance</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a FieldInfo instance with populated default</span>
<span class="sd">    (static) or default_factory (function).</span>
<span class="sd">    If the field is a autoincrement primary key the default is None.</span>
<span class="sd">    Otherwise field have to has either default, or default_factory populated.</span>

<span class="sd">    If all default conditions fail None is returned.</span>

<span class="sd">    Used in converting to pydantic FieldInfo.</span>

<span class="sd">    :param use_server: flag marking if server_default should be</span>
<span class="sd">    treated as default value, default False</span>
<span class="sd">    :type use_server: bool</span>
<span class="sd">    :return: returns a call to pydantic.Field</span>
<span class="sd">    which is returning a FieldInfo instance</span>
<span class="sd">    :rtype: Optional[pydantic.FieldInfo]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_auto_primary_key</span><span class="p">():</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">(</span><span class="n">use_server</span><span class="o">=</span><span class="n">use_server</span><span class="p">):</span>
        <span class="n">default</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_default</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">default</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.evaluate_forward_ref" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evaluate_forward_ref</span><span class="p">(</span><span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Evaluates the ForwardRef to actual Field based on global and local namespaces</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>globalns</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>global namespace</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>localns</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>local namespace</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>None</code>
          </td>
          <td><p>None</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">evaluate_forward_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">globalns</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">localns</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluates the ForwardRef to actual Field based on global and local namespaces</span>

<span class="sd">    :param globalns: global namespace</span>
<span class="sd">    :type globalns: Any</span>
<span class="sd">    :param localns: local namespace</span>
<span class="sd">    :type localns: Any</span>
<span class="sd">    :return: None</span>
<span class="sd">    :rtype: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.expand_relationship" class="doc doc-heading">
<code class="highlight language-python"><span class="n">expand_relationship</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">to_register</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Function overwritten for relations, in basic field the value is returned as is.
For relations the child model is first constructed (if needed),
registered in relation and returned.
For relation fields the value can be a pk value (Any type of field),
dict (from Model) or actual instance/list of a "Model".</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>value</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>a Model field value, returned untouched for non relation fields.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>child</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="ormar.models.Model" href="models/#ormar.models.Model">Model</a>, <a class="autorefs autorefs-internal" title="ormar.models.NewBaseModel" href="models/#ormar.models.NewBaseModel">NewBaseModel</a>]</code>
          </td>
          <td><p>a child Model to register</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>to_register</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if the relation should be set in RelationshipManager</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Any</code>
          </td>
          <td><p>returns untouched value for normal fields, expands only for relations</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand_relationship</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">child</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="s2">&quot;NewBaseModel&quot;</span><span class="p">],</span>
    <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function overwritten for relations, in basic field the value is returned as is.</span>
<span class="sd">    For relations the child model is first constructed (if needed),</span>
<span class="sd">    registered in relation and returned.</span>
<span class="sd">    For relation fields the value can be a pk value (Any type of field),</span>
<span class="sd">    dict (from Model) or actual instance/list of a &quot;Model&quot;.</span>

<span class="sd">    :param value: a Model field value, returned untouched for non relation fields.</span>
<span class="sd">    :type value: Any</span>
<span class="sd">    :param child: a child Model to register</span>
<span class="sd">    :type child: Union[&quot;Model&quot;, &quot;NewBaseModel&quot;]</span>
<span class="sd">    :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">    :type to_register: bool</span>
<span class="sd">    :return: returns untouched value for normal fields, expands only for relations</span>
<span class="sd">    :rtype: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.get_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_alias</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Used to translate Model column names to database column names during db queries.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>returns custom database column name if defined by user, otherwise field name in ormar/pydantic</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to translate Model column names to database column names during db queries.</span>

<span class="sd">    :return: returns custom database column name if defined by user,</span>
<span class="sd">    otherwise field name in ormar/pydantic</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.get_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns definition of sqlalchemy.Column used in creation of sqlalchemy.Table.
Populates name, column type constraints, as well as a number of parameters like
primary_key, index, unique, nullable, default and server_default.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the db column - used if alias is not set</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy.Column</code>
          </td>
          <td><p>actual definition of the database column as sqlalchemy requires.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns definition of sqlalchemy.Column used in creation of sqlalchemy.Table.</span>
<span class="sd">    Populates name, column type constraints, as well as a number of parameters like</span>
<span class="sd">    primary_key, index, unique, nullable, default and server_default.</span>

<span class="sd">    :param name: name of the db column - used if alias is not set</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :return: actual definition of the database column as sqlalchemy requires.</span>
<span class="sd">    :rtype: sqlalchemy.Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypt_backend</span> <span class="o">==</span> <span class="n">EncryptBackends</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_alias</span> <span class="ow">or</span> <span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">construct_constraints</span><span class="p">(),</span>
            <span class="n">primary_key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span><span class="p">,</span>
            <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sql_nullable</span><span class="p">,</span>
            <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="n">unique</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span><span class="p">,</span>
            <span class="n">server_default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_default</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_encrypted_column</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">column</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.get_default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_default</span><span class="p">(</span><span class="n">use_server</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return default value for a field.
If the field is Callable the function is called and actual result is returned.
Used to populate default_values for pydantic Model in ormar Model Metaclass.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>use_server</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag marking if server_default should be treated as default value, default False</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Any</code>
          </td>
          <td><p>default value for the field if set, otherwise implicit None</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa CCR001</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return default value for a field.</span>
<span class="sd">    If the field is Callable the function is called and actual result is returned.</span>
<span class="sd">    Used to populate default_values for pydantic Model in ormar Model Metaclass.</span>

<span class="sd">    :param use_server: flag marking if server_default should be</span>
<span class="sd">    treated as default value, default False</span>
<span class="sd">    :type use_server: bool</span>
<span class="sd">    :return: default value for the field if set, otherwise implicit None</span>
<span class="sd">    :rtype: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
        <span class="n">default</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_default</span> <span class="k">if</span> <span class="n">use_server</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">default</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">default</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">default</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.get_pydantic_default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pydantic_default</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Generates base pydantic.FieldInfo with only default and optionally
required to fix pydantic Json field being set to required=False.
Used in an ormar Model Metaclass.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>pydantic.FieldInfo</code>
          </td>
          <td><p>instance of base pydantic.FieldInfo</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_pydantic_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates base pydantic.FieldInfo with only default and optionally</span>
<span class="sd">    required to fix pydantic Json field being set to required=False.</span>
<span class="sd">    Used in an ormar Model Metaclass.</span>

<span class="sd">    :return: instance of base pydantic.FieldInfo</span>
<span class="sd">    :rtype: pydantic.FieldInfo</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_value</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">base</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nullable</span> <span class="k">else</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">Undefined</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span> <span class="o">==</span> <span class="n">Json</span> <span class="ow">and</span> <span class="n">base</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Undefined</span><span class="p">:</span>
        <span class="n">base</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Required</span>
    <span class="k">return</span> <span class="n">base</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.get_related_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_related_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns name to use for reverse relation.
It's either set as <code>related_name</code> or by default it's owner model. get_name + 's'</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the related_name or default related name.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns name to use for reverse relation.</span>
<span class="sd">    It&#39;s either set as `related_name` or by default it&#39;s owner model. get_name + &#39;s&#39;</span>
<span class="sd">    :return: name of the related_name or default related name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.has_default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_default</span><span class="p">(</span><span class="n">use_server</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Checks if the field has default value set.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>use_server</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag marking if server_default should be treated as default value, default False</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check if default value is set</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the field has default value set.</span>

<span class="sd">    :param use_server: flag marking if server_default should be</span>
<span class="sd">    treated as default value, default False</span>
<span class="sd">    :type use_server: bool</span>
<span class="sd">    :return: result of the check if default value is set</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ormar_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">use_server</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.has_unresolved_forward_refs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_unresolved_forward_refs</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Verifies if the filed has any ForwardRefs that require updating before the
model can be used.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">has_unresolved_forward_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verifies if the filed has any ForwardRefs that require updating before the</span>
<span class="sd">    model can be used.</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.is_auto_primary_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_auto_primary_key</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Checks if field is first a primary key and if it,
it's than check if it's set to autoincrement.
Autoincrement primary_key is nullable/optional.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check for primary key and autoincrement</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_auto_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if field is first a primary key and if it,</span>
<span class="sd">    it&#39;s than check if it&#39;s set to autoincrement.</span>
<span class="sd">    Autoincrement primary_key is nullable/optional.</span>

<span class="sd">    :return: result of the check for primary key and autoincrement</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoincrement</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.is_valid_uni_relation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid_uni_relation</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Checks if field is a relation definition but only for ForeignKey relation,
so excludes ManyToMany fields, as well as virtual ForeignKey
(second side of FK relation).</p>
<p>Is used to define if a field is a db ForeignKey column that
should be saved/populated when dealing with internal/own
Model columns only.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_valid_uni_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if field is a relation definition but only for ForeignKey relation,</span>
<span class="sd">    so excludes ManyToMany fields, as well as virtual ForeignKey</span>
<span class="sd">    (second side of FK relation).</span>

<span class="sd">    Is used to define if a field is a db ForeignKey column that</span>
<span class="sd">    should be saved/populated when dealing with internal/own</span>
<span class="sd">    Model columns only.</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_multi</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">virtual</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.base.BaseField.set_self_reference_flag" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_self_reference_flag</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Sets <code>self_reference</code> to True if field to and owner are same model.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>None</code>
          </td>
          <td><p>None</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/base.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_self_reference_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets `self_reference` to True if field to and owner are same model.</span>
<span class="sd">    :return: None</span>
<span class="sd">    :rtype: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">self_reference_primary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.BigInteger" class="doc doc-heading">
        <code>BigInteger</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.Integer" href="fields/model_fields/#ormar.fields.model_fields.Integer">Integer</a></code>, <code>int</code></p>

  
      <p>BigInteger field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BigInteger</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    BigInteger field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">int</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minimum</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maximum</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multiple_of</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>
        <span class="n">autoincrement</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;autoincrement&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">autoincrement</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">autoincrement</span>
            <span class="k">if</span> <span class="n">autoincrement</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ge&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;minimum&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;le&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;maximum&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">BigInteger</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.BigInteger.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">BigInteger</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Boolean" class="doc doc-heading">
        <code>Boolean</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>int</code></p>

  
      <p>Boolean field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Boolean</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Boolean field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">bool</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Boolean</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Boolean.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Boolean</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.CheckColumns" class="doc doc-heading">
        <code>CheckColumns</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="sqlalchemy.CheckConstraint">CheckConstraint</span></code></p>

  
      <p>Subclass of sqlalchemy.CheckConstraint.
Used to avoid importing anything from sqlalchemy by user.</p>
<p>Note that some databases do not actively support check constraints such as MySQL.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/constraints.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CheckColumns</span><span class="p">(</span><span class="n">CheckConstraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Subclass of sqlalchemy.CheckConstraint.</span>
<span class="sd">    Used to avoid importing anything from sqlalchemy by user.</span>

<span class="sd">    Note that some databases do not actively support check constraints such as MySQL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Date" class="doc doc-heading">
        <code>Date</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>datetime.<span title="datetime.date">date</span></code></p>

  
      <p>Date field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Date</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Date field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;date&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Date</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Date.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Date</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.DateTime" class="doc doc-heading">
        <code>DateTime</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>datetime.<span title="datetime.datetime">datetime</span></code></p>

  
      <p>DateTime field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DateTime</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    DateTime field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;datetime&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timezone</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timezone&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.DateTime.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timezone&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Decimal" class="doc doc-heading">
        <code>Decimal</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>decimal.<span title="decimal.Decimal">Decimal</span></code></p>

  
      <p>Decimal field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Decimal</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decimal field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minimum</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maximum</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multiple_of</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">precision</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_digits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">decimal_places</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ge&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;minimum&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;le&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;maximum&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_digits&quot;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;precision&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_digits&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_digits&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;precision&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;decimal_places&quot;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;decimal_places&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;decimal_places&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">DECIMAL</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="n">precision</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to validate if all required parameters on a given field type are set.</span>
<span class="sd">        :param kwargs: all params passed during construction</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">precision</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">precision</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;Parameters scale and precision are required for field Decimal&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Decimal.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">DECIMAL</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="n">precision</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Decimal.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Used to validate if all required parameters on a given field type are set.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>all params passed during construction</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to validate if all required parameters on a given field type are set.</span>
<span class="sd">    :param kwargs: all params passed during construction</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">precision</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">precision</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;Parameters scale and precision are required for field Decimal&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Enum" class="doc doc-heading">
        <code>Enum</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code></p>

  
      <p>Enum field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Enum</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">E</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">enum_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">enum_class</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enum_class&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">enum_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">enum_class</span><span class="p">,</span> <span class="n">EnumMeta</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span><span class="s2">&quot;Enum Field choices must be EnumType&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="n">enum_cls</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enum_class&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="n">enum_cls</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.ExcludableItems" class="doc doc-heading">
        <code>ExcludableItems</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Keeps a dictionary of Excludables by alias + model_name keys
to allow quick lookup by nested models without need to travers
deeply nested dictionaries and passing include/exclude around</p>


        <details class="quote">
          <summary>Source code in <code>ormar/models/excludable.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ExcludableItems</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Keeps a dictionary of Excludables by alias + model_name keys</span>
<span class="sd">    to allow quick lookup by nested models without need to travers</span>
<span class="sd">    deeply nested dictionaries and passing include/exclude around</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Excludable</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_excludable</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;ExcludableItems&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ExcludableItems&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Copy passed ExcludableItems to avoid inplace modifications.</span>

<span class="sd">        :param other: other excludable items to be copied</span>
<span class="sd">        :type other: ormar.models.excludable.ExcludableItems</span>
<span class="sd">        :return: copy of other</span>
<span class="sd">        :rtype: ormar.models.excludable.ExcludableItems</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_excludable</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">new_excludable</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_excludable</span>

    <span class="k">def</span> <span class="nf">include_entry_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns count of include items inside</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">include</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">count</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Excludable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return Excludable for given model and alias.</span>

<span class="sd">        :param model_cls: target model to check</span>
<span class="sd">        :type model_cls: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">        :param alias: table alias from relation manager</span>
<span class="sd">        :type alias: str</span>
<span class="sd">        :return: Excludable for given model and alias</span>
<span class="sd">        :rtype: ormar.models.excludable.Excludable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">alias</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="k">if</span> <span class="n">alias</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="n">model_cls</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">excludable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">excludable</span><span class="p">:</span>
            <span class="n">excludable</span> <span class="o">=</span> <span class="n">Excludable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">excludable</span>
        <span class="k">return</span> <span class="n">excludable</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">items</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">],</span>
        <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span>
        <span class="n">is_exclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Receives the one of the types of items and parses them as to achieve</span>
<span class="sd">        a end situation with one excludable per alias/model in relation.</span>

<span class="sd">        Each excludable has two sets of values - one to include, one to exclude.</span>

<span class="sd">        :param items: values to be included or excluded</span>
<span class="sd">        :type items: Union[List[str], str, Tuple[str], Set[str], Dict]</span>
<span class="sd">        :param model_cls: source model from which relations are constructed</span>
<span class="sd">        :type model_cls: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">        :param is_exclude: flag if items should be included or excluded</span>
<span class="sd">        :type is_exclude: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">{</span><span class="n">items</span><span class="p">}</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_traverse_dict</span><span class="p">(</span>
                <span class="n">values</span><span class="o">=</span><span class="n">items</span><span class="p">,</span>
                <span class="n">source_model</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span>
                <span class="n">model_cls</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span>
                <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
            <span class="n">nested_items</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="s2">&quot;__&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
            <span class="n">items</span><span class="o">.</span><span class="n">difference_update</span><span class="p">(</span><span class="n">nested_items</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_excludes</span><span class="p">(</span>
                <span class="n">items</span><span class="o">=</span><span class="n">items</span><span class="p">,</span>
                <span class="n">model_name</span><span class="o">=</span><span class="n">model_cls</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">nested_items</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_traverse_list</span><span class="p">(</span>
                    <span class="n">values</span><span class="o">=</span><span class="n">nested_items</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_excludes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="n">Set</span><span class="p">,</span> <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_exclude</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets set of values to be included or excluded for given key and model.</span>

<span class="sd">        :param items: items to include/exclude</span>
<span class="sd">        :type items: set</span>
<span class="sd">        :param model_name: name of model to construct key</span>
<span class="sd">        :type model_name: str</span>
<span class="sd">        :param is_exclude: flag if values should be included or excluded</span>
<span class="sd">        :type is_exclude: bool</span>
<span class="sd">        :param alias:</span>
<span class="sd">        :type alias: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">alias</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="k">if</span> <span class="n">alias</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">excludable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">excludable</span><span class="p">:</span>
            <span class="n">excludable</span> <span class="o">=</span> <span class="n">Excludable</span><span class="p">()</span>
        <span class="n">excludable</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">items</span><span class="p">,</span> <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">excludable</span>

    <span class="k">def</span> <span class="nf">_traverse_dict</span><span class="p">(</span>  <span class="c1"># noqa: CFQ002</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
        <span class="n">source_model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span>
        <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span>
        <span class="n">is_exclude</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">related_items</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Goes through dict of nested values and construct/update Excludables.</span>

<span class="sd">        :param values: items to include/exclude</span>
<span class="sd">        :type values: Dict</span>
<span class="sd">        :param source_model: source model from which relations are constructed</span>
<span class="sd">        :type source_model: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">        :param model_cls: model from which current relation is constructed</span>
<span class="sd">        :type model_cls: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">        :param is_exclude: flag if values should be included or excluded</span>
<span class="sd">        :type is_exclude: bool</span>
<span class="sd">        :param related_items: list of names of related fields chain</span>
<span class="sd">        :type related_items: List</span>
<span class="sd">        :param alias: alias of relation</span>
<span class="sd">        :type alias: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_fields</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">related_items</span> <span class="o">=</span> <span class="n">related_items</span><span class="p">[:]</span> <span class="k">if</span> <span class="n">related_items</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="o">...</span><span class="p">:</span>
                <span class="n">self_fields</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
                <span class="p">(</span>
                    <span class="n">table_prefix</span><span class="p">,</span>
                    <span class="n">target_model</span><span class="p">,</span>
                    <span class="n">_</span><span class="p">,</span>
                    <span class="n">_</span><span class="p">,</span>
                <span class="p">)</span> <span class="o">=</span> <span class="n">get_relationship_alias_model_and_str</span><span class="p">(</span>
                    <span class="n">source_model</span><span class="o">=</span><span class="n">source_model</span><span class="p">,</span> <span class="n">related_parts</span><span class="o">=</span><span class="n">related_items</span> <span class="o">+</span> <span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_excludes</span><span class="p">(</span>
                    <span class="n">items</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">model_name</span><span class="o">=</span><span class="n">target_model</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
                    <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
                    <span class="n">alias</span><span class="o">=</span><span class="n">table_prefix</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># dict</span>
                <span class="n">related_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="p">(</span>
                    <span class="n">table_prefix</span><span class="p">,</span>
                    <span class="n">target_model</span><span class="p">,</span>
                    <span class="n">_</span><span class="p">,</span>
                    <span class="n">_</span><span class="p">,</span>
                <span class="p">)</span> <span class="o">=</span> <span class="n">get_relationship_alias_model_and_str</span><span class="p">(</span>
                    <span class="n">source_model</span><span class="o">=</span><span class="n">source_model</span><span class="p">,</span> <span class="n">related_parts</span><span class="o">=</span><span class="n">related_items</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_traverse_dict</span><span class="p">(</span>
                    <span class="n">values</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">source_model</span><span class="o">=</span><span class="n">source_model</span><span class="p">,</span>
                    <span class="n">model_cls</span><span class="o">=</span><span class="n">target_model</span><span class="p">,</span>
                    <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
                    <span class="n">related_items</span><span class="o">=</span><span class="n">related_items</span><span class="p">,</span>
                    <span class="n">alias</span><span class="o">=</span><span class="n">table_prefix</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="n">self_fields</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_excludes</span><span class="p">(</span>
                <span class="n">items</span><span class="o">=</span><span class="n">self_fields</span><span class="p">,</span>
                <span class="n">model_name</span><span class="o">=</span><span class="n">model_cls</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
                <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
                <span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_traverse_list</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">is_exclude</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Goes through list of values and construct/update Excludables.</span>

<span class="sd">        :param values: items to include/exclude</span>
<span class="sd">        :type values: set</span>
<span class="sd">        :param model_cls: model from which current relation is constructed</span>
<span class="sd">        :type model_cls: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">        :param is_exclude: flag if values should be included or excluded</span>
<span class="sd">        :type is_exclude: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># here we have only nested related keys</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="n">key_split</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
            <span class="n">related_items</span><span class="p">,</span> <span class="n">field_name</span> <span class="o">=</span> <span class="n">key_split</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">key_split</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">(</span><span class="n">table_prefix</span><span class="p">,</span> <span class="n">target_model</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">get_relationship_alias_model_and_str</span><span class="p">(</span>
                <span class="n">source_model</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">related_parts</span><span class="o">=</span><span class="n">related_items</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_excludes</span><span class="p">(</span>
                <span class="n">items</span><span class="o">=</span><span class="p">{</span><span class="n">field_name</span><span class="p">},</span>
                <span class="n">model_name</span><span class="o">=</span><span class="n">target_model</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
                <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
                <span class="n">alias</span><span class="o">=</span><span class="n">table_prefix</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.models.excludable.ExcludableItems.build" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">model_cls</span><span class="p">,</span> <span class="n">is_exclude</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Receives the one of the types of items and parses them as to achieve
a end situation with one excludable per alias/model in relation.</p>
<p>Each excludable has two sets of values - one to include, one to exclude.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>items</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>[str], str, <span title="typing.Tuple">Tuple</span>[str], <span title="typing.Set">Set</span>[str], <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>values to be included or excluded</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>model_cls</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]</code>
          </td>
          <td><p>source model from which relations are constructed</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>is_exclude</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if items should be included or excluded</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/excludable.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">],</span>
    <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span>
    <span class="n">is_exclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Receives the one of the types of items and parses them as to achieve</span>
<span class="sd">    a end situation with one excludable per alias/model in relation.</span>

<span class="sd">    Each excludable has two sets of values - one to include, one to exclude.</span>

<span class="sd">    :param items: values to be included or excluded</span>
<span class="sd">    :type items: Union[List[str], str, Tuple[str], Set[str], Dict]</span>
<span class="sd">    :param model_cls: source model from which relations are constructed</span>
<span class="sd">    :type model_cls: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">    :param is_exclude: flag if items should be included or excluded</span>
<span class="sd">    :type is_exclude: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">{</span><span class="n">items</span><span class="p">}</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_traverse_dict</span><span class="p">(</span>
            <span class="n">values</span><span class="o">=</span><span class="n">items</span><span class="p">,</span>
            <span class="n">source_model</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span>
            <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">items</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="n">nested_items</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="s2">&quot;__&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
        <span class="n">items</span><span class="o">.</span><span class="n">difference_update</span><span class="p">(</span><span class="n">nested_items</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_excludes</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">items</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_cls</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">nested_items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_traverse_list</span><span class="p">(</span>
                <span class="n">values</span><span class="o">=</span><span class="n">nested_items</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">is_exclude</span><span class="o">=</span><span class="n">is_exclude</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.excludable.ExcludableItems.from_excludable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_excludable</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Copy passed ExcludableItems to avoid inplace modifications.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ormar.models.excludable.ExcludableItems" href="models/excludable/#ormar.models.excludable.ExcludableItems">ExcludableItems</a></code>
          </td>
          <td><p>other excludable items to be copied</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ormar.models.excludable.ExcludableItems</code>
          </td>
          <td><p>copy of other</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/excludable.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_excludable</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;ExcludableItems&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ExcludableItems&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Copy passed ExcludableItems to avoid inplace modifications.</span>

<span class="sd">    :param other: other excludable items to be copied</span>
<span class="sd">    :type other: ormar.models.excludable.ExcludableItems</span>
<span class="sd">    :return: copy of other</span>
<span class="sd">    :rtype: ormar.models.excludable.ExcludableItems</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_excludable</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">new_excludable</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">new_excludable</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.excludable.ExcludableItems.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return Excludable for given model and alias.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model_cls</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]</code>
          </td>
          <td><p>target model to check</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>alias</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>table alias from relation manager</p></td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ormar.models.excludable.Excludable</code>
          </td>
          <td><p>Excludable for given model and alias</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/excludable.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Excludable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return Excludable for given model and alias.</span>

<span class="sd">    :param model_cls: target model to check</span>
<span class="sd">    :type model_cls: ormar.models.metaclass.ModelMetaclass</span>
<span class="sd">    :param alias: table alias from relation manager</span>
<span class="sd">    :type alias: str</span>
<span class="sd">    :return: Excludable for given model and alias</span>
<span class="sd">    :rtype: ormar.models.excludable.Excludable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">alias</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="k">if</span> <span class="n">alias</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="n">model_cls</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">excludable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">excludable</span><span class="p">:</span>
        <span class="n">excludable</span> <span class="o">=</span> <span class="n">Excludable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">excludable</span>
    <span class="k">return</span> <span class="n">excludable</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.excludable.ExcludableItems.include_entry_count" class="doc doc-heading">
<code class="highlight language-python"><span class="n">include_entry_count</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns count of include items inside</p>

      <details class="quote">
        <summary>Source code in <code>ormar/models/excludable.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">include_entry_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns count of include items inside</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">include</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">count</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Float" class="doc doc-heading">
        <code>Float</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>float</code></p>

  
      <p>Float field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Float</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Float field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">float</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minimum</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maximum</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multiple_of</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ge&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;minimum&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;le&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;maximum&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Float</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Float.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Float</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.ForeignKeyField" class="doc doc-heading">
        <code>ForeignKeyField</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.base.BaseField" href="fields/base/#ormar.fields.base.BaseField">BaseField</a></code></p>

  
      <p>Actual class returned from ForeignKey function call and stored in model_fields.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ForeignKeyField</span><span class="p">(</span><span class="n">BaseField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Actual class returned from ForeignKey function call and stored in model_fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">:</span> <span class="nb">type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ondelete</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;ondelete&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onupdate</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;onupdate&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_source_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns name to use for source relation name.</span>
<span class="sd">        For FK it&#39;s the same, differs for m2m fields.</span>
<span class="sd">        It&#39;s either set as `related_name` or by default it&#39;s owner model. get_name + &#39;s&#39;</span>
<span class="sd">        :return: name of the related_name or default related name.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_related_name</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns name to use for reverse relation.</span>
<span class="sd">        It&#39;s either set as `related_name` or by default it&#39;s owner model. get_name + &#39;s&#39;</span>
<span class="sd">        :return: name of the related_name or default related name.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;s&quot;</span>

    <span class="k">def</span> <span class="nf">default_target_field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns default target model name on through model.</span>
<span class="sd">        :return: name of the field</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;from_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">through_reverse_relation_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">default_source_field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns default target model name on through model.</span>
<span class="sd">        :return: name of the field</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;to_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">through_relation_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">evaluate_forward_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">globalns</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">localns</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluates the ForwardRef to actual Field based on global and local namespaces</span>

<span class="sd">        :param globalns: global namespace</span>
<span class="sd">        :type globalns: Any</span>
<span class="sd">        :param localns: local namespace</span>
<span class="sd">        :type localns: Any</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">evaluate_forwardref</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span> <span class="ow">or</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">=</span> <span class="n">populate_fk_params_based_on_to_model</span><span class="p">(</span>
                <span class="n">to</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span>
                <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nullable</span><span class="p">,</span>
                <span class="n">ondelete</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ondelete</span><span class="p">,</span>
                <span class="n">onupdate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">onupdate</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_extract_model_from_sequence</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a list of Models and registers them on parent.</span>
<span class="sd">        Registration is mutual, so children have also reference to parent.</span>

<span class="sd">        Used in reverse FK relations.</span>

<span class="sd">        :param value: list of Model</span>
<span class="sd">        :type value: List</span>
<span class="sd">        :param child: child/ related Model</span>
<span class="sd">        :type child: Model</span>
<span class="sd">        :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">        :type to_register: bool</span>
<span class="sd">        :return: list (if needed) registered Models</span>
<span class="sd">        :rtype: List[&quot;Model&quot;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expand_relationship</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
                <span class="n">value</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="p">,</span> <span class="n">to_register</span><span class="o">=</span><span class="n">to_register</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">_register_existing_model</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes already created instance and registers it for parent.</span>
<span class="sd">        Registration is mutual, so children have also reference to parent.</span>

<span class="sd">        Used in reverse FK relations and normal FK for single models.</span>

<span class="sd">        :param value: already instantiated Model</span>
<span class="sd">        :type value: Model</span>
<span class="sd">        :param child: child/ related Model</span>
<span class="sd">        :type child: Model</span>
<span class="sd">        :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">        :type to_register: bool</span>
<span class="sd">        :return: (if needed) registered Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">to_register</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_relation</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_construct_model_from_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a dictionary, creates a instance and registers it for parent.</span>
<span class="sd">        If dictionary contains only one field and it&#39;s a pk it is a __pk_only__ model.</span>
<span class="sd">        Registration is mutual, so children have also reference to parent.</span>

<span class="sd">        Used in normal FK for dictionaries.</span>

<span class="sd">        :param value: dictionary of a Model</span>
<span class="sd">        :type value: dict</span>
<span class="sd">        :param child: child/ related Model</span>
<span class="sd">        :type child: Model</span>
<span class="sd">        :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">        :type to_register: bool</span>
<span class="sd">        :return: (if needed) registered Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">:</span>
            <span class="n">value</span><span class="p">[</span><span class="s2">&quot;__pk_only__&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">to_register</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_relation</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">_construct_model_from_pk</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a pk value, creates a dummy instance and registers it for parent.</span>
<span class="sd">        Registration is mutual, so children have also reference to parent.</span>

<span class="sd">        Used in normal FK for dictionaries.</span>

<span class="sd">        :param value: value of a related pk / fk column</span>
<span class="sd">        :type value: Any</span>
<span class="sd">        :param child: child/ related Model</span>
<span class="sd">        :type child: Model</span>
<span class="sd">        :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">        :type to_register: bool</span>
<span class="sd">        :return: (if needed) registered Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">pk_type</span><span class="p">()</span> <span class="o">==</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># pragma: nocover</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">pk_type</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="n">RelationshipInstanceError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Relationship error - ForeignKey </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;is of type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">pk_type</span><span class="p">()</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;while </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2"> passed as a parameter.&quot;</span>
            <span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">create_dummy_instance</span><span class="p">(</span><span class="n">fk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">to_register</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_relation</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">register_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers relation between parent and child in relation manager.</span>
<span class="sd">        Relation manager is kep on each model (different instance).</span>

<span class="sd">        Used in Metaclass and sometimes some relations are missing</span>
<span class="sd">        (i.e. cloned Models in fastapi might miss one).</span>

<span class="sd">        :param model: parent model (with relation definition)</span>
<span class="sd">        :type model: Model class</span>
<span class="sd">        :param child: child model</span>
<span class="sd">        :type child: Model class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_orm</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">has_unresolved_forward_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies if the filed has any ForwardRefs that require updating before the</span>
<span class="sd">        model can be used.</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span>

    <span class="k">def</span> <span class="nf">expand_relationship</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">child</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="s2">&quot;NewBaseModel&quot;</span><span class="p">],</span>
        <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For relations the child model is first constructed (if needed),</span>
<span class="sd">        registered in relation and returned.</span>
<span class="sd">        For relation fields the value can be a pk value (Any type of field),</span>
<span class="sd">        dict (from Model) or actual instance/list of a &quot;Model&quot;.</span>

<span class="sd">        Selects the appropriate constructor based on a passed value.</span>

<span class="sd">        :param value: a Model field value, returned untouched for non relation fields.</span>
<span class="sd">        :type value: Any</span>
<span class="sd">        :param child: a child Model to register</span>
<span class="sd">        :type child: Union[&quot;Model&quot;, &quot;NewBaseModel&quot;]</span>
<span class="sd">        :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">        :type to_register: bool</span>
<span class="sd">        :return: returns a Model or a list of Models</span>
<span class="sd">        :rtype: Optional[Union[&quot;Model&quot;, List[&quot;Model&quot;]]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">virtual</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="n">constructors</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_existing_model</span><span class="p">,</span>
            <span class="s2">&quot;dict&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_model_from_dict</span><span class="p">,</span>
            <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_model_from_sequence</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">constructors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
            <span class="n">value</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_model_from_pk</span>
        <span class="p">)(</span><span class="n">value</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">to_register</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">get_relation_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns name of the relation, which can be a own name or through model</span>
<span class="sd">        names for m2m models</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">get_source_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns model from which the relation comes -&gt; either owner or through model</span>

<span class="sd">        :return: source model</span>
<span class="sd">        :rtype: Type[&quot;Model&quot;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.default_source_field_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default_source_field_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns default target model name on through model.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the field</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">default_source_field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns default target model name on through model.</span>
<span class="sd">    :return: name of the field</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;to_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">through_relation_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.default_target_field_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default_target_field_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns default target model name on through model.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the field</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">default_target_field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns default target model name on through model.</span>
<span class="sd">    :return: name of the field</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;from_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">through_reverse_relation_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.evaluate_forward_ref" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evaluate_forward_ref</span><span class="p">(</span><span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Evaluates the ForwardRef to actual Field based on global and local namespaces</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>globalns</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>global namespace</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>localns</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>local namespace</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>None</code>
          </td>
          <td><p>None</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">evaluate_forward_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">globalns</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">localns</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluates the ForwardRef to actual Field based on global and local namespaces</span>

<span class="sd">    :param globalns: global namespace</span>
<span class="sd">    :type globalns: Any</span>
<span class="sd">    :param localns: local namespace</span>
<span class="sd">    :type localns: Any</span>
<span class="sd">    :return: None</span>
<span class="sd">    :rtype: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">evaluate_forwardref</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span> <span class="ow">or</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
        <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="n">populate_fk_params_based_on_to_model</span><span class="p">(</span>
            <span class="n">to</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span>
            <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nullable</span><span class="p">,</span>
            <span class="n">ondelete</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ondelete</span><span class="p">,</span>
            <span class="n">onupdate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">onupdate</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.expand_relationship" class="doc doc-heading">
<code class="highlight language-python"><span class="n">expand_relationship</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">to_register</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>For relations the child model is first constructed (if needed),
registered in relation and returned.
For relation fields the value can be a pk value (Any type of field),
dict (from Model) or actual instance/list of a "Model".</p>
<p>Selects the appropriate constructor based on a passed value.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>value</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>a Model field value, returned untouched for non relation fields.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>child</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="ormar.models.Model" href="models/#ormar.models.Model">Model</a>, <a class="autorefs autorefs-internal" title="ormar.models.NewBaseModel" href="models/#ormar.models.NewBaseModel">NewBaseModel</a>]</code>
          </td>
          <td><p>a child Model to register</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>to_register</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if the relation should be set in RelationshipManager</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Optional[Union[&#34;Model&#34;, List[&#34;Model&#34;]]]</code>
          </td>
          <td><p>returns a Model or a list of Models</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand_relationship</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">child</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="s2">&quot;NewBaseModel&quot;</span><span class="p">],</span>
    <span class="n">to_register</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For relations the child model is first constructed (if needed),</span>
<span class="sd">    registered in relation and returned.</span>
<span class="sd">    For relation fields the value can be a pk value (Any type of field),</span>
<span class="sd">    dict (from Model) or actual instance/list of a &quot;Model&quot;.</span>

<span class="sd">    Selects the appropriate constructor based on a passed value.</span>

<span class="sd">    :param value: a Model field value, returned untouched for non relation fields.</span>
<span class="sd">    :type value: Any</span>
<span class="sd">    :param child: a child Model to register</span>
<span class="sd">    :type child: Union[&quot;Model&quot;, &quot;NewBaseModel&quot;]</span>
<span class="sd">    :param to_register: flag if the relation should be set in RelationshipManager</span>
<span class="sd">    :type to_register: bool</span>
<span class="sd">    :return: returns a Model or a list of Models</span>
<span class="sd">    :rtype: Optional[Union[&quot;Model&quot;, List[&quot;Model&quot;]]]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">virtual</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="n">constructors</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_existing_model</span><span class="p">,</span>
        <span class="s2">&quot;dict&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_model_from_dict</span><span class="p">,</span>
        <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_model_from_sequence</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">constructors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
        <span class="n">value</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_model_from_pk</span>
    <span class="p">)(</span><span class="n">value</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">to_register</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">model</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.get_related_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_related_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns name to use for reverse relation.
It's either set as <code>related_name</code> or by default it's owner model. get_name + 's'</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the related_name or default related name.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns name to use for reverse relation.</span>
<span class="sd">    It&#39;s either set as `related_name` or by default it&#39;s owner model. get_name + &#39;s&#39;</span>
<span class="sd">    :return: name of the related_name or default related name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;s&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.get_relation_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_relation_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns name of the relation, which can be a own name or through model
names for m2m models</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_relation_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns name of the relation, which can be a own name or through model</span>
<span class="sd">    names for m2m models</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.get_source_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_model</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns model from which the relation comes -&gt; either owner or through model</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Type[&#34;Model&#34;]</code>
          </td>
          <td><p>source model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns model from which the relation comes -&gt; either owner or through model</span>

<span class="sd">    :return: source model</span>
<span class="sd">    :rtype: Type[&quot;Model&quot;]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.get_source_related_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_related_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns name to use for source relation name.
For FK it's the same, differs for m2m fields.
It's either set as <code>related_name</code> or by default it's owner model. get_name + 's'</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the related_name or default related name.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns name to use for source relation name.</span>
<span class="sd">    For FK it&#39;s the same, differs for m2m fields.</span>
<span class="sd">    It&#39;s either set as `related_name` or by default it&#39;s owner model. get_name + &#39;s&#39;</span>
<span class="sd">    :return: name of the related_name or default related name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_related_name</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.has_unresolved_forward_refs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_unresolved_forward_refs</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Verifies if the filed has any ForwardRefs that require updating before the
model can be used.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">has_unresolved_forward_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verifies if the filed has any ForwardRefs that require updating before the</span>
<span class="sd">    model can be used.</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.foreign_key.ForeignKeyField.register_relation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_relation</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">child</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Registers relation between parent and child in relation manager.
Relation manager is kep on each model (different instance).</p>
<p>Used in Metaclass and sometimes some relations are missing
(i.e. cloned Models in fastapi might miss one).</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ormar.models.Model" href="models/#ormar.models.Model">Model</a></code>
          </td>
          <td><p>parent model (with relation definition)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>child</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ormar.models.Model" href="models/#ormar.models.Model">Model</a></code>
          </td>
          <td><p>child model</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">register_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Registers relation between parent and child in relation manager.</span>
<span class="sd">    Relation manager is kep on each model (different instance).</span>

<span class="sd">    Used in Metaclass and sometimes some relations are missing</span>
<span class="sd">    (i.e. cloned Models in fastapi might miss one).</span>

<span class="sd">    :param model: parent model (with relation definition)</span>
<span class="sd">    :type model: Model class</span>
<span class="sd">    :param child: child model</span>
<span class="sd">    :type child: Model class</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model</span><span class="o">.</span><span class="n">_orm</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Integer" class="doc doc-heading">
        <code>Integer</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>int</code></p>

  
      <p>Integer field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Integer</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Integer field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">int</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minimum</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maximum</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multiple_of</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>
        <span class="n">autoincrement</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;autoincrement&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">autoincrement</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">autoincrement</span>
            <span class="k">if</span> <span class="n">autoincrement</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ge&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;minimum&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;le&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;maximum&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Integer.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.JSON" class="doc doc-heading">
        <code>JSON</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>pydantic.<span title="pydantic.Json">Json</span></code></p>

  
      <p>JSON field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">JSON</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Json</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    JSON field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Json</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s1">&#39;{&quot;json&quot;: &quot;json&quot;}&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">none_as_null</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sql_nullable&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.JSON.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">none_as_null</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sql_nullable&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.LargeBinary" class="doc doc-heading">
        <code>LargeBinary</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>bytes</code></p>

  
      <p>LargeBinary field factory that construct Field classes
and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LargeBinary</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    LargeBinary field factory that construct Field classes</span>
<span class="sd">    and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">bytes</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;bytes&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">represent_as_base64_str</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">LargeBinary</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to validate if all required parameters on a given field type are set.</span>
<span class="sd">        :param kwargs: all params passed during construction</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;Parameter max_length is required for field LargeBinary&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.LargeBinary.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">LargeBinary</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.LargeBinary.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Used to validate if all required parameters on a given field type are set.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>all params passed during construction</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to validate if all required parameters on a given field type are set.</span>
<span class="sd">    :param kwargs: all params passed during construction</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">max_length</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">max_length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;Parameter max_length is required for field LargeBinary&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.ManyToManyField" class="doc doc-heading">
        <code>ManyToManyField</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.foreign_key.ForeignKeyField" href="fields/foreign_key/#ormar.fields.foreign_key.ForeignKeyField">ForeignKeyField</a></code>, <code><a class="autorefs autorefs-internal" href="#ormar">ormar</a>.<span title="ormar.QuerySetProtocol">QuerySetProtocol</span></code>, <code><a class="autorefs autorefs-internal" href="#ormar">ormar</a>.<span title="ormar.RelationProtocol">RelationProtocol</span></code></p>

  
      <p>Actual class returned from ManyToMany function call and stored in model_fields.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ManyToManyField</span><span class="p">(</span><span class="n">ForeignKeyField</span><span class="p">,</span> <span class="n">ormar</span><span class="o">.</span><span class="n">QuerySetProtocol</span><span class="p">,</span> <span class="n">ormar</span><span class="o">.</span><span class="n">RelationProtocol</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Actual class returned from ManyToMany function call and stored in model_fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">:</span> <span class="nb">type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_source_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns name to use for source relation name.</span>
<span class="sd">        For FK it&#39;s the same, differs for m2m fields.</span>
<span class="sd">        It&#39;s either set as `related_name` or by default it&#39;s field name.</span>
<span class="sd">        :return: name of the related_name or default related name.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_source_field_name</span><span class="p">()</span>
            <span class="p">]</span><span class="o">.</span><span class="n">related_name</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">has_unresolved_forward_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies if the filed has any ForwardRefs that require updating before the</span>
<span class="sd">        model can be used.</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span>

    <span class="k">def</span> <span class="nf">evaluate_forward_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">globalns</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">localns</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluates the ForwardRef to actual Field based on global and local namespaces</span>

<span class="sd">        :param globalns: global namespace</span>
<span class="sd">        :type globalns: Any</span>
<span class="sd">        :param localns: local namespace</span>
<span class="sd">        :type localns: Any</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">evaluate_forwardref</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span> <span class="ow">or</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">)</span> <span class="o">=</span> <span class="n">populate_m2m_params_based_on_to_model</span><span class="p">(</span>
                <span class="n">to</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nullable</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">through</span> <span class="o">=</span> <span class="n">evaluate_forwardref</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">,</span> <span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span> <span class="ow">or</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="n">forbid_through_relations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_relation_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns name of the relation, which can be a own name or through model</span>
<span class="sd">        names for m2m models</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference_primary</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_source_field_name</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_target_field_name</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_source_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns model from which the relation comes -&gt; either owner or through model</span>

<span class="sd">        :return: source model</span>
<span class="sd">        :rtype: Type[&quot;Model&quot;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span>

    <span class="k">def</span> <span class="nf">create_default_through_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates default empty through model if no additional fields are required.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">owner_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">to_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">owner_name</span><span class="si">}{</span><span class="n">to_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">owner_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">s_</span><span class="si">{</span><span class="n">to_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">s&quot;</span>
        <span class="n">new_meta_namespace</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;tablename&quot;</span><span class="p">:</span> <span class="n">table_name</span><span class="p">,</span>
            <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">new_meta</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="p">(),</span> <span class="n">new_meta_namespace</span><span class="p">)</span>
        <span class="n">through_model</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span>
            <span class="n">class_name</span><span class="p">,</span>
            <span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">,),</span>
            <span class="p">{</span><span class="s2">&quot;Meta&quot;</span><span class="p">:</span> <span class="n">new_meta</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)},</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">through</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">through_model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.many_to_many.ManyToManyField.create_default_through_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_default_through_model</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates default empty through model if no additional fields are required.</p>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_default_through_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates default empty through model if no additional fields are required.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">owner_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">to_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">class_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">owner_name</span><span class="si">}{</span><span class="n">to_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">table_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">owner_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">s_</span><span class="si">{</span><span class="n">to_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">s&quot;</span>
    <span class="n">new_meta_namespace</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;tablename&quot;</span><span class="p">:</span> <span class="n">table_name</span><span class="p">,</span>
        <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">new_meta</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="p">(),</span> <span class="n">new_meta_namespace</span><span class="p">)</span>
    <span class="n">through_model</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span>
        <span class="n">class_name</span><span class="p">,</span>
        <span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">,),</span>
        <span class="p">{</span><span class="s2">&quot;Meta&quot;</span><span class="p">:</span> <span class="n">new_meta</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)},</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">through</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">through_model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.many_to_many.ManyToManyField.evaluate_forward_ref" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evaluate_forward_ref</span><span class="p">(</span><span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Evaluates the ForwardRef to actual Field based on global and local namespaces</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>globalns</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>global namespace</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>localns</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>local namespace</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>None</code>
          </td>
          <td><p>None</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">evaluate_forward_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">globalns</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">localns</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluates the ForwardRef to actual Field based on global and local namespaces</span>

<span class="sd">    :param globalns: global namespace</span>
<span class="sd">    :type globalns: Any</span>
<span class="sd">    :param localns: local namespace</span>
<span class="sd">    :type localns: Any</span>
<span class="sd">    :return: None</span>
<span class="sd">    :rtype: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">evaluate_forwardref</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span> <span class="ow">or</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>

        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span><span class="p">)</span> <span class="o">=</span> <span class="n">populate_m2m_params_based_on_to_model</span><span class="p">(</span>
            <span class="n">to</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nullable</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">through</span> <span class="o">=</span> <span class="n">evaluate_forwardref</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">,</span> <span class="n">globalns</span><span class="p">,</span> <span class="n">localns</span> <span class="ow">or</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
        <span class="n">forbid_through_relations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.many_to_many.ManyToManyField.get_relation_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_relation_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns name of the relation, which can be a own name or through model
names for m2m models</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_relation_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns name of the relation, which can be a own name or through model</span>
<span class="sd">    names for m2m models</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_reference_primary</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_source_field_name</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_target_field_name</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.many_to_many.ManyToManyField.get_source_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_model</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns model from which the relation comes -&gt; either owner or through model</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Type[&#34;Model&#34;]</code>
          </td>
          <td><p>source model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns model from which the relation comes -&gt; either owner or through model</span>

<span class="sd">    :return: source model</span>
<span class="sd">    :rtype: Type[&quot;Model&quot;]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.many_to_many.ManyToManyField.get_source_related_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_related_name</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns name to use for source relation name.
For FK it's the same, differs for m2m fields.
It's either set as <code>related_name</code> or by default it's field name.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the related_name or default related name.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_related_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns name to use for source relation name.</span>
<span class="sd">    For FK it&#39;s the same, differs for m2m fields.</span>
<span class="sd">    It&#39;s either set as `related_name` or by default it&#39;s field name.</span>
<span class="sd">    :return: name of the related_name or default related name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_source_field_name</span><span class="p">()</span>
        <span class="p">]</span><span class="o">.</span><span class="n">related_name</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.many_to_many.ManyToManyField.has_unresolved_forward_refs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_unresolved_forward_refs</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Verifies if the filed has any ForwardRefs that require updating before the
model can be used.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">has_unresolved_forward_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verifies if the filed has any ForwardRefs that require updating before the</span>
<span class="sd">    model can be used.</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Model" class="doc doc-heading">
        <code>Model</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.models.model_row.ModelRow" href="models/model_row/#ormar.models.model_row.ModelRow">ModelRow</a></code></p>



        <details class="quote">
          <summary>Source code in <code>ormar/models/model.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">ModelRow</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
        <span class="n">Meta</span><span class="p">:</span> <span class="n">ModelMeta</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
        <span class="n">_repr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">skip_field</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">_repr</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">upsert</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs either a save or an update depending on the presence of the pk.</span>
<span class="sd">        If the pk field is filled it&#39;s an update, otherwise the save is performed.</span>
<span class="sd">        For save kwargs are ignored, used only in update if provided.</span>

<span class="sd">        :param kwargs: list of fields to update</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: saved Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">force_save</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__force_save__&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">force_save</span><span class="p">:</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">row</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_one</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a save of given Model instance.</span>
<span class="sd">        If primary key is already saved, db backend will throw integrity error.</span>

<span class="sd">        Related models are saved by pk number, reverse relation and many to many fields</span>
<span class="sd">        are not saved - use corresponding relations methods.</span>

<span class="sd">        If there are fields with server_default set and those fields</span>
<span class="sd">        are not already filled save will trigger also a second query</span>
<span class="sd">        to refreshed the fields populated server side.</span>

<span class="sd">        Does not recognize if model was previously saved.</span>
<span class="sd">        If you want to perform update or insert depending on the pk</span>
<span class="sd">        fields presence use upsert.</span>

<span class="sd">        Sends pre_save and post_save signals.</span>

<span class="sd">        Sets model save status to True.</span>

<span class="sd">        :return: saved Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_model_db_fields</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">]</span><span class="o">.</span><span class="n">autoincrement</span><span class="p">:</span>
            <span class="n">self_fields</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate_default_values</span><span class="p">(</span><span class="n">self_fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">self_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_columns_to_aliases</span><span class="p">(</span><span class="n">self_fields</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">self_fields</span><span class="p">)</span>

        <span class="n">pk</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pk</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pk</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk_type</span><span class="p">()):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># refresh server side defaults</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
            <span class="n">field</span><span class="o">.</span><span class="n">server_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">self_fields</span>
        <span class="p">):</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span>  <span class="c1"># noqa: CCR001, CFQ002</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">save_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">relation_map</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exclude</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">update_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">previous_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">relation_field</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ForeignKeyField&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Triggers a upsert method on all related models</span>
<span class="sd">        if the instances are not already saved.</span>
<span class="sd">        By default saves only the directly related ones.</span>

<span class="sd">        If follow=True is set it saves also related models of related models.</span>

<span class="sd">        To not get stuck in an infinite loop as related models also keep a relation</span>
<span class="sd">        to parent model visited models set is kept.</span>

<span class="sd">        That way already visited models that are nested are saved, but the save do not</span>
<span class="sd">        follow them inside. So Model A -&gt; Model B -&gt; Model A -&gt; Model C will save second</span>
<span class="sd">        Model A but will never follow into Model C.</span>
<span class="sd">        Nested relations of those kind need to be persisted manually.</span>

<span class="sd">        :param relation_field: field with relation leading to this model</span>
<span class="sd">        :type relation_field: Optional[ForeignKeyField]</span>
<span class="sd">        :param previous_model: previous model from which method came</span>
<span class="sd">        :type previous_model: Model</span>
<span class="sd">        :param exclude: items to exclude during saving of relations</span>
<span class="sd">        :type exclude: Union[Set, Dict]</span>
<span class="sd">        :param relation_map: map of relations to follow</span>
<span class="sd">        :type relation_map: Dict</span>
<span class="sd">        :param save_all: flag if all models should be saved or only not saved ones</span>
<span class="sd">        :type save_all: bool</span>
<span class="sd">        :param follow: flag to trigger deep save -</span>
<span class="sd">        by default only directly related models are saved</span>
<span class="sd">        with follow=True also related models of related models are saved</span>
<span class="sd">        :type follow: bool</span>
<span class="sd">        :param update_count: internal parameter for recursive calls -</span>
<span class="sd">        number of updated instances</span>
<span class="sd">        :type update_count: int</span>
<span class="sd">        :return: number of updated/saved models</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relation_map</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">relation_map</span>
            <span class="k">if</span> <span class="n">relation_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">translate_list_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iterate_related_models</span><span class="p">())</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">exclude</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exclude</span><span class="p">,</span> <span class="n">Set</span><span class="p">):</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="n">translate_list_to_dict</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
        <span class="n">relation_map</span> <span class="o">=</span> <span class="n">subtract_dict</span><span class="p">(</span><span class="n">relation_map</span><span class="p">,</span> <span class="n">exclude</span> <span class="ow">or</span> <span class="p">{})</span>

        <span class="k">if</span> <span class="n">relation_map</span><span class="p">:</span>
            <span class="n">fields_to_visit</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">field</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_related_fields</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">relation_map</span>
            <span class="p">}</span>
            <span class="n">pre_save</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">field</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_to_visit</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">virtual</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">is_multi</span>
            <span class="p">}</span>

            <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_relation_list</span><span class="p">(</span>
                <span class="n">fields_list</span><span class="o">=</span><span class="n">pre_save</span><span class="p">,</span>
                <span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span>
                <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
                <span class="n">relation_map</span><span class="o">=</span><span class="n">relation_map</span><span class="p">,</span>
                <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upsert_model</span><span class="p">(</span>
                <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
                <span class="n">previous_model</span><span class="o">=</span><span class="n">previous_model</span><span class="p">,</span>
                <span class="n">relation_field</span><span class="o">=</span><span class="n">relation_field</span><span class="p">,</span>
                <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">post_save</span> <span class="o">=</span> <span class="n">fields_to_visit</span> <span class="o">-</span> <span class="n">pre_save</span>

            <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_relation_list</span><span class="p">(</span>
                <span class="n">fields_list</span><span class="o">=</span><span class="n">post_save</span><span class="p">,</span>
                <span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span>
                <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
                <span class="n">relation_map</span><span class="o">=</span><span class="n">relation_map</span><span class="p">,</span>
                <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upsert_model</span><span class="p">(</span>
                <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
                <span class="n">previous_model</span><span class="o">=</span><span class="n">previous_model</span><span class="p">,</span>
                <span class="n">relation_field</span><span class="o">=</span><span class="n">relation_field</span><span class="p">,</span>
                <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">update_count</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs update of Model instance in the database.</span>
<span class="sd">        Fields can be updated before or you can pass them as kwargs.</span>

<span class="sd">        Sends pre_update and post_update signals.</span>

<span class="sd">        Sets model save status to True.</span>

<span class="sd">        :param _columns: list of columns to update, if None all are updated</span>
<span class="sd">        :type _columns: List</span>
<span class="sd">        :raises ModelPersistenceError: If the pk column is not set</span>

<span class="sd">        :param kwargs: list of fields to update as field=value pairs</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: updated Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelPersistenceError</span><span class="p">(</span>
                <span class="s2">&quot;You cannot update not saved model! Use save or upsert method.&quot;</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">pre_update</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
            <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">passed_args</span><span class="o">=</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_model_db_fields</span><span class="p">()</span>
        <span class="n">self_fields</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_column_name_from_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">_columns</span><span class="p">:</span>
            <span class="n">self_fields</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">self_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_columns</span><span class="p">}</span>
        <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_columns_to_aliases</span><span class="p">(</span><span class="n">self_fields</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">self_fields</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">))</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_update</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes the Model instance from the database.</span>

<span class="sd">        Sends pre_delete and post_delete signals.</span>

<span class="sd">        Sets model save status to False.</span>

<span class="sd">        Note it does not delete the Model itself (python object).</span>
<span class="sd">        So you can delete and later save (since pk is deleted no conflict will arise)</span>
<span class="sd">        or update and the Model will be saved in database again.</span>

<span class="sd">        :return: number of deleted rows (for some backends)</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">pre_delete</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_delete</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allow to refresh existing Models fields from database.</span>
<span class="sd">        Be careful as the related models can be overwritten by pk_only models in load.</span>
<span class="sd">        Does NOT refresh the related models fields if they were loaded before.</span>

<span class="sd">        :raises NoMatch: If given pk is not found in database.</span>

<span class="sd">        :return: reloaded Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_one</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
            <span class="k">raise</span> <span class="n">NoMatch</span><span class="p">(</span><span class="s2">&quot;Instance was deleted from database and cannot be refreshed&quot;</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_aliases_to_columns</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">load_all</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
        <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">exclude</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allow to refresh existing Models fields from database.</span>
<span class="sd">        Performs refresh of the related models fields.</span>

<span class="sd">        By default, loads only self and the directly related ones.</span>

<span class="sd">        If follow=True is set it loads also related models of related models.</span>

<span class="sd">        To not get stuck in an infinite loop as related models also keep a relation</span>
<span class="sd">        to parent model visited models set is kept.</span>

<span class="sd">        That way already visited models that are nested are loaded, but the load do not</span>
<span class="sd">        follow them inside. So Model A -&gt; Model B -&gt; Model C -&gt; Model A -&gt; Model X</span>
<span class="sd">        will load second Model A but will never follow into Model X.</span>
<span class="sd">        Nested relations of those kind need to be loaded manually.</span>

<span class="sd">        :param order_by: columns by which models should be sorted</span>
<span class="sd">        :type order_by: Union[List, str]</span>
<span class="sd">        :raises NoMatch: If given pk is not found in database.</span>

<span class="sd">        :param exclude: related models to exclude</span>
<span class="sd">        :type exclude: Union[List, str, Set, Dict]</span>
<span class="sd">        :param follow: flag to trigger deep save -</span>
<span class="sd">        by default only directly related models are saved</span>
<span class="sd">        with follow=True also related models of related models are saved</span>
<span class="sd">        :type follow: bool</span>
<span class="sd">        :return: reloaded Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">follow</span><span class="p">:</span>
            <span class="n">relations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterate_related_models</span><span class="p">()</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">objects</span>
        <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="n">queryset</span> <span class="o">=</span> <span class="n">queryset</span><span class="o">.</span><span class="n">exclude_fields</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">order_by</span><span class="p">:</span>
            <span class="n">queryset</span> <span class="o">=</span> <span class="n">queryset</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">queryset</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="n">relations</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orm</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Removes the Model instance from the database.</p>
<p>Sends pre_delete and post_delete signals.</p>
<p>Sets model save status to False.</p>
<p>Note it does not delete the Model itself (python object).
So you can delete and later save (since pk is deleted no conflict will arise)
or update and the Model will be saved in database again.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of deleted rows (for some backends)</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes the Model instance from the database.</span>

<span class="sd">    Sends pre_delete and post_delete signals.</span>

<span class="sd">    Sets model save status to False.</span>

<span class="sd">    Note it does not delete the Model itself (python object).</span>
<span class="sd">    So you can delete and later save (since pk is deleted no conflict will arise)</span>
<span class="sd">    or update and the Model will be saved in database again.</span>

<span class="sd">    :return: number of deleted rows (for some backends)</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">pre_delete</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_delete</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.load" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Allow to refresh existing Models fields from database.
Be careful as the related models can be overwritten by pk_only models in load.
Does NOT refresh the related models fields if they were loaded before.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>reloaded Model</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>NoMatch</code>
          </td>
          <td><p>If given pk is not found in database.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allow to refresh existing Models fields from database.</span>
<span class="sd">    Be careful as the related models can be overwritten by pk_only models in load.</span>
<span class="sd">    Does NOT refresh the related models fields if they were loaded before.</span>

<span class="sd">    :raises NoMatch: If given pk is not found in database.</span>

<span class="sd">    :return: reloaded Model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_one</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
        <span class="k">raise</span> <span class="n">NoMatch</span><span class="p">(</span><span class="s2">&quot;Instance was deleted from database and cannot be refreshed&quot;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_aliases_to_columns</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.load_all" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_all</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Allow to refresh existing Models fields from database.
Performs refresh of the related models fields.</p>
<p>By default, loads only self and the directly related ones.</p>
<p>If follow=True is set it loads also related models of related models.</p>
<p>To not get stuck in an infinite loop as related models also keep a relation
to parent model visited models set is kept.</p>
<p>That way already visited models that are nested are loaded, but the load do not
follow them inside. So Model A -&gt; Model B -&gt; Model C -&gt; Model A -&gt; Model X
will load second Model A but will never follow into Model X.
Nested relations of those kind need to be loaded manually.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>order_by</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str]</code>
          </td>
          <td><p>columns by which models should be sorted</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>exclude</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <span title="typing.Set">Set</span>, <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>related models to exclude</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>follow</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag to trigger deep save - by default only directly related models are saved with follow=True also related models of related models are saved</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>reloaded Model</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>NoMatch</code>
          </td>
          <td><p>If given pk is not found in database.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">load_all</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
    <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">exclude</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allow to refresh existing Models fields from database.</span>
<span class="sd">    Performs refresh of the related models fields.</span>

<span class="sd">    By default, loads only self and the directly related ones.</span>

<span class="sd">    If follow=True is set it loads also related models of related models.</span>

<span class="sd">    To not get stuck in an infinite loop as related models also keep a relation</span>
<span class="sd">    to parent model visited models set is kept.</span>

<span class="sd">    That way already visited models that are nested are loaded, but the load do not</span>
<span class="sd">    follow them inside. So Model A -&gt; Model B -&gt; Model C -&gt; Model A -&gt; Model X</span>
<span class="sd">    will load second Model A but will never follow into Model X.</span>
<span class="sd">    Nested relations of those kind need to be loaded manually.</span>

<span class="sd">    :param order_by: columns by which models should be sorted</span>
<span class="sd">    :type order_by: Union[List, str]</span>
<span class="sd">    :raises NoMatch: If given pk is not found in database.</span>

<span class="sd">    :param exclude: related models to exclude</span>
<span class="sd">    :type exclude: Union[List, str, Set, Dict]</span>
<span class="sd">    :param follow: flag to trigger deep save -</span>
<span class="sd">    by default only directly related models are saved</span>
<span class="sd">    with follow=True also related models of related models are saved</span>
<span class="sd">    :type follow: bool</span>
<span class="sd">    :return: reloaded Model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">relations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">follow</span><span class="p">:</span>
        <span class="n">relations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterate_related_models</span><span class="p">()</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">objects</span>
    <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">queryset</span><span class="o">.</span><span class="n">exclude_fields</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">order_by</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">queryset</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">queryset</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="n">relations</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_orm</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs a save of given Model instance.
If primary key is already saved, db backend will throw integrity error.</p>
<p>Related models are saved by pk number, reverse relation and many to many fields
are not saved - use corresponding relations methods.</p>
<p>If there are fields with server_default set and those fields
are not already filled save will trigger also a second query
to refreshed the fields populated server side.</p>
<p>Does not recognize if model was previously saved.
If you want to perform update or insert depending on the pk
fields presence use upsert.</p>
<p>Sends pre_save and post_save signals.</p>
<p>Sets model save status to True.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>saved Model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs a save of given Model instance.</span>
<span class="sd">    If primary key is already saved, db backend will throw integrity error.</span>

<span class="sd">    Related models are saved by pk number, reverse relation and many to many fields</span>
<span class="sd">    are not saved - use corresponding relations methods.</span>

<span class="sd">    If there are fields with server_default set and those fields</span>
<span class="sd">    are not already filled save will trigger also a second query</span>
<span class="sd">    to refreshed the fields populated server side.</span>

<span class="sd">    Does not recognize if model was previously saved.</span>
<span class="sd">    If you want to perform update or insert depending on the pk</span>
<span class="sd">    fields presence use upsert.</span>

<span class="sd">    Sends pre_save and post_save signals.</span>

<span class="sd">    Sets model save status to True.</span>

<span class="sd">    :return: saved Model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_model_db_fields</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">]</span><span class="o">.</span><span class="n">autoincrement</span><span class="p">:</span>
        <span class="n">self_fields</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate_default_values</span><span class="p">(</span><span class="n">self_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">self_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_columns_to_aliases</span><span class="p">(</span><span class="n">self_fields</span><span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">self_fields</span><span class="p">)</span>

    <span class="n">pk</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pk</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pk</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk_type</span><span class="p">()):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># refresh server side defaults</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
        <span class="n">field</span><span class="o">.</span><span class="n">server_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">self_fields</span>
    <span class="p">):</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.save_related" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_related</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">relation_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">update_count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">previous_model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relation_field</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Triggers a upsert method on all related models
if the instances are not already saved.
By default saves only the directly related ones.</p>
<p>If follow=True is set it saves also related models of related models.</p>
<p>To not get stuck in an infinite loop as related models also keep a relation
to parent model visited models set is kept.</p>
<p>That way already visited models that are nested are saved, but the save do not
follow them inside. So Model A -&gt; Model B -&gt; Model A -&gt; Model C will save second
Model A but will never follow into Model C.
Nested relations of those kind need to be persisted manually.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>relation_field</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ormar.ForeignKeyField" href="#ormar.ForeignKeyField">ForeignKeyField</a>]</code>
          </td>
          <td><p>field with relation leading to this model</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>previous_model</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ormar.models.model.Model" href="models/model/#ormar.models.model.Model">Model</a></code>
          </td>
          <td><p>previous model from which method came</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>exclude</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Set">Set</span>, <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>items to exclude during saving of relations</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>relation_map</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td><p>map of relations to follow</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>save_all</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if all models should be saved or only not saved ones</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>follow</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag to trigger deep save - by default only directly related models are saved with follow=True also related models of related models are saved</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>update_count</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>internal parameter for recursive calls - number of updated instances</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of updated/saved models</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span>  <span class="c1"># noqa: CCR001, CFQ002</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">save_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">relation_map</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exclude</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">update_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">previous_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">relation_field</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ForeignKeyField&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Triggers a upsert method on all related models</span>
<span class="sd">    if the instances are not already saved.</span>
<span class="sd">    By default saves only the directly related ones.</span>

<span class="sd">    If follow=True is set it saves also related models of related models.</span>

<span class="sd">    To not get stuck in an infinite loop as related models also keep a relation</span>
<span class="sd">    to parent model visited models set is kept.</span>

<span class="sd">    That way already visited models that are nested are saved, but the save do not</span>
<span class="sd">    follow them inside. So Model A -&gt; Model B -&gt; Model A -&gt; Model C will save second</span>
<span class="sd">    Model A but will never follow into Model C.</span>
<span class="sd">    Nested relations of those kind need to be persisted manually.</span>

<span class="sd">    :param relation_field: field with relation leading to this model</span>
<span class="sd">    :type relation_field: Optional[ForeignKeyField]</span>
<span class="sd">    :param previous_model: previous model from which method came</span>
<span class="sd">    :type previous_model: Model</span>
<span class="sd">    :param exclude: items to exclude during saving of relations</span>
<span class="sd">    :type exclude: Union[Set, Dict]</span>
<span class="sd">    :param relation_map: map of relations to follow</span>
<span class="sd">    :type relation_map: Dict</span>
<span class="sd">    :param save_all: flag if all models should be saved or only not saved ones</span>
<span class="sd">    :type save_all: bool</span>
<span class="sd">    :param follow: flag to trigger deep save -</span>
<span class="sd">    by default only directly related models are saved</span>
<span class="sd">    with follow=True also related models of related models are saved</span>
<span class="sd">    :type follow: bool</span>
<span class="sd">    :param update_count: internal parameter for recursive calls -</span>
<span class="sd">    number of updated instances</span>
<span class="sd">    :type update_count: int</span>
<span class="sd">    :return: number of updated/saved models</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">relation_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">relation_map</span>
        <span class="k">if</span> <span class="n">relation_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">else</span> <span class="n">translate_list_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iterate_related_models</span><span class="p">())</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exclude</span><span class="p">,</span> <span class="n">Set</span><span class="p">):</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="n">translate_list_to_dict</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">relation_map</span> <span class="o">=</span> <span class="n">subtract_dict</span><span class="p">(</span><span class="n">relation_map</span><span class="p">,</span> <span class="n">exclude</span> <span class="ow">or</span> <span class="p">{})</span>

    <span class="k">if</span> <span class="n">relation_map</span><span class="p">:</span>
        <span class="n">fields_to_visit</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">field</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_related_fields</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">relation_map</span>
        <span class="p">}</span>
        <span class="n">pre_save</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">field</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_to_visit</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">virtual</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">is_multi</span>
        <span class="p">}</span>

        <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_relation_list</span><span class="p">(</span>
            <span class="n">fields_list</span><span class="o">=</span><span class="n">pre_save</span><span class="p">,</span>
            <span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span>
            <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
            <span class="n">relation_map</span><span class="o">=</span><span class="n">relation_map</span><span class="p">,</span>
            <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upsert_model</span><span class="p">(</span>
            <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
            <span class="n">previous_model</span><span class="o">=</span><span class="n">previous_model</span><span class="p">,</span>
            <span class="n">relation_field</span><span class="o">=</span><span class="n">relation_field</span><span class="p">,</span>
            <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">post_save</span> <span class="o">=</span> <span class="n">fields_to_visit</span> <span class="o">-</span> <span class="n">pre_save</span>

        <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_relation_list</span><span class="p">(</span>
            <span class="n">fields_list</span><span class="o">=</span><span class="n">post_save</span><span class="p">,</span>
            <span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span>
            <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
            <span class="n">relation_map</span><span class="o">=</span><span class="n">relation_map</span><span class="p">,</span>
            <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">update_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upsert_model</span><span class="p">(</span>
            <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">save_all</span><span class="o">=</span><span class="n">save_all</span><span class="p">,</span>
            <span class="n">previous_model</span><span class="o">=</span><span class="n">previous_model</span><span class="p">,</span>
            <span class="n">relation_field</span><span class="o">=</span><span class="n">relation_field</span><span class="p">,</span>
            <span class="n">update_count</span><span class="o">=</span><span class="n">update_count</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">update_count</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs update of Model instance in the database.
Fields can be updated before or you can pass them as kwargs.</p>
<p>Sends pre_update and post_update signals.</p>
<p>Sets model save status to True.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>_columns</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>list of columns to update, if None all are updated</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>list of fields to update as field=value pairs</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>updated Model</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ModelPersistenceError</code>
          </td>
          <td><p>If the pk column is not set</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs update of Model instance in the database.</span>
<span class="sd">    Fields can be updated before or you can pass them as kwargs.</span>

<span class="sd">    Sends pre_update and post_update signals.</span>

<span class="sd">    Sets model save status to True.</span>

<span class="sd">    :param _columns: list of columns to update, if None all are updated</span>
<span class="sd">    :type _columns: List</span>
<span class="sd">    :raises ModelPersistenceError: If the pk column is not set</span>

<span class="sd">    :param kwargs: list of fields to update as field=value pairs</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: updated Model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_from_dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ModelPersistenceError</span><span class="p">(</span>
            <span class="s2">&quot;You cannot update not saved model! Use save or upsert method.&quot;</span>
        <span class="p">)</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">pre_update</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">passed_args</span><span class="o">=</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_model_db_fields</span><span class="p">()</span>
    <span class="n">self_fields</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_column_name_from_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">_columns</span><span class="p">:</span>
        <span class="n">self_fields</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">self_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_columns</span><span class="p">}</span>
    <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_columns_to_aliases</span><span class="p">(</span><span class="n">self_fields</span><span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">self_fields</span><span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">))</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_update</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.models.model.Model.upsert" class="doc doc-heading">
<code class="highlight language-python"><span class="n">upsert</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs either a save or an update depending on the presence of the pk.
If the pk field is filled it's an update, otherwise the save is performed.
For save kwargs are ignored, used only in update if provided.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>list of fields to update</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>saved Model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/models/model.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">upsert</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs either a save or an update depending on the presence of the pk.</span>
<span class="sd">    If the pk field is filled it&#39;s an update, otherwise the save is performed.</span>
<span class="sd">    For save kwargs are ignored, used only in update if provided.</span>

<span class="sd">    :param kwargs: list of fields to update</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: saved Model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">force_save</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__force_save__&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_save</span><span class="p">:</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk_column</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_one</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.ModelDefinitionError" class="doc doc-heading">
        <code>ModelDefinitionError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.exceptions.AsyncOrmException" href="exceptions/#ormar.exceptions.AsyncOrmException">AsyncOrmException</a></code></p>

  
      <p>Raised for errors related to the model definition itself:</p>
<ul>
<li>setting @property_field on method with arguments other than func(self)</li>
<li>defining a Field without required parameters</li>
<li>defining a model with more than one primary_key</li>
<li>defining a model without primary_key</li>
<li>setting primary_key column as pydantic_only</li>
</ul>


        <details class="quote">
          <summary>Source code in <code>ormar/exceptions.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ModelDefinitionError</span><span class="p">(</span><span class="n">AsyncOrmException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raised for errors related to the model definition itself:</span>

<span class="sd">    * setting @property_field on method with arguments other than func(self)</span>
<span class="sd">    * defining a Field without required parameters</span>
<span class="sd">    * defining a model with more than one primary_key</span>
<span class="sd">    * defining a model without primary_key</span>
<span class="sd">    * setting primary_key column as pydantic_only</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.ModelMeta" class="doc doc-heading">
        <code>ModelMeta</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Class used for type hinting.
Users can subclass this one for convenience but it's not required.
The only requirement is that ormar.Model has to have inner class with name Meta.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/models/metaclass.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ModelMeta</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class used for type hinting.</span>
<span class="sd">    Users can subclass this one for convenience but it&#39;s not required.</span>
<span class="sd">    The only requirement is that ormar.Model has to have inner class with name Meta.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tablename</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Table</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">MetaData</span>
    <span class="n">database</span><span class="p">:</span> <span class="n">databases</span><span class="o">.</span><span class="n">Database</span>
    <span class="n">columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Column</span><span class="p">]</span>
    <span class="n">constraints</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ColumnCollectionConstraint</span><span class="p">]</span>
    <span class="n">pkname</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">model_fields</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseField</span><span class="p">,</span> <span class="n">ForeignKeyField</span><span class="p">,</span> <span class="n">ManyToManyField</span><span class="p">]]</span>
    <span class="n">alias_manager</span><span class="p">:</span> <span class="n">AliasManager</span>
    <span class="n">property_fields</span><span class="p">:</span> <span class="n">Set</span>
    <span class="n">signals</span><span class="p">:</span> <span class="n">SignalEmitter</span>
    <span class="n">abstract</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">requires_ref_update</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">orders_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">exclude_parent_fields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">extra</span><span class="p">:</span> <span class="n">Extra</span>
    <span class="n">queryset_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">QuerySet</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.MultipleMatches" class="doc doc-heading">
        <code>MultipleMatches</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.exceptions.AsyncOrmException" href="exceptions/#ormar.exceptions.AsyncOrmException">AsyncOrmException</a></code></p>

  
      <p>Raised for database queries that should return one row (i.e. get, first etc.)
but has multiple matching results in response.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/exceptions.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MultipleMatches</span><span class="p">(</span><span class="n">AsyncOrmException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raised for database queries that should return one row (i.e. get, first etc.)</span>
<span class="sd">    but has multiple matching results in response.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.NoMatch" class="doc doc-heading">
        <code>NoMatch</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.exceptions.AsyncOrmException" href="exceptions/#ormar.exceptions.AsyncOrmException">AsyncOrmException</a></code></p>

  
      <p>Raised for database queries that has no matching result (empty result).</p>


        <details class="quote">
          <summary>Source code in <code>ormar/exceptions.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NoMatch</span><span class="p">(</span><span class="n">AsyncOrmException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raised for database queries that has no matching result (empty result).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.OrderAction" class="doc doc-heading">
        <code>OrderAction</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.queryset.actions.query_action.QueryAction" href="queryset/actions/query_action/#ormar.queryset.actions.query_action.QueryAction">QueryAction</a></code></p>

  
      <p>Order Actions is populated by queryset when order_by() is called.</p>
<p>All required params are extracted but kept raw until actual filter clause value
is required -&gt; then the action is converted into text() clause.</p>
<p>Extracted in order to easily change table prefixes on complex relations.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/queryset/actions/order_action.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">OrderAction</span><span class="p">(</span><span class="n">QueryAction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Order Actions is populated by queryset when order_by() is called.</span>

<span class="sd">    All required params are extracted but kept raw until actual filter clause value</span>
<span class="sd">    is required -&gt; then the action is converted into text() clause.</span>

<span class="sd">    Extracted in order to easily change table prefixes on complex relations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">order_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">query_str</span><span class="o">=</span><span class="n">order_str</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="n">model_cls</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_source_model_order</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">alias</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="o">=</span> <span class="n">alias</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_model</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span> <span class="ow">and</span> <span class="s2">&quot;__&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_str</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_source_model_order</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_postgres_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">_backend</span><span class="o">.</span><span class="n">_dialect</span><span class="o">.</span><span class="n">name</span>
        <span class="n">field_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">__type__</span>
        <span class="k">return</span> <span class="n">dialect</span> <span class="o">==</span> <span class="s2">&quot;postgresql&quot;</span> <span class="ow">and</span> <span class="n">field_type</span> <span class="o">==</span> <span class="nb">bool</span>

    <span class="k">def</span> <span class="nf">get_field_name_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Escapes characters if it&#39;s required.</span>
<span class="sd">        Substitutes values of the models if value is a ormar Model with its pk value.</span>
<span class="sd">        Compiles the clause.</span>

<span class="sd">        :return: complied and escaped clause</span>
<span class="sd">        :rtype: sqlalchemy.sql.elements.TextClause</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">get_min_or_max</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">expression</span><span class="o">.</span><span class="n">TextClause</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used in limit sub queries where you need to use aggregated functions</span>
<span class="sd">        in order to order by columns not included in group by. For postgres bool</span>
<span class="sd">        field it&#39;s using bool_or function as aggregates does not work with this type</span>
<span class="sd">        of columns.</span>

<span class="sd">        :return: min or max function to order</span>
<span class="sd">        :rtype: sqlalchemy.sql.elements.TextClause</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;min&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_postgres_bool</span> <span class="k">else</span> <span class="s2">&quot;bool_or&quot;</span>
            <span class="k">return</span> <span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;max&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_postgres_bool</span> <span class="k">else</span> <span class="s2">&quot;bool_or&quot;</span>
        <span class="k">return</span> <span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span><span class="si">}</span><span class="s2">) desc&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_text_clause</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">expression</span><span class="o">.</span><span class="n">TextClause</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Escapes characters if it&#39;s required.</span>
<span class="sd">        Substitutes values of the models if value is a ormar Model with its pk value.</span>
<span class="sd">        Compiles the clause.</span>

<span class="sd">        :return: complied and escaped clause</span>
<span class="sd">        :rtype: sqlalchemy.sql.elements.TextClause</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">_backend</span><span class="o">.</span><span class="n">_dialect</span>
            <span class="n">table_name</span> <span class="o">=</span> <span class="n">dialect</span><span class="o">.</span><span class="n">identifier_preparer</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">dialect</span><span class="o">.</span><span class="n">identifier_preparer</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_split_value_into_parts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">order_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;desc&quot;</span>
            <span class="n">order_str</span> <span class="o">=</span> <span class="n">order_str</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">order_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_parts</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">check_if_filter_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks filter conditions to find if they apply to current join.</span>

<span class="sd">        :param target_model: model which is now processed</span>
<span class="sd">        :type target_model: Type[&quot;Model&quot;]</span>
<span class="sd">        :param alias: prefix of the relation</span>
<span class="sd">        :type alias: str</span>
<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">target_model</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span> <span class="ow">and</span> <span class="n">alias</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.actions.order_action.OrderAction.check_if_filter_apply" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_if_filter_apply</span><span class="p">(</span><span class="n">target_model</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Checks filter conditions to find if they apply to current join.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>target_model</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]</code>
          </td>
          <td><p>model which is now processed</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>alias</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>prefix of the relation</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/actions/order_action.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_if_filter_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks filter conditions to find if they apply to current join.</span>

<span class="sd">    :param target_model: model which is now processed</span>
<span class="sd">    :type target_model: Type[&quot;Model&quot;]</span>
<span class="sd">    :param alias: prefix of the relation</span>
<span class="sd">    :type alias: str</span>
<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">target_model</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span> <span class="ow">and</span> <span class="n">alias</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.actions.order_action.OrderAction.get_field_name_text" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_name_text</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Escapes characters if it's required.
Substitutes values of the models if value is a ormar Model with its pk value.
Compiles the clause.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy.sql.elements.TextClause</code>
          </td>
          <td><p>complied and escaped clause</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/actions/order_action.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_field_name_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Escapes characters if it&#39;s required.</span>
<span class="sd">    Substitutes values of the models if value is a ormar Model with its pk value.</span>
<span class="sd">    Compiles the clause.</span>

<span class="sd">    :return: complied and escaped clause</span>
<span class="sd">    :rtype: sqlalchemy.sql.elements.TextClause</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.actions.order_action.OrderAction.get_min_or_max" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_min_or_max</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Used in limit sub queries where you need to use aggregated functions
in order to order by columns not included in group by. For postgres bool
field it's using bool_or function as aggregates does not work with this type
of columns.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy.sql.elements.TextClause</code>
          </td>
          <td><p>min or max function to order</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/actions/order_action.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_min_or_max</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">expression</span><span class="o">.</span><span class="n">TextClause</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used in limit sub queries where you need to use aggregated functions</span>
<span class="sd">    in order to order by columns not included in group by. For postgres bool</span>
<span class="sd">    field it&#39;s using bool_or function as aggregates does not work with this type</span>
<span class="sd">    of columns.</span>

<span class="sd">    :return: min or max function to order</span>
<span class="sd">    :rtype: sqlalchemy.sql.elements.TextClause</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;min&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_postgres_bool</span> <span class="k">else</span> <span class="s2">&quot;bool_or&quot;</span>
        <span class="k">return</span> <span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;max&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_postgres_bool</span> <span class="k">else</span> <span class="s2">&quot;bool_or&quot;</span>
    <span class="k">return</span> <span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span><span class="si">}</span><span class="s2">) desc&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.actions.order_action.OrderAction.get_text_clause" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_text_clause</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Escapes characters if it's required.
Substitutes values of the models if value is a ormar Model with its pk value.
Compiles the clause.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy.sql.elements.TextClause</code>
          </td>
          <td><p>complied and escaped clause</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/actions/order_action.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_text_clause</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">expression</span><span class="o">.</span><span class="n">TextClause</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Escapes characters if it&#39;s required.</span>
<span class="sd">    Substitutes values of the models if value is a ormar Model with its pk value.</span>
<span class="sd">    Compiles the clause.</span>

<span class="sd">    :return: complied and escaped clause</span>
<span class="sd">    :rtype: sqlalchemy.sql.elements.TextClause</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_prefix</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="n">table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span>
    <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_alias</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix</span><span class="p">:</span>
        <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">_backend</span><span class="o">.</span><span class="n">_dialect</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="n">dialect</span><span class="o">.</span><span class="n">identifier_preparer</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">dialect</span><span class="o">.</span><span class="n">identifier_preparer</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.QuerySet" class="doc doc-heading">
        <code>QuerySet</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="typing.Generic">Generic</span>[<span title="ormar.models.T">T</span>]</code></p>

  
      <p>Main class to perform database queries, exposed on each model as objects attribute.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  55</span>
<span class="normal">  56</span>
<span class="normal">  57</span>
<span class="normal">  58</span>
<span class="normal">  59</span>
<span class="normal">  60</span>
<span class="normal">  61</span>
<span class="normal">  62</span>
<span class="normal">  63</span>
<span class="normal">  64</span>
<span class="normal">  65</span>
<span class="normal">  66</span>
<span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QuerySet</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main class to perform database queries, exposed on each model as objects attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>  <span class="c1"># noqa CFQ002</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_cls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filter_clauses</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exclude_clauses</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">select_related</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">excludable</span><span class="p">:</span> <span class="s2">&quot;ExcludableItems&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">order_bys</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">prefetch_related</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">proxy_source_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy_source_model</span> <span class="o">=</span> <span class="n">proxy_source_model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span> <span class="o">=</span> <span class="n">model_cls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">filter_clauses</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">filter_clauses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">exclude_clauses</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">exclude_clauses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">select_related</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">select_related</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">prefetch_related</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">prefetch_related</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit_count</span> <span class="o">=</span> <span class="n">limit_count</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_offset</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span> <span class="o">=</span> <span class="n">excludable</span> <span class="ow">or</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ExcludableItems</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span> <span class="o">=</span> <span class="n">order_bys</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span> <span class="o">=</span> <span class="n">limit_raw_sql</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ModelMeta&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shortcut to model class Meta set on QuerySet model.</span>

<span class="sd">        :return: Meta class of the model</span>
<span class="sd">        :rtype: model Meta class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Model class of QuerySet is not initialized&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="o">.</span><span class="n">Meta</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shortcut to model class set on QuerySet.</span>

<span class="sd">        :return: model class</span>
<span class="sd">        :rtype: Type[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Model class of QuerySet is not initialized&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span>

    <span class="k">def</span> <span class="nf">rebuild_self</span><span class="p">(</span>  <span class="c1"># noqa: CFQ002</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filter_clauses</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exclude_clauses</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">select_related</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">excludable</span><span class="p">:</span> <span class="s2">&quot;ExcludableItems&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">order_bys</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">prefetch_related</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">proxy_source_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method that returns new instance of queryset based on passed params,</span>
<span class="sd">        all not passed params are taken from current values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">overwrites</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;select_related&quot;</span><span class="p">:</span> <span class="s2">&quot;_select_related&quot;</span><span class="p">,</span>
            <span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="s2">&quot;query_offset&quot;</span><span class="p">,</span>
            <span class="s2">&quot;excludable&quot;</span><span class="p">:</span> <span class="s2">&quot;_excludable&quot;</span><span class="p">,</span>
            <span class="s2">&quot;prefetch_related&quot;</span><span class="p">:</span> <span class="s2">&quot;_prefetch_related&quot;</span><span class="p">,</span>
            <span class="s2">&quot;limit_raw_sql&quot;</span><span class="p">:</span> <span class="s2">&quot;limit_sql_raw&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">passed_args</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">replace_if_none</span><span class="p">(</span><span class="n">arg_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">passed_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overwrites</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg_name</span><span class="p">,</span> <span class="n">arg_name</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">passed_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>
            <span class="n">filter_clauses</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;filter_clauses&quot;</span><span class="p">),</span>
            <span class="n">exclude_clauses</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;exclude_clauses&quot;</span><span class="p">),</span>
            <span class="n">select_related</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;select_related&quot;</span><span class="p">),</span>
            <span class="n">limit_count</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;limit_count&quot;</span><span class="p">),</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">),</span>
            <span class="n">excludable</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;excludable&quot;</span><span class="p">),</span>
            <span class="n">order_bys</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;order_bys&quot;</span><span class="p">),</span>
            <span class="n">prefetch_related</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;prefetch_related&quot;</span><span class="p">),</span>
            <span class="n">limit_raw_sql</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;limit_raw_sql&quot;</span><span class="p">),</span>
            <span class="n">proxy_source_model</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;proxy_source_model&quot;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_prefetch_related_models</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">models</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">],</span> <span class="n">rows</span><span class="p">:</span> <span class="n">List</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs prefetch query for selected models names.</span>

<span class="sd">        :param models: list of already parsed main Models from main query</span>
<span class="sd">        :type models: List[Model]</span>
<span class="sd">        :param rows: database rows from main query</span>
<span class="sd">        :type rows: List[sqlalchemy.engine.result.RowProxy]</span>
<span class="sd">        :return: list of models with prefetch models populated</span>
<span class="sd">        :rtype: List[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">PrefetchQuery</span><span class="p">(</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
            <span class="n">excludable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">,</span>
            <span class="n">prefetch_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span><span class="p">,</span>
            <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
            <span class="n">orders_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">query</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_process_query_result_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process database rows and initialize ormar Model from each of the rows.</span>

<span class="sd">        :param rows: list of database rows from query result</span>
<span class="sd">        :type rows: List[sqlalchemy.engine.result.RowProxy]</span>
<span class="sd">        :return: list of models</span>
<span class="sd">        :rtype: List[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result_rows</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">result_rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">from_row</span><span class="p">(</span>
                    <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span>
                    <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
                    <span class="n">excludable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">,</span>
                    <span class="n">source_model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
                    <span class="n">proxy_source_model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">proxy_source_model</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result_rows</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">merge_instances_list</span><span class="p">(</span><span class="n">result_rows</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">],</span> <span class="n">result_rows</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_resolve_filter_groups</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">groups</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FilterGroup</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resolves filter groups to populate FilterAction params in group tree.</span>

<span class="sd">        :param groups: tuple of FilterGroups</span>
<span class="sd">        :type groups: Any</span>
<span class="sd">        :return: list of resolver groups</span>
<span class="sd">        :rtype: Tuple[List[FilterGroup], List[str]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">filter_groups</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">select_related</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span>
        <span class="k">if</span> <span class="n">groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">FilterGroup</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
                        <span class="s2">&quot;Only ormar.and_ and ormar.or_ &quot;</span>
                        <span class="s2">&quot;can be passed as filter positional&quot;</span>
                        <span class="s2">&quot; arguments,&quot;</span>
                        <span class="s2">&quot;other values need to be passed by&quot;</span>
                        <span class="s2">&quot;keyword arguments&quot;</span>
                    <span class="p">)</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">select_related</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span>
                    <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
                    <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
                    <span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">filter_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">filter_groups</span><span class="p">,</span> <span class="n">select_related</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">check_single_result_rows_count</span><span class="p">(</span><span class="n">rows</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies if the result has one and only one row.</span>

<span class="sd">        :param rows: one element list of Models</span>
<span class="sd">        :type rows: List[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span> <span class="ow">or</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoMatch</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleMatches</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">databases</span><span class="o">.</span><span class="n">Database</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shortcut to models database from Meta class.</span>

<span class="sd">        :return: database</span>
<span class="sd">        :rtype: databases.Database</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">database</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Table</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shortcut to models table from Meta class.</span>

<span class="sd">        :return: database table</span>
<span class="sd">        :rtype: sqlalchemy.Table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">table</span>

    <span class="k">def</span> <span class="nf">build_select_expression</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">order_bys</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">select</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs the actual database query used in the QuerySet.</span>
<span class="sd">        If any of the params is not passed the QuerySet own value is used.</span>

<span class="sd">        :param limit: number to limit the query</span>
<span class="sd">        :type limit: int</span>
<span class="sd">        :param offset: number to offset by</span>
<span class="sd">        :type offset: int</span>
<span class="sd">        :param order_bys: list of order-by fields names</span>
<span class="sd">        :type order_bys: List</span>
<span class="sd">        :return: built sqlalchemy select expression</span>
<span class="sd">        :rtype: sqlalchemy.sql.selectable.Select</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qry</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
            <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
            <span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">,</span>
            <span class="n">exclude_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_offset</span><span class="p">,</span>
            <span class="n">excludable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">,</span>
            <span class="n">order_bys</span><span class="o">=</span><span class="n">order_bys</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
            <span class="n">limit_raw_sql</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span><span class="p">,</span>
            <span class="n">limit_count</span><span class="o">=</span><span class="n">limit</span> <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit_count</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="n">qry</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
        <span class="c1"># print(&quot;\n&quot;, exp.compile(compile_kwargs={&quot;literal_binds&quot;: True}))</span>
        <span class="k">return</span> <span class="n">exp</span>

    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span>  <span class="c1"># noqa: A003</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">_exclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows you to filter by any `Model` attribute/field</span>
<span class="sd">        as well as to fetch instances, with a filter across an FK relationship.</span>

<span class="sd">        You can use special filter suffix to change the filter operands:</span>

<span class="sd">        *  exact - like `album__name__exact=&#39;Malibu&#39;` (exact match)</span>
<span class="sd">        *  iexact - like `album__name__iexact=&#39;malibu&#39;` (exact match case insensitive)</span>
<span class="sd">        *  contains - like `album__name__contains=&#39;Mal&#39;` (sql like)</span>
<span class="sd">        *  icontains - like `album__name__icontains=&#39;mal&#39;` (sql like case insensitive)</span>
<span class="sd">        *  in - like `album__name__in=[&#39;Malibu&#39;, &#39;Barclay&#39;]` (sql in)</span>
<span class="sd">        *  isnull - like `album__name__isnull=True` (sql is null)</span>
<span class="sd">           (isnotnull `album__name__isnull=False` (sql is not null))</span>
<span class="sd">        *  gt - like `position__gt=3` (sql &gt;)</span>
<span class="sd">        *  gte - like `position__gte=3` (sql &gt;=)</span>
<span class="sd">        *  lt - like `position__lt=3` (sql &lt;)</span>
<span class="sd">        *  lte - like `position__lte=3` (sql &lt;=)</span>
<span class="sd">        *  startswith - like `album__name__startswith=&#39;Mal&#39;` (exact start match)</span>
<span class="sd">        *  istartswith - like `album__name__istartswith=&#39;mal&#39;` (case insensitive)</span>
<span class="sd">        *  endswith - like `album__name__endswith=&#39;ibu&#39;` (exact end match)</span>
<span class="sd">        *  iendswith - like `album__name__iendswith=&#39;IBU&#39;` (case insensitive)</span>

<span class="sd">        Note that you can also use python style filters - check the docs!</span>

<span class="sd">        :param _exclude: flag if it should be exclude or filter</span>
<span class="sd">        :type _exclude: bool</span>
<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: filtered QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">filter_groups</span><span class="p">,</span> <span class="n">select_related</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_filter_groups</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
        <span class="n">qryclause</span> <span class="o">=</span> <span class="n">QueryClause</span><span class="p">(</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
            <span class="n">select_related</span><span class="o">=</span><span class="n">select_related</span><span class="p">,</span>
            <span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">filter_clauses</span><span class="p">,</span> <span class="n">select_related</span> <span class="o">=</span> <span class="n">qryclause</span><span class="o">.</span><span class="n">prepare_filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">filter_clauses</span> <span class="o">=</span> <span class="n">filter_clauses</span> <span class="o">+</span> <span class="n">filter_groups</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="n">_exclude</span><span class="p">:</span>
            <span class="n">exclude_clauses</span> <span class="o">=</span> <span class="n">filter_clauses</span>
            <span class="n">filter_clauses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exclude_clauses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span>
            <span class="n">filter_clauses</span> <span class="o">=</span> <span class="n">filter_clauses</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span>
            <span class="n">filter_clauses</span><span class="o">=</span><span class="n">filter_clauses</span><span class="p">,</span>
            <span class="n">exclude_clauses</span><span class="o">=</span><span class="n">exclude_clauses</span><span class="p">,</span>
            <span class="n">select_related</span><span class="o">=</span><span class="n">select_related</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">exclude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Works exactly the same as filter and all modifiers (suffixes) are the same,</span>
<span class="sd">        but returns a *not* condition.</span>

<span class="sd">        So if you use `filter(name=&#39;John&#39;)` which is `where name = &#39;John&#39;` in SQL,</span>
<span class="sd">        the `exclude(name=&#39;John&#39;)` equals to `where name &lt;&gt; &#39;John&#39;`</span>

<span class="sd">        Note that all conditions are joined so if you pass multiple values it</span>
<span class="sd">        becomes a union of conditions.</span>

<span class="sd">        `exclude(name=&#39;John&#39;, age&gt;=35)` will become</span>
<span class="sd">        `where not (name=&#39;John&#39; and age&gt;=35)`</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: filtered QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">_exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">related</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows to prefetch related models during the same query.</span>

<span class="sd">        **With `select_related` always only one query is run against the database**,</span>
<span class="sd">        meaning that one (sometimes complicated) join is generated and later nested</span>
<span class="sd">        models are processed in python.</span>

<span class="sd">        To fetch related model use `ForeignKey` names.</span>

<span class="sd">        To chain related `Models` relation use double underscores between names.</span>

<span class="sd">        :param related: list of relation field names, can be linked by &#39;__&#39; to nest</span>
<span class="sd">        :type related: Union[List, str]</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">related</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">related</span> <span class="o">=</span> <span class="p">[</span><span class="n">related</span><span class="p">]</span>
        <span class="n">related</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">rel</span><span class="o">.</span><span class="n">_access_chain</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rel</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">)</span> <span class="k">else</span> <span class="n">rel</span>
            <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">related</span>
        <span class="p">]</span>

        <span class="n">related</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">)</span> <span class="o">+</span> <span class="n">related</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">select_related</span><span class="o">=</span><span class="n">related</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        By default adds only directly related models.</span>

<span class="sd">        If follow=True is set it adds also related models of related models.</span>

<span class="sd">        To not get stuck in an infinite loop as related models also keep a relation</span>
<span class="sd">        to parent model visited models set is kept.</span>

<span class="sd">        That way already visited models that are nested are loaded, but the load do not</span>
<span class="sd">        follow them inside. So Model A -&gt; Model B -&gt; Model C -&gt; Model A -&gt; Model X</span>
<span class="sd">        will load second Model A but will never follow into Model X.</span>
<span class="sd">        Nested relations of those kind need to be loaded manually.</span>

<span class="sd">        :param follow: flag to trigger deep save -</span>
<span class="sd">        by default only directly related models are saved</span>
<span class="sd">        with follow=True also related models of related models are saved</span>
<span class="sd">        :type follow: bool</span>
<span class="sd">        :return: reloaded Model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">follow</span><span class="p">:</span>
            <span class="n">relations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_iterate_related_models</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">select_related</span><span class="o">=</span><span class="n">relations</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prefetch_related</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">related</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows to prefetch related models during query - but opposite to</span>
<span class="sd">        `select_related` each subsequent model is fetched in a separate database query.</span>

<span class="sd">        **With `prefetch_related` always one query per Model is run against the</span>
<span class="sd">        database**, meaning that you will have multiple queries executed one</span>
<span class="sd">        after another.</span>

<span class="sd">        To fetch related model use `ForeignKey` names.</span>

<span class="sd">        To chain related `Models` relation use double underscores between names.</span>

<span class="sd">        :param related: list of relation field names, can be linked by &#39;__&#39; to nest</span>
<span class="sd">        :type related: Union[List, str]</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">related</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">related</span> <span class="o">=</span> <span class="p">[</span><span class="n">related</span><span class="p">]</span>
        <span class="n">related</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">rel</span><span class="o">.</span><span class="n">_access_chain</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rel</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">)</span> <span class="k">else</span> <span class="n">rel</span>
            <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">related</span>
        <span class="p">]</span>

        <span class="n">related</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span><span class="p">)</span> <span class="o">+</span> <span class="n">related</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">prefetch_related</span><span class="o">=</span><span class="n">related</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span> <span class="n">_is_exclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        With `fields()` you can select subset of model columns to limit the data load.</span>

<span class="sd">        Note that `fields()` and `exclude_fields()` works both for main models</span>
<span class="sd">        (on normal queries like `get`, `all` etc.)</span>
<span class="sd">        as well as `select_related` and `prefetch_related`</span>
<span class="sd">        models (with nested notation).</span>

<span class="sd">        You can select specified fields by passing a `str, List[str], Set[str] or</span>
<span class="sd">        dict` with nested definition.</span>

<span class="sd">        To include related models use notation</span>
<span class="sd">        `{related_name}__{column}[__{optional_next} etc.]`.</span>

<span class="sd">        `fields()` can be called several times, building up the columns to select.</span>

<span class="sd">        If you include related models into `select_related()` call but you won&#39;t specify</span>
<span class="sd">        columns for those models in fields - implies a list of all fields for</span>
<span class="sd">        those nested models.</span>

<span class="sd">        Mandatory fields cannot be excluded as it will raise `ValidationError`,</span>
<span class="sd">        to exclude a field it has to be nullable.</span>

<span class="sd">        Pk column cannot be excluded - it&#39;s always auto added even if</span>
<span class="sd">        not explicitly included.</span>

<span class="sd">        You can also pass fields to include as dictionary or set.</span>

<span class="sd">        To mark a field as included in a dictionary use it&#39;s name as key</span>
<span class="sd">        and ellipsis as value.</span>

<span class="sd">        To traverse nested models use nested dictionaries.</span>

<span class="sd">        To include fields at last level instead of nested dictionary a set can be used.</span>

<span class="sd">        To include whole nested model specify model related field name and ellipsis.</span>

<span class="sd">        :param _is_exclude: flag if it&#39;s exclude or include operation</span>
<span class="sd">        :type _is_exclude: bool</span>
<span class="sd">        :param columns: columns to include</span>
<span class="sd">        :type columns: Union[List, str, Set, Dict]</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">excludable</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ExcludableItems</span><span class="o">.</span><span class="n">from_excludable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">)</span>
        <span class="n">excludable</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">is_exclude</span><span class="o">=</span><span class="n">_is_exclude</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">excludable</span><span class="o">=</span><span class="n">excludable</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">exclude_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        With `exclude_fields()` you can select subset of model columns that will</span>
<span class="sd">        be excluded to limit the data load.</span>

<span class="sd">        It&#39;s the opposite of `fields()` method so check documentation above</span>
<span class="sd">        to see what options are available.</span>

<span class="sd">        Especially check above how you can pass also nested dictionaries</span>
<span class="sd">        and sets as a mask to exclude fields from whole hierarchy.</span>

<span class="sd">        Note that `fields()` and `exclude_fields()` works both for main models</span>
<span class="sd">        (on normal queries like `get`, `all` etc.)</span>
<span class="sd">        as well as `select_related` and `prefetch_related` models</span>
<span class="sd">        (with nested notation).</span>

<span class="sd">        Mandatory fields cannot be excluded as it will raise `ValidationError`,</span>
<span class="sd">        to exclude a field it has to be nullable.</span>

<span class="sd">        Pk column cannot be excluded - it&#39;s always auto added even</span>
<span class="sd">        if explicitly excluded.</span>

<span class="sd">        :param columns: columns to exclude</span>
<span class="sd">        :type columns: Union[List, str, Set, Dict]</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">_is_exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">OrderAction</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        With `order_by()` you can order the results from database based on your</span>
<span class="sd">        choice of fields.</span>

<span class="sd">        You can provide a string with field name or list of strings with fields names.</span>

<span class="sd">        Ordering in sql will be applied in order of names you provide in order_by.</span>

<span class="sd">        By default if you do not provide ordering `ormar` explicitly orders by</span>
<span class="sd">        all primary keys</span>

<span class="sd">        If you are sorting by nested models that causes that the result rows are</span>
<span class="sd">        unsorted by the main model `ormar` will combine those children rows into</span>
<span class="sd">        one main model.</span>

<span class="sd">        The main model will never duplicate in the result</span>

<span class="sd">        To order by main model field just provide a field name</span>

<span class="sd">        To sort on nested models separate field names with dunder &#39;__&#39;.</span>

<span class="sd">        You can sort this way across all relation types -&gt; `ForeignKey`,</span>
<span class="sd">        reverse virtual FK and `ManyToMany` fields.</span>

<span class="sd">        To sort in descending order provide a hyphen in front of the field name</span>

<span class="sd">        :param columns: columns by which models should be sorted</span>
<span class="sd">        :type columns: Union[List, str]</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>

        <span class="n">orders_by</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">OrderAction</span><span class="p">(</span><span class="n">order_str</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">OrderAction</span><span class="p">)</span>
            <span class="k">else</span> <span class="n">x</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">columns</span>
        <span class="p">]</span>

        <span class="n">order_bys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">orders_by</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">order_bys</span><span class="o">=</span><span class="n">order_bys</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fields</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exclude_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">_as_dict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">_flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of dictionaries with column values in order of the fields</span>
<span class="sd">        passed or all fields from queried models.</span>

<span class="sd">        To filter for given row use filter/exclude methods before values,</span>
<span class="sd">        to limit number of rows use limit/offset or paginate before values.</span>

<span class="sd">        Note that it always return a list even for one row from database.</span>

<span class="sd">        :param exclude_through: flag if through models should be excluded</span>
<span class="sd">        :type exclude_through: bool</span>
<span class="sd">        :param _flatten: internal parameter to flatten one element tuples</span>
<span class="sd">        :type _flatten: bool</span>
<span class="sd">        :param _as_dict: internal parameter if return dict or tuples</span>
<span class="sd">        :type _as_dict: bool</span>
<span class="sd">        :param fields: field name or list of field names to extract from db</span>
<span class="sd">        :type fields:  Union[List, str, Set, Dict]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">fields</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
                <span class="n">_as_dict</span><span class="o">=</span><span class="n">_as_dict</span><span class="p">,</span> <span class="n">_flatten</span><span class="o">=</span><span class="n">_flatten</span><span class="p">,</span> <span class="n">exclude_through</span><span class="o">=</span><span class="n">exclude_through</span>
            <span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">alias_resolver</span> <span class="o">=</span> <span class="n">ReverseAliasResolver</span><span class="p">(</span>
            <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
            <span class="n">excludable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">,</span>
            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">exclude_through</span><span class="o">=</span><span class="n">exclude_through</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">column_map</span> <span class="o">=</span> <span class="n">alias_resolver</span><span class="o">.</span><span class="n">resolve_columns</span><span class="p">(</span>
            <span class="n">columns_names</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">LegacyRow</span><span class="p">,</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="n">column_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">column_map</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rows</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">_as_dict</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">if</span> <span class="n">_flatten</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="o">.</span><span class="n">include_entry_count</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;You cannot flatten values_list if more than one field is selected!&quot;</span>
            <span class="p">)</span>
        <span class="n">tuple_result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">tuple_result</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">_flatten</span> <span class="k">else</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tuple_result</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">values_list</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fields</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">exclude_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of tuples with column values in order of the fields passed or</span>
<span class="sd">        all fields from queried models.</span>

<span class="sd">        When one field is passed you can flatten the list of tuples into list of values</span>
<span class="sd">        of that single field.</span>

<span class="sd">        To filter for given row use filter/exclude methods before values,</span>
<span class="sd">        to limit number of rows use limit/offset or paginate before values.</span>

<span class="sd">        Note that it always return a list even for one row from database.</span>

<span class="sd">        :param exclude_through: flag if through models should be excluded</span>
<span class="sd">        :type exclude_through: bool</span>
<span class="sd">        :param fields: field name or list of field names to extract from db</span>
<span class="sd">        :type fields: Union[str, List[str]]</span>
<span class="sd">        :param flatten: when one field is passed you can flatten the list of tuples</span>
<span class="sd">        :type flatten: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
            <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
            <span class="n">exclude_through</span><span class="o">=</span><span class="n">exclude_through</span><span class="p">,</span>
            <span class="n">_as_dict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">_flatten</span><span class="o">=</span><span class="n">flatten</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a bool value to confirm if there are rows matching the given criteria</span>
<span class="sd">        (applied with `filter` and `exclude` if set).</span>

<span class="sd">        :return: result of the check</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_val</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distinct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns number of rows matching the given criteria</span>
<span class="sd">        (applied with `filter` and `exclude` if set before).</span>
<span class="sd">        If `distinct` is `True` (the default), this will return</span>
<span class="sd">        the number of primary rows selected. If `False`,</span>
<span class="sd">        the count will be the total number of rows returned</span>
<span class="sd">        (including extra rows for `one-to-many` or `many-to-many`</span>
<span class="sd">        left `select_related` table joins).</span>
<span class="sd">        `False` is the legacy (buggy) behavior for workflows that depend on it.</span>

<span class="sd">        :param distinct: flag if the primary table rows should be distinct or not</span>

<span class="sd">        :return: number of rows</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;subquery_for_count&quot;</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">distinct</span><span class="p">:</span>
            <span class="n">pk_column_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)</span>
            <span class="n">expr_distinct</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">pk_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;subquery_for_group&quot;</span><span class="p">)</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">expr_distinct</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_val</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_query_aggr_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sqlalchemy</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="n">select_actions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">SelectAction</span><span class="p">(</span><span class="n">select_str</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">func_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_numeric</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">select_actions</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
                    <span class="s2">&quot;You can use sum and svg only with&quot;</span> <span class="s2">&quot;numeric types of columns&quot;</span>
                <span class="p">)</span>
        <span class="n">select_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">apply_func</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">use_label</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">select_actions</span><span class="p">]</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;subquery_for_</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">select_columns</span><span class="p">)</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="c1"># print(&quot;\n&quot;, expr.compile(compile_kwargs={&quot;literal_binds&quot;: True}))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_one</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns max value of columns for rows matching the given criteria</span>
<span class="sd">        (applied with `filter` and `exclude` if set before).</span>

<span class="sd">        :return: max value of column(s)</span>
<span class="sd">        :rtype: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns min value of columns for rows matching the given criteria</span>
<span class="sd">        (applied with `filter` and `exclude` if set before).</span>

<span class="sd">        :return: min value of column(s)</span>
<span class="sd">        :rtype: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns sum value of columns for rows matching the given criteria</span>
<span class="sd">        (applied with `filter` and `exclude` if set before).</span>

<span class="sd">        :return: sum value of columns</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">avg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns avg value of columns for rows matching the given criteria</span>
<span class="sd">        (applied with `filter` and `exclude` if set before).</span>

<span class="sd">        :return: avg value of columns</span>
<span class="sd">        :rtype: Union[int, float, List]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;avg&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">each</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the model table after applying the filters from kwargs.</span>

<span class="sd">        You have to either pass a filter to narrow down a query or explicitly pass</span>
<span class="sd">        each=True flag to affect whole table.</span>

<span class="sd">        :param each: flag if whole table should be affected if no filter is passed</span>
<span class="sd">        :type each: bool</span>
<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: number of updated rows</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">each</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;You cannot update without filtering the queryset first. &quot;</span>
                <span class="s2">&quot;If you want to update all rows use update(each=True, **kwargs)&quot;</span>
            <span class="p">)</span>

        <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_db_own_fields</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">self_fields</span><span class="p">}</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">validate_choices</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">translate_columns_to_aliases</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span>

        <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">updates</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="n">expr</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">each</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes from the model table after applying the filters from kwargs.</span>

<span class="sd">        You have to either pass a filter to narrow down a query or explicitly pass</span>
<span class="sd">        each=True flag to affect whole table.</span>

<span class="sd">        :param each: flag if whole table should be affected if no filter is passed</span>
<span class="sd">        :type each: bool</span>
<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: number of deleted rows</span>
<span class="sd">        :rtype:int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">each</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;You cannot delete without filtering the queryset first. &quot;</span>
                <span class="s2">&quot;If you want to delete all rows use delete(each=True)&quot;</span>
            <span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="n">expr</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">paginate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        You can paginate the result which is a combination of offset and limit clauses.</span>
<span class="sd">        Limit is set to page size and offset is set to (page-1) * page_size.</span>

<span class="sd">        :param page_size: numbers of items per page</span>
<span class="sd">        :type page_size: int</span>
<span class="sd">        :param page: page number</span>
<span class="sd">        :type page: int</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">page_size</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span><span class="s2">&quot;Page size and page have to be greater than 0.&quot;</span><span class="p">)</span>

        <span class="n">limit_count</span> <span class="o">=</span> <span class="n">page_size</span>
        <span class="n">query_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">page_size</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">limit_count</span><span class="o">=</span><span class="n">limit_count</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">query_offset</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        You can limit the results to desired number of parent models.</span>

<span class="sd">        To limit the actual number of database query rows instead of number of main</span>
<span class="sd">        models use the `limit_raw_sql` parameter flag, and set it to `True`.</span>

<span class="sd">        :param limit_raw_sql: flag if raw sql should be limited</span>
<span class="sd">        :type limit_raw_sql: bool</span>
<span class="sd">        :param limit_count: number of models to limit</span>
<span class="sd">        :type limit_count: int</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">limit_raw_sql</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span> <span class="k">if</span> <span class="n">limit_raw_sql</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">limit_raw_sql</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">limit_count</span><span class="o">=</span><span class="n">limit_count</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="n">limit_raw_sql</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        You can also offset the results by desired number of main models.</span>

<span class="sd">        To offset the actual number of database query rows instead of number of main</span>
<span class="sd">        models use the `limit_raw_sql` parameter flag, and set it to `True`.</span>

<span class="sd">        :param limit_raw_sql: flag if raw sql should be offset</span>
<span class="sd">        :type limit_raw_sql: bool</span>
<span class="sd">        :param offset: numbers of models to offset</span>
<span class="sd">        :type offset: int</span>
<span class="sd">        :return: QuerySet</span>
<span class="sd">        :rtype: QuerySet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">limit_raw_sql</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span> <span class="k">if</span> <span class="n">limit_raw_sql</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">limit_raw_sql</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="n">limit_raw_sql</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the first row from the db ordered by primary key column ascending.</span>

<span class="sd">        :raises NoMatch: if no rows are returned</span>
<span class="sd">        :raises MultipleMatches: if more than 1 row is returned.</span>
<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: returned model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">(</span>
            <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">order_bys</span><span class="o">=</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">OrderAction</span><span class="p">(</span>
                        <span class="n">order_str</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                    <span class="p">)</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">is_source_model_order</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">])</span>
                <span class="k">else</span> <span class="p">[]</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="ow">and</span> <span class="n">processed_rows</span><span class="p">:</span>
            <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related_models</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_single_result_rows_count</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">processed_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_or_none</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get&#39;s the first row from the db meeting the criteria set by kwargs.</span>

<span class="sd">        If no criteria set it will return the last row in db sorted by pk.</span>

<span class="sd">        Passing a criteria is actually calling filter(*args, **kwargs) method described</span>
<span class="sd">        below.</span>

<span class="sd">        If not match is found None will be returned.</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: returned model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ormar</span><span class="o">.</span><span class="n">NoMatch</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>  <span class="c1"># noqa: CCR001</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get&#39;s the first row from the db meeting the criteria set by kwargs.</span>

<span class="sd">        If no criteria set it will return the last row in db sorted by pk.</span>

<span class="sd">        Passing a criteria is actually calling filter(*args, **kwargs) method described</span>
<span class="sd">        below.</span>

<span class="sd">        :raises NoMatch: if no rows are returned</span>
<span class="sd">        :raises MultipleMatches: if more than 1 row is returned.</span>
<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: returned model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">:</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">(</span>
                <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">order_bys</span><span class="o">=</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">OrderAction</span><span class="p">(</span>
                            <span class="n">order_str</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                        <span class="p">)</span>
                    <span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">is_source_model_order</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">])</span>
                    <span class="k">else</span> <span class="p">[]</span>
                <span class="p">)</span>
                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="ow">and</span> <span class="n">processed_rows</span><span class="p">:</span>
            <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related_models</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_single_result_rows_count</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">processed_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_or_create</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">_defaults</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Combination of create and get methods.</span>

<span class="sd">        Tries to get a row meeting the criteria for kwargs</span>
<span class="sd">        and if `NoMatch` exception is raised</span>
<span class="sd">        it creates a new one with given kwargs and _defaults.</span>

<span class="sd">        Passing a criteria is actually calling filter(*args, **kwargs) method described</span>
<span class="sd">        below.</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :param _defaults: default values for creating object</span>
<span class="sd">        :type _defaults: Optional[Dict[str, Any]]</span>
<span class="sd">        :return: model instance and a boolean</span>
<span class="sd">        :rtype: Tuple(&quot;T&quot;, bool)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="n">NoMatch</span><span class="p">:</span>
            <span class="n">_defaults</span> <span class="o">=</span> <span class="n">_defaults</span> <span class="ow">or</span> <span class="p">{}</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">_defaults</span><span class="p">}),</span> <span class="kc">True</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">update_or_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the model, or in case there is no match in database creates a new one.</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: updated or created model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pk_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span>
        <span class="k">if</span> <span class="s2">&quot;pk&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">pk_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pk&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pk_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="n">pk_name</span><span class="p">])</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">model</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>  <span class="c1"># noqa: A003</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all rows from a database for given model for set filter options.</span>

<span class="sd">        Passing args and/or kwargs is a shortcut and equals to calling</span>
<span class="sd">        `filter(*args, **kwargs).all()`.</span>

<span class="sd">        If there are no rows meeting the criteria an empty list is returned.</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: list of returned models</span>
<span class="sd">        :rtype: List[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="n">result_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="ow">and</span> <span class="n">result_rows</span><span class="p">:</span>
            <span class="n">result_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related_models</span><span class="p">(</span><span class="n">result_rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result_rows</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span>  <span class="c1"># noqa: A003</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return async iterable generator for all rows from a database for given model.</span>

<span class="sd">        Passing args and/or kwargs is a shortcut and equals to calling</span>
<span class="sd">        `filter(*args, **kwargs).iterate()`.</span>

<span class="sd">        If there are no rows meeting the criteria an empty async generator is returned.</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: asynchronous iterable generator of returned models</span>
<span class="sd">        :rtype: AsyncGenerator[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;Prefetch related queries are not supported in iterators&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">iterate</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">result</span>
            <span class="k">return</span>

        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>

        <span class="n">rows</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">last_primary_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">pk_alias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">expr</span><span class="p">):</span>
            <span class="n">current_primary_key</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">pk_alias</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">last_primary_key</span> <span class="o">==</span> <span class="n">current_primary_key</span> <span class="ow">or</span> <span class="n">last_primary_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">last_primary_key</span> <span class="o">=</span> <span class="n">current_primary_key</span>
                <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">yield</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">last_primary_key</span> <span class="o">=</span> <span class="n">current_primary_key</span>
            <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the model instance, saves it in a database and returns the updates model</span>
<span class="sd">        (with pk populated if not passed and autoincrement is set).</span>

<span class="sd">        The allowed kwargs are `Model` fields names and proper value types.</span>

<span class="sd">        :param kwargs: fields names and proper value types</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: created model</span>
<span class="sd">        :rtype: Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">instance</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">bulk_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a bulk create in one database session to speed up the process.</span>

<span class="sd">        Allows you to create multiple objects at once.</span>

<span class="sd">        A valid list of `Model` objects needs to be passed.</span>

<span class="sd">        Bulk operations do not send signals.</span>

<span class="sd">        :param objects: list of ormar models already initialized and ready to save.</span>
<span class="sd">        :type objects: List[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">objects</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelListEmptyError</span><span class="p">(</span><span class="s2">&quot;Bulk create objects are empty!&quot;</span><span class="p">)</span>

        <span class="n">ready_objects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="n">ready_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">prepare_model_to_save</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Allow context switching to prevent blocking</span>

        <span class="c1"># don&#39;t use execute_many, as in databases it&#39;s executed in a loop</span>
        <span class="c1"># instead of using execute_many from drivers</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">ready_objects</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">bulk_update</span><span class="p">(</span>  <span class="c1"># noqa:  CCR001</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs bulk update in one database session to speed up the process.</span>

<span class="sd">        Allows you to update multiple instance at once.</span>

<span class="sd">        All `Models` passed need to have primary key column populated.</span>

<span class="sd">        You can also select which fields to update by passing `columns` list</span>
<span class="sd">        as a list of string names.</span>

<span class="sd">        Bulk operations do not send signals.</span>

<span class="sd">        :param objects: list of ormar models</span>
<span class="sd">        :type objects: List[Model]</span>
<span class="sd">        :param columns: list of columns to update</span>
<span class="sd">        :type columns: List[str]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">objects</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelListEmptyError</span><span class="p">(</span><span class="s2">&quot;Bulk update objects are empty!&quot;</span><span class="p">)</span>

        <span class="n">ready_objects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pk_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_db_own_fields</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">pk_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span>

        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">new_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ModelPersistenceError</span><span class="p">(</span>
                    <span class="s2">&quot;You cannot update unsaved objects. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> has to have </span><span class="si">{</span><span class="n">pk_name</span><span class="si">}</span><span class="s2"> filled.&quot;</span>
                <span class="p">)</span>
            <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">prepare_model_to_update</span><span class="p">(</span><span class="n">new_kwargs</span><span class="p">)</span>
            <span class="n">ready_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span><span class="s2">&quot;new_&quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">new_kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">pk_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="n">pk_name</span><span class="p">))</span>
        <span class="n">pk_column_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span>
        <span class="n">table_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="p">]</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
            <span class="n">pk_column</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s2">&quot;new_&quot;</span> <span class="o">+</span> <span class="n">pk_column_name</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">bindparam</span><span class="p">(</span><span class="s2">&quot;new_&quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">columns</span>
                <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">pk_column_name</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">table_columns</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="c1"># databases bind params only where query is passed as string</span>
        <span class="c1"># otherwise it just passes all data to values and results in unconsumed columns</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute_many</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">ready_objects</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">)</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_bulk_update</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
            <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">instances</span><span class="o">=</span><span class="n">objects</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.all" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">all</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns all rows from a database for given model for set filter options.</p>
<p>Passing args and/or kwargs is a shortcut and equals to calling
<code>filter(*args, **kwargs).all()</code>.</p>
<p>If there are no rows meeting the criteria an empty list is returned.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>List[Model]</code>
          </td>
          <td><p>list of returned models</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>  <span class="c1"># noqa: A003</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns all rows from a database for given model for set filter options.</span>

<span class="sd">    Passing args and/or kwargs is a shortcut and equals to calling</span>
<span class="sd">    `filter(*args, **kwargs).all()`.</span>

<span class="sd">    If there are no rows meeting the criteria an empty list is returned.</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: list of returned models</span>
<span class="sd">    :rtype: List[Model]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="n">result_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="ow">and</span> <span class="n">result_rows</span><span class="p">:</span>
        <span class="n">result_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related_models</span><span class="p">(</span><span class="n">result_rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result_rows</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.avg" class="doc doc-heading">
<code class="highlight language-python"><span class="n">avg</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns avg value of columns for rows matching the given criteria
(applied with <code>filter</code> and <code>exclude</code> if set before).</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Union[int, float, List]</code>
          </td>
          <td><p>avg value of columns</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">avg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns avg value of columns for rows matching the given criteria</span>
<span class="sd">    (applied with `filter` and `exclude` if set before).</span>

<span class="sd">    :return: avg value of columns</span>
<span class="sd">    :rtype: Union[int, float, List]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;avg&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.build_select_expression" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_select_expression</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">order_bys</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Constructs the actual database query used in the QuerySet.
If any of the params is not passed the QuerySet own value is used.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>limit</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number to limit the query</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>offset</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number to offset by</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>order_bys</code></td>
          <td>
                <code><span title="typing.List">List</span></code>
          </td>
          <td><p>list of order-by fields names</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy.sql.selectable.Select</code>
          </td>
          <td><p>built sqlalchemy select expression</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build_select_expression</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">order_bys</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">select</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs the actual database query used in the QuerySet.</span>
<span class="sd">    If any of the params is not passed the QuerySet own value is used.</span>

<span class="sd">    :param limit: number to limit the query</span>
<span class="sd">    :type limit: int</span>
<span class="sd">    :param offset: number to offset by</span>
<span class="sd">    :type offset: int</span>
<span class="sd">    :param order_bys: list of order-by fields names</span>
<span class="sd">    :type order_bys: List</span>
<span class="sd">    :return: built sqlalchemy select expression</span>
<span class="sd">    :rtype: sqlalchemy.sql.selectable.Select</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">qry</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span>
        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
        <span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">,</span>
        <span class="n">exclude_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">offset</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_offset</span><span class="p">,</span>
        <span class="n">excludable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">,</span>
        <span class="n">order_bys</span><span class="o">=</span><span class="n">order_bys</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
        <span class="n">limit_raw_sql</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span><span class="p">,</span>
        <span class="n">limit_count</span><span class="o">=</span><span class="n">limit</span> <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit_count</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">exp</span> <span class="o">=</span> <span class="n">qry</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
    <span class="c1"># print(&quot;\n&quot;, exp.compile(compile_kwargs={&quot;literal_binds&quot;: True}))</span>
    <span class="k">return</span> <span class="n">exp</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.bulk_create" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bulk_create</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs a bulk create in one database session to speed up the process.</p>
<p>Allows you to create multiple objects at once.</p>
<p>A valid list of <code>Model</code> objects needs to be passed.</p>
<p>Bulk operations do not send signals.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>objects</code></td>
          <td>
                <code><span title="typing.List">List</span>[<span title="ormar.models.T">T</span>]</code>
          </td>
          <td><p>list of ormar models already initialized and ready to save.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">bulk_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs a bulk create in one database session to speed up the process.</span>

<span class="sd">    Allows you to create multiple objects at once.</span>

<span class="sd">    A valid list of `Model` objects needs to be passed.</span>

<span class="sd">    Bulk operations do not send signals.</span>

<span class="sd">    :param objects: list of ormar models already initialized and ready to save.</span>
<span class="sd">    :type objects: List[Model]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">objects</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ModelListEmptyError</span><span class="p">(</span><span class="s2">&quot;Bulk create objects are empty!&quot;</span><span class="p">)</span>

    <span class="n">ready_objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
        <span class="n">ready_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">prepare_model_to_save</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Allow context switching to prevent blocking</span>

    <span class="c1"># don&#39;t use execute_many, as in databases it&#39;s executed in a loop</span>
    <span class="c1"># instead of using execute_many from drivers</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">ready_objects</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.bulk_update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bulk_update</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs bulk update in one database session to speed up the process.</p>
<p>Allows you to update multiple instance at once.</p>
<p>All <code>Models</code> passed need to have primary key column populated.</p>
<p>You can also select which fields to update by passing <code>columns</code> list
as a list of string names.</p>
<p>Bulk operations do not send signals.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>objects</code></td>
          <td>
                <code><span title="typing.List">List</span>[<span title="ormar.models.T">T</span>]</code>
          </td>
          <td><p>list of ormar models</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>columns</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>list of columns to update</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">bulk_update</span><span class="p">(</span>  <span class="c1"># noqa:  CCR001</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs bulk update in one database session to speed up the process.</span>

<span class="sd">    Allows you to update multiple instance at once.</span>

<span class="sd">    All `Models` passed need to have primary key column populated.</span>

<span class="sd">    You can also select which fields to update by passing `columns` list</span>
<span class="sd">    as a list of string names.</span>

<span class="sd">    Bulk operations do not send signals.</span>

<span class="sd">    :param objects: list of ormar models</span>
<span class="sd">    :type objects: List[Model]</span>
<span class="sd">    :param columns: list of columns to update</span>
<span class="sd">    :type columns: List[str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">objects</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ModelListEmptyError</span><span class="p">(</span><span class="s2">&quot;Bulk update objects are empty!&quot;</span><span class="p">)</span>

    <span class="n">ready_objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pk_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_db_own_fields</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">pk_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span>

    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
        <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelPersistenceError</span><span class="p">(</span>
                <span class="s2">&quot;You cannot update unsaved objects. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> has to have </span><span class="si">{</span><span class="n">pk_name</span><span class="si">}</span><span class="s2"> filled.&quot;</span>
            <span class="p">)</span>
        <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">prepare_model_to_update</span><span class="p">(</span><span class="n">new_kwargs</span><span class="p">)</span>
        <span class="n">ready_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;new_&quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">new_kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">pk_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="n">pk_name</span><span class="p">))</span>
    <span class="n">pk_column_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span>
    <span class="n">table_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="p">]</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">pk_column</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s2">&quot;new_&quot;</span> <span class="o">+</span> <span class="n">pk_column_name</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">bindparam</span><span class="p">(</span><span class="s2">&quot;new_&quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">columns</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">pk_column_name</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">table_columns</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="c1"># databases bind params only where query is passed as string</span>
    <span class="c1"># otherwise it just passes all data to values and results in unconsumed columns</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute_many</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">ready_objects</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">set_save_status</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">)</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">post_bulk_update</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">instances</span><span class="o">=</span><span class="n">objects</span>  <span class="c1"># type: ignore</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.check_single_result_rows_count" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_single_result_rows_count</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Verifies if the result has one and only one row.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>rows</code></td>
          <td>
                <code><span title="typing.Sequence">Sequence</span>[<span title="typing.Optional">Optional</span>[<span title="ormar.models.T">T</span>]]</code>
          </td>
          <td><p>one element list of Models</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">check_single_result_rows_count</span><span class="p">(</span><span class="n">rows</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verifies if the result has one and only one row.</span>

<span class="sd">    :param rows: one element list of Models</span>
<span class="sd">    :type rows: List[Model]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span> <span class="ow">or</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NoMatch</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">MultipleMatches</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.count" class="doc doc-heading">
<code class="highlight language-python"><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns number of rows matching the given criteria
(applied with <code>filter</code> and <code>exclude</code> if set before).
If <code>distinct</code> is <code>True</code> (the default), this will return
the number of primary rows selected. If <code>False</code>,
the count will be the total number of rows returned
(including extra rows for <code>one-to-many</code> or <code>many-to-many</code>
left <code>select_related</code> table joins).
<code>False</code> is the legacy (buggy) behavior for workflows that depend on it.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>distinct</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if the primary table rows should be distinct or not</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of rows</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distinct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns number of rows matching the given criteria</span>
<span class="sd">    (applied with `filter` and `exclude` if set before).</span>
<span class="sd">    If `distinct` is `True` (the default), this will return</span>
<span class="sd">    the number of primary rows selected. If `False`,</span>
<span class="sd">    the count will be the total number of rows returned</span>
<span class="sd">    (including extra rows for `one-to-many` or `many-to-many`</span>
<span class="sd">    left `select_related` table joins).</span>
<span class="sd">    `False` is the legacy (buggy) behavior for workflows that depend on it.</span>

<span class="sd">    :param distinct: flag if the primary table rows should be distinct or not</span>

<span class="sd">    :return: number of rows</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;subquery_for_count&quot;</span><span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">distinct</span><span class="p">:</span>
        <span class="n">pk_column_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)</span>
        <span class="n">expr_distinct</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">pk_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;subquery_for_group&quot;</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">expr_distinct</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_val</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.create" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates the model instance, saves it in a database and returns the updates model
(with pk populated if not passed and autoincrement is set).</p>
<p>The allowed kwargs are <code>Model</code> fields names and proper value types.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>created model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates the model instance, saves it in a database and returns the updates model</span>
<span class="sd">    (with pk populated if not passed and autoincrement is set).</span>

<span class="sd">    The allowed kwargs are `Model` fields names and proper value types.</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: created model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.database" class="doc doc-heading">
<code class="highlight language-python"><span class="n">database</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Shortcut to models database from Meta class.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>databases.Database</code>
          </td>
          <td><p>database</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">databases</span><span class="o">.</span><span class="n">Database</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Shortcut to models database from Meta class.</span>

<span class="sd">    :return: database</span>
<span class="sd">    :rtype: databases.Database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">database</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">each</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Deletes from the model table after applying the filters from kwargs.</p>
<p>You have to either pass a filter to narrow down a query or explicitly pass
each=True flag to affect whole table.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>each</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if whole table should be affected if no filter is passed</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of deleted rows</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">each</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes from the model table after applying the filters from kwargs.</span>

<span class="sd">    You have to either pass a filter to narrow down a query or explicitly pass</span>
<span class="sd">    each=True flag to affect whole table.</span>

<span class="sd">    :param each: flag if whole table should be affected if no filter is passed</span>
<span class="sd">    :type each: bool</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: number of deleted rows</span>
<span class="sd">    :rtype:int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">each</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;You cannot delete without filtering the queryset first. &quot;</span>
            <span class="s2">&quot;If you want to delete all rows use delete(each=True)&quot;</span>
        <span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="n">expr</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.exclude" class="doc doc-heading">
<code class="highlight language-python"><span class="n">exclude</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Works exactly the same as filter and all modifiers (suffixes) are the same,
but returns a <em>not</em> condition.</p>
<p>So if you use <code>filter(name='John')</code> which is <code>where name = 'John'</code> in SQL,
the <code>exclude(name='John')</code> equals to <code>where name &lt;&gt; 'John'</code></p>
<p>Note that all conditions are joined so if you pass multiple values it
becomes a union of conditions.</p>
<p><code>exclude(name='John', age&gt;=35)</code> will become
<code>where not (name='John' and age&gt;=35)</code></p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>filtered QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">exclude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Works exactly the same as filter and all modifiers (suffixes) are the same,</span>
<span class="sd">    but returns a *not* condition.</span>

<span class="sd">    So if you use `filter(name=&#39;John&#39;)` which is `where name = &#39;John&#39;` in SQL,</span>
<span class="sd">    the `exclude(name=&#39;John&#39;)` equals to `where name &lt;&gt; &#39;John&#39;`</span>

<span class="sd">    Note that all conditions are joined so if you pass multiple values it</span>
<span class="sd">    becomes a union of conditions.</span>

<span class="sd">    `exclude(name=&#39;John&#39;, age&gt;=35)` will become</span>
<span class="sd">    `where not (name=&#39;John&#39; and age&gt;=35)`</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: filtered QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">_exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.exclude_fields" class="doc doc-heading">
<code class="highlight language-python"><span class="n">exclude_fields</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>With <code>exclude_fields()</code> you can select subset of model columns that will
be excluded to limit the data load.</p>
<p>It's the opposite of <code>fields()</code> method so check documentation above
to see what options are available.</p>
<p>Especially check above how you can pass also nested dictionaries
and sets as a mask to exclude fields from whole hierarchy.</p>
<p>Note that <code>fields()</code> and <code>exclude_fields()</code> works both for main models
(on normal queries like <code>get</code>, <code>all</code> etc.)
as well as <code>select_related</code> and <code>prefetch_related</code> models
(with nested notation).</p>
<p>Mandatory fields cannot be excluded as it will raise <code>ValidationError</code>,
to exclude a field it has to be nullable.</p>
<p>Pk column cannot be excluded - it's always auto added even
if explicitly excluded.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>columns</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <span title="typing.Set">Set</span>, <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>columns to exclude</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">exclude_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    With `exclude_fields()` you can select subset of model columns that will</span>
<span class="sd">    be excluded to limit the data load.</span>

<span class="sd">    It&#39;s the opposite of `fields()` method so check documentation above</span>
<span class="sd">    to see what options are available.</span>

<span class="sd">    Especially check above how you can pass also nested dictionaries</span>
<span class="sd">    and sets as a mask to exclude fields from whole hierarchy.</span>

<span class="sd">    Note that `fields()` and `exclude_fields()` works both for main models</span>
<span class="sd">    (on normal queries like `get`, `all` etc.)</span>
<span class="sd">    as well as `select_related` and `prefetch_related` models</span>
<span class="sd">    (with nested notation).</span>

<span class="sd">    Mandatory fields cannot be excluded as it will raise `ValidationError`,</span>
<span class="sd">    to exclude a field it has to be nullable.</span>

<span class="sd">    Pk column cannot be excluded - it&#39;s always auto added even</span>
<span class="sd">    if explicitly excluded.</span>

<span class="sd">    :param columns: columns to exclude</span>
<span class="sd">    :type columns: Union[List, str, Set, Dict]</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">_is_exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">exists</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a bool value to confirm if there are rows matching the given criteria
(applied with <code>filter</code> and <code>exclude</code> if set).</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>result of the check</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a bool value to confirm if there are rows matching the given criteria</span>
<span class="sd">    (applied with `filter` and `exclude` if set).</span>

<span class="sd">    :return: result of the check</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_val</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.fields" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fields</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">_is_exclude</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>With <code>fields()</code> you can select subset of model columns to limit the data load.</p>
<p>Note that <code>fields()</code> and <code>exclude_fields()</code> works both for main models
(on normal queries like <code>get</code>, <code>all</code> etc.)
as well as <code>select_related</code> and <code>prefetch_related</code>
models (with nested notation).</p>
<p>You can select specified fields by passing a <code>str, List[str], Set[str] or
dict</code> with nested definition.</p>
<p>To include related models use notation
<code>{related_name}__{column}[__{optional_next} etc.]</code>.</p>
<p><code>fields()</code> can be called several times, building up the columns to select.</p>
<p>If you include related models into <code>select_related()</code> call but you won't specify
columns for those models in fields - implies a list of all fields for
those nested models.</p>
<p>Mandatory fields cannot be excluded as it will raise <code>ValidationError</code>,
to exclude a field it has to be nullable.</p>
<p>Pk column cannot be excluded - it's always auto added even if
not explicitly included.</p>
<p>You can also pass fields to include as dictionary or set.</p>
<p>To mark a field as included in a dictionary use it's name as key
and ellipsis as value.</p>
<p>To traverse nested models use nested dictionaries.</p>
<p>To include fields at last level instead of nested dictionary a set can be used.</p>
<p>To include whole nested model specify model related field name and ellipsis.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>_is_exclude</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if it's exclude or include operation</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>columns</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <span title="typing.Set">Set</span>, <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>columns to include</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fields</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span> <span class="n">_is_exclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    With `fields()` you can select subset of model columns to limit the data load.</span>

<span class="sd">    Note that `fields()` and `exclude_fields()` works both for main models</span>
<span class="sd">    (on normal queries like `get`, `all` etc.)</span>
<span class="sd">    as well as `select_related` and `prefetch_related`</span>
<span class="sd">    models (with nested notation).</span>

<span class="sd">    You can select specified fields by passing a `str, List[str], Set[str] or</span>
<span class="sd">    dict` with nested definition.</span>

<span class="sd">    To include related models use notation</span>
<span class="sd">    `{related_name}__{column}[__{optional_next} etc.]`.</span>

<span class="sd">    `fields()` can be called several times, building up the columns to select.</span>

<span class="sd">    If you include related models into `select_related()` call but you won&#39;t specify</span>
<span class="sd">    columns for those models in fields - implies a list of all fields for</span>
<span class="sd">    those nested models.</span>

<span class="sd">    Mandatory fields cannot be excluded as it will raise `ValidationError`,</span>
<span class="sd">    to exclude a field it has to be nullable.</span>

<span class="sd">    Pk column cannot be excluded - it&#39;s always auto added even if</span>
<span class="sd">    not explicitly included.</span>

<span class="sd">    You can also pass fields to include as dictionary or set.</span>

<span class="sd">    To mark a field as included in a dictionary use it&#39;s name as key</span>
<span class="sd">    and ellipsis as value.</span>

<span class="sd">    To traverse nested models use nested dictionaries.</span>

<span class="sd">    To include fields at last level instead of nested dictionary a set can be used.</span>

<span class="sd">    To include whole nested model specify model related field name and ellipsis.</span>

<span class="sd">    :param _is_exclude: flag if it&#39;s exclude or include operation</span>
<span class="sd">    :type _is_exclude: bool</span>
<span class="sd">    :param columns: columns to include</span>
<span class="sd">    :type columns: Union[List, str, Set, Dict]</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">excludable</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ExcludableItems</span><span class="o">.</span><span class="n">from_excludable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">)</span>
    <span class="n">excludable</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
        <span class="n">items</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">is_exclude</span><span class="o">=</span><span class="n">_is_exclude</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">excludable</span><span class="o">=</span><span class="n">excludable</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.filter" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">_exclude</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Allows you to filter by any <code>Model</code> attribute/field
as well as to fetch instances, with a filter across an FK relationship.</p>
<p>You can use special filter suffix to change the filter operands:</p>
<ul>
<li>exact - like <code>album__name__exact='Malibu'</code> (exact match)</li>
<li>iexact - like <code>album__name__iexact='malibu'</code> (exact match case insensitive)</li>
<li>contains - like <code>album__name__contains='Mal'</code> (sql like)</li>
<li>icontains - like <code>album__name__icontains='mal'</code> (sql like case insensitive)</li>
<li>in - like <code>album__name__in=['Malibu', 'Barclay']</code> (sql in)</li>
<li>isnull - like <code>album__name__isnull=True</code> (sql is null)
   (isnotnull <code>album__name__isnull=False</code> (sql is not null))</li>
<li>gt - like <code>position__gt=3</code> (sql &gt;)</li>
<li>gte - like <code>position__gte=3</code> (sql &gt;=)</li>
<li>lt - like <code>position__lt=3</code> (sql &lt;)</li>
<li>lte - like <code>position__lte=3</code> (sql &lt;=)</li>
<li>startswith - like <code>album__name__startswith='Mal'</code> (exact start match)</li>
<li>istartswith - like <code>album__name__istartswith='mal'</code> (case insensitive)</li>
<li>endswith - like <code>album__name__endswith='ibu'</code> (exact end match)</li>
<li>iendswith - like <code>album__name__iendswith='IBU'</code> (case insensitive)</li>
</ul>
<p>Note that you can also use python style filters - check the docs!</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>_exclude</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if it should be exclude or filter</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>filtered QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span>  <span class="c1"># noqa: A003</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">_exclude</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows you to filter by any `Model` attribute/field</span>
<span class="sd">    as well as to fetch instances, with a filter across an FK relationship.</span>

<span class="sd">    You can use special filter suffix to change the filter operands:</span>

<span class="sd">    *  exact - like `album__name__exact=&#39;Malibu&#39;` (exact match)</span>
<span class="sd">    *  iexact - like `album__name__iexact=&#39;malibu&#39;` (exact match case insensitive)</span>
<span class="sd">    *  contains - like `album__name__contains=&#39;Mal&#39;` (sql like)</span>
<span class="sd">    *  icontains - like `album__name__icontains=&#39;mal&#39;` (sql like case insensitive)</span>
<span class="sd">    *  in - like `album__name__in=[&#39;Malibu&#39;, &#39;Barclay&#39;]` (sql in)</span>
<span class="sd">    *  isnull - like `album__name__isnull=True` (sql is null)</span>
<span class="sd">       (isnotnull `album__name__isnull=False` (sql is not null))</span>
<span class="sd">    *  gt - like `position__gt=3` (sql &gt;)</span>
<span class="sd">    *  gte - like `position__gte=3` (sql &gt;=)</span>
<span class="sd">    *  lt - like `position__lt=3` (sql &lt;)</span>
<span class="sd">    *  lte - like `position__lte=3` (sql &lt;=)</span>
<span class="sd">    *  startswith - like `album__name__startswith=&#39;Mal&#39;` (exact start match)</span>
<span class="sd">    *  istartswith - like `album__name__istartswith=&#39;mal&#39;` (case insensitive)</span>
<span class="sd">    *  endswith - like `album__name__endswith=&#39;ibu&#39;` (exact end match)</span>
<span class="sd">    *  iendswith - like `album__name__iendswith=&#39;IBU&#39;` (case insensitive)</span>

<span class="sd">    Note that you can also use python style filters - check the docs!</span>

<span class="sd">    :param _exclude: flag if it should be exclude or filter</span>
<span class="sd">    :type _exclude: bool</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: filtered QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filter_groups</span><span class="p">,</span> <span class="n">select_related</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_filter_groups</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="n">qryclause</span> <span class="o">=</span> <span class="n">QueryClause</span><span class="p">(</span>
        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="n">select_related</span><span class="o">=</span><span class="n">select_related</span><span class="p">,</span>
        <span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">filter_clauses</span><span class="p">,</span> <span class="n">select_related</span> <span class="o">=</span> <span class="n">qryclause</span><span class="o">.</span><span class="n">prepare_filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">filter_clauses</span> <span class="o">=</span> <span class="n">filter_clauses</span> <span class="o">+</span> <span class="n">filter_groups</span>  <span class="c1"># type: ignore</span>
    <span class="k">if</span> <span class="n">_exclude</span><span class="p">:</span>
        <span class="n">exclude_clauses</span> <span class="o">=</span> <span class="n">filter_clauses</span>
        <span class="n">filter_clauses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude_clauses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span>
        <span class="n">filter_clauses</span> <span class="o">=</span> <span class="n">filter_clauses</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span>
        <span class="n">filter_clauses</span><span class="o">=</span><span class="n">filter_clauses</span><span class="p">,</span>
        <span class="n">exclude_clauses</span><span class="o">=</span><span class="n">exclude_clauses</span><span class="p">,</span>
        <span class="n">select_related</span><span class="o">=</span><span class="n">select_related</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.first" class="doc doc-heading">
<code class="highlight language-python"><span class="n">first</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Gets the first row from the db ordered by primary key column ascending.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>returned model</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>NoMatch</code>
          </td>
          <td><p>if no rows are returned</p></td>
        </tr>
        <tr>
          <td>
                <code>MultipleMatches</code>
          </td>
          <td><p>if more than 1 row is returned.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the first row from the db ordered by primary key column ascending.</span>

<span class="sd">    :raises NoMatch: if no rows are returned</span>
<span class="sd">    :raises MultipleMatches: if more than 1 row is returned.</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: returned model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">(</span>
        <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">order_bys</span><span class="o">=</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">OrderAction</span><span class="p">(</span>
                    <span class="n">order_str</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="p">)</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">is_source_model_order</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">])</span>
            <span class="k">else</span> <span class="p">[]</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="ow">and</span> <span class="n">processed_rows</span><span class="p">:</span>
        <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related_models</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">check_single_result_rows_count</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">processed_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get's the first row from the db meeting the criteria set by kwargs.</p>
<p>If no criteria set it will return the last row in db sorted by pk.</p>
<p>Passing a criteria is actually calling filter(<em>args, </em>*kwargs) method described
below.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>returned model</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>NoMatch</code>
          </td>
          <td><p>if no rows are returned</p></td>
        </tr>
        <tr>
          <td>
                <code>MultipleMatches</code>
          </td>
          <td><p>if more than 1 row is returned.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span>
<span class="normal">989</span>
<span class="normal">990</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>  <span class="c1"># noqa: CCR001</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get&#39;s the first row from the db meeting the criteria set by kwargs.</span>

<span class="sd">    If no criteria set it will return the last row in db sorted by pk.</span>

<span class="sd">    Passing a criteria is actually calling filter(*args, **kwargs) method described</span>
<span class="sd">    below.</span>

<span class="sd">    :raises NoMatch: if no rows are returned</span>
<span class="sd">    :raises MultipleMatches: if more than 1 row is returned.</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: returned model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">:</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">(</span>
            <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">order_bys</span><span class="o">=</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">OrderAction</span><span class="p">(</span>
                        <span class="n">order_str</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">pkname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                    <span class="p">)</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">is_source_model_order</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">])</span>
                <span class="k">else</span> <span class="p">[]</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>

    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span> <span class="ow">and</span> <span class="n">processed_rows</span><span class="p">:</span>
        <span class="n">processed_rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related_models</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">check_single_result_rows_count</span><span class="p">(</span><span class="n">processed_rows</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">processed_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.get_or_create" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_or_create</span><span class="p">(</span><span class="n">_defaults</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Combination of create and get methods.</p>
<p>Tries to get a row meeting the criteria for kwargs
and if <code>NoMatch</code> exception is raised
it creates a new one with given kwargs and _defaults.</p>
<p>Passing a criteria is actually calling filter(<em>args, </em>*kwargs) method described
below.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
        <tr>
          <td><code>_defaults</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
          </td>
          <td><p>default values for creating object</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Tuple(&#34;T&#34;, bool)</code>
          </td>
          <td><p>model instance and a boolean</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_or_create</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">_defaults</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Combination of create and get methods.</span>

<span class="sd">    Tries to get a row meeting the criteria for kwargs</span>
<span class="sd">    and if `NoMatch` exception is raised</span>
<span class="sd">    it creates a new one with given kwargs and _defaults.</span>

<span class="sd">    Passing a criteria is actually calling filter(*args, **kwargs) method described</span>
<span class="sd">    below.</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :param _defaults: default values for creating object</span>
<span class="sd">    :type _defaults: Optional[Dict[str, Any]]</span>
<span class="sd">    :return: model instance and a boolean</span>
<span class="sd">    :rtype: Tuple(&quot;T&quot;, bool)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="n">NoMatch</span><span class="p">:</span>
        <span class="n">_defaults</span> <span class="o">=</span> <span class="n">_defaults</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">_defaults</span><span class="p">}),</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.get_or_none" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_or_none</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get's the first row from the db meeting the criteria set by kwargs.</p>
<p>If no criteria set it will return the last row in db sorted by pk.</p>
<p>Passing a criteria is actually calling filter(<em>args, </em>*kwargs) method described
below.</p>
<p>If not match is found None will be returned.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>returned model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_or_none</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get&#39;s the first row from the db meeting the criteria set by kwargs.</span>

<span class="sd">    If no criteria set it will return the last row in db sorted by pk.</span>

<span class="sd">    Passing a criteria is actually calling filter(*args, **kwargs) method described</span>
<span class="sd">    below.</span>

<span class="sd">    If not match is found None will be returned.</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: returned model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ormar</span><span class="o">.</span><span class="n">NoMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.iterate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">iterate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return async iterable generator for all rows from a database for given model.</p>
<p>Passing args and/or kwargs is a shortcut and equals to calling
<code>filter(*args, **kwargs).iterate()</code>.</p>
<p>If there are no rows meeting the criteria an empty async generator is returned.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>AsyncGenerator[Model]</code>
          </td>
          <td><p>asynchronous iterable generator of returned models</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span>  <span class="c1"># noqa: A003</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return async iterable generator for all rows from a database for given model.</span>

<span class="sd">    Passing args and/or kwargs is a shortcut and equals to calling</span>
<span class="sd">    `filter(*args, **kwargs).iterate()`.</span>

<span class="sd">    If there are no rows meeting the criteria an empty async generator is returned.</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: asynchronous iterable generator of returned models</span>
<span class="sd">    :rtype: AsyncGenerator[Model]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;Prefetch related queries are not supported in iterators&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">iterate</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">result</span>
        <span class="k">return</span>

    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>

    <span class="n">rows</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">last_primary_key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pk_alias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_column_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">expr</span><span class="p">):</span>
        <span class="n">current_primary_key</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">pk_alias</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">last_primary_key</span> <span class="o">==</span> <span class="n">current_primary_key</span> <span class="ow">or</span> <span class="n">last_primary_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">last_primary_key</span> <span class="o">=</span> <span class="n">current_primary_key</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">yield</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">last_primary_key</span> <span class="o">=</span> <span class="n">current_primary_key</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">rows</span><span class="p">:</span>
        <span class="k">yield</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_query_result_rows</span><span class="p">(</span><span class="n">rows</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.limit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">limit</span><span class="p">(</span><span class="n">limit_count</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>You can limit the results to desired number of parent models.</p>
<p>To limit the actual number of database query rows instead of number of main
models use the <code>limit_raw_sql</code> parameter flag, and set it to <code>True</code>.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>limit_raw_sql</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if raw sql should be limited</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>limit_count</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of models to limit</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    You can limit the results to desired number of parent models.</span>

<span class="sd">    To limit the actual number of database query rows instead of number of main</span>
<span class="sd">    models use the `limit_raw_sql` parameter flag, and set it to `True`.</span>

<span class="sd">    :param limit_raw_sql: flag if raw sql should be limited</span>
<span class="sd">    :type limit_raw_sql: bool</span>
<span class="sd">    :param limit_count: number of models to limit</span>
<span class="sd">    :type limit_count: int</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">limit_raw_sql</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span> <span class="k">if</span> <span class="n">limit_raw_sql</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">limit_raw_sql</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">limit_count</span><span class="o">=</span><span class="n">limit_count</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="n">limit_raw_sql</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.max" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">max</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns max value of columns for rows matching the given criteria
(applied with <code>filter</code> and <code>exclude</code> if set before).</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Any</code>
          </td>
          <td><p>max value of column(s)</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns max value of columns for rows matching the given criteria</span>
<span class="sd">    (applied with `filter` and `exclude` if set before).</span>

<span class="sd">    :return: max value of column(s)</span>
<span class="sd">    :rtype: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.min" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">min</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns min value of columns for rows matching the given criteria
(applied with <code>filter</code> and <code>exclude</code> if set before).</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Any</code>
          </td>
          <td><p>min value of column(s)</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns min value of columns for rows matching the given criteria</span>
<span class="sd">    (applied with `filter` and `exclude` if set before).</span>

<span class="sd">    :return: min value of column(s)</span>
<span class="sd">    :rtype: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Shortcut to model class set on QuerySet.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Type[Model]</code>
          </td>
          <td><p>model class</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Shortcut to model class set on QuerySet.</span>

<span class="sd">    :return: model class</span>
<span class="sd">    :rtype: Type[Model]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Model class of QuerySet is not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.model_meta" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_meta</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Shortcut to model class Meta set on QuerySet model.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>model Meta class</code>
          </td>
          <td><p>Meta class of the model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">model_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ModelMeta&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Shortcut to model class Meta set on QuerySet model.</span>

<span class="sd">    :return: Meta class of the model</span>
<span class="sd">    :rtype: model Meta class</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">:</span>  <span class="c1"># pragma nocover</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Model class of QuerySet is not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="o">.</span><span class="n">Meta</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.offset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">offset</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>You can also offset the results by desired number of main models.</p>
<p>To offset the actual number of database query rows instead of number of main
models use the <code>limit_raw_sql</code> parameter flag, and set it to <code>True</code>.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>limit_raw_sql</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if raw sql should be offset</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>offset</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>numbers of models to offset</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    You can also offset the results by desired number of main models.</span>

<span class="sd">    To offset the actual number of database query rows instead of number of main</span>
<span class="sd">    models use the `limit_raw_sql` parameter flag, and set it to `True`.</span>

<span class="sd">    :param limit_raw_sql: flag if raw sql should be offset</span>
<span class="sd">    :type limit_raw_sql: bool</span>
<span class="sd">    :param offset: numbers of models to offset</span>
<span class="sd">    :type offset: int</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">limit_raw_sql</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit_sql_raw</span> <span class="k">if</span> <span class="n">limit_raw_sql</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">limit_raw_sql</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="n">limit_raw_sql</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.order_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">order_by</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>With <code>order_by()</code> you can order the results from database based on your
choice of fields.</p>
<p>You can provide a string with field name or list of strings with fields names.</p>
<p>Ordering in sql will be applied in order of names you provide in order_by.</p>
<p>By default if you do not provide ordering <code>ormar</code> explicitly orders by
all primary keys</p>
<p>If you are sorting by nested models that causes that the result rows are
unsorted by the main model <code>ormar</code> will combine those children rows into
one main model.</p>
<p>The main model will never duplicate in the result</p>
<p>To order by main model field just provide a field name</p>
<p>To sort on nested models separate field names with dunder '__'.</p>
<p>You can sort this way across all relation types -&gt; <code>ForeignKey</code>,
reverse virtual FK and <code>ManyToMany</code> fields.</p>
<p>To sort in descending order provide a hyphen in front of the field name</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>columns</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <a class="autorefs autorefs-internal" title="ormar.queryset.actions.order_action.OrderAction" href="queryset/actions/order_action/#ormar.queryset.actions.order_action.OrderAction">OrderAction</a>]</code>
          </td>
          <td><p>columns by which models should be sorted</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">OrderAction</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    With `order_by()` you can order the results from database based on your</span>
<span class="sd">    choice of fields.</span>

<span class="sd">    You can provide a string with field name or list of strings with fields names.</span>

<span class="sd">    Ordering in sql will be applied in order of names you provide in order_by.</span>

<span class="sd">    By default if you do not provide ordering `ormar` explicitly orders by</span>
<span class="sd">    all primary keys</span>

<span class="sd">    If you are sorting by nested models that causes that the result rows are</span>
<span class="sd">    unsorted by the main model `ormar` will combine those children rows into</span>
<span class="sd">    one main model.</span>

<span class="sd">    The main model will never duplicate in the result</span>

<span class="sd">    To order by main model field just provide a field name</span>

<span class="sd">    To sort on nested models separate field names with dunder &#39;__&#39;.</span>

<span class="sd">    You can sort this way across all relation types -&gt; `ForeignKey`,</span>
<span class="sd">    reverse virtual FK and `ManyToMany` fields.</span>

<span class="sd">    To sort in descending order provide a hyphen in front of the field name</span>

<span class="sd">    :param columns: columns by which models should be sorted</span>
<span class="sd">    :type columns: Union[List, str]</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>

    <span class="n">orders_by</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">OrderAction</span><span class="p">(</span><span class="n">order_str</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">OrderAction</span><span class="p">)</span>
        <span class="k">else</span> <span class="n">x</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">columns</span>
    <span class="p">]</span>

    <span class="n">order_bys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">orders_by</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_bys</span><span class="p">]</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">order_bys</span><span class="o">=</span><span class="n">order_bys</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.paginate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">paginate</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">page_size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>You can paginate the result which is a combination of offset and limit clauses.
Limit is set to page size and offset is set to (page-1) * page_size.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>page_size</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>numbers of items per page</p></td>
          <td>
                <code>20</code>
          </td>
        </tr>
        <tr>
          <td><code>page</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>page number</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">paginate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    You can paginate the result which is a combination of offset and limit clauses.</span>
<span class="sd">    Limit is set to page size and offset is set to (page-1) * page_size.</span>

<span class="sd">    :param page_size: numbers of items per page</span>
<span class="sd">    :type page_size: int</span>
<span class="sd">    :param page: page number</span>
<span class="sd">    :type page: int</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">page_size</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span><span class="s2">&quot;Page size and page have to be greater than 0.&quot;</span><span class="p">)</span>

    <span class="n">limit_count</span> <span class="o">=</span> <span class="n">page_size</span>
    <span class="n">query_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">page_size</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">limit_count</span><span class="o">=</span><span class="n">limit_count</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">query_offset</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.prefetch_related" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prefetch_related</span><span class="p">(</span><span class="n">related</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Allows to prefetch related models during query - but opposite to
<code>select_related</code> each subsequent model is fetched in a separate database query.</p>
<p><strong>With <code>prefetch_related</code> always one query per Model is run against the
database</strong>, meaning that you will have multiple queries executed one
after another.</p>
<p>To fetch related model use <code>ForeignKey</code> names.</p>
<p>To chain related <code>Models</code> relation use double underscores between names.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>related</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <a class="autorefs autorefs-internal" title="ormar.queryset.FieldAccessor" href="queryset/#ormar.queryset.FieldAccessor">FieldAccessor</a>]</code>
          </td>
          <td><p>list of relation field names, can be linked by '__' to nest</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">prefetch_related</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">related</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows to prefetch related models during query - but opposite to</span>
<span class="sd">    `select_related` each subsequent model is fetched in a separate database query.</span>

<span class="sd">    **With `prefetch_related` always one query per Model is run against the</span>
<span class="sd">    database**, meaning that you will have multiple queries executed one</span>
<span class="sd">    after another.</span>

<span class="sd">    To fetch related model use `ForeignKey` names.</span>

<span class="sd">    To chain related `Models` relation use double underscores between names.</span>

<span class="sd">    :param related: list of relation field names, can be linked by &#39;__&#39; to nest</span>
<span class="sd">    :type related: Union[List, str]</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">related</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">related</span> <span class="o">=</span> <span class="p">[</span><span class="n">related</span><span class="p">]</span>
    <span class="n">related</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">rel</span><span class="o">.</span><span class="n">_access_chain</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rel</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">)</span> <span class="k">else</span> <span class="n">rel</span>
        <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">related</span>
    <span class="p">]</span>

    <span class="n">related</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_prefetch_related</span><span class="p">)</span> <span class="o">+</span> <span class="n">related</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">prefetch_related</span><span class="o">=</span><span class="n">related</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.rebuild_self" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rebuild_self</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude_clauses</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select_related</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit_count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">excludable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">order_bys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefetch_related</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit_raw_sql</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxy_source_model</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method that returns new instance of queryset based on passed params,
all not passed params are taken from current values.</p>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rebuild_self</span><span class="p">(</span>  <span class="c1"># noqa: CFQ002</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filter_clauses</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exclude_clauses</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">select_related</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">limit_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">excludable</span><span class="p">:</span> <span class="s2">&quot;ExcludableItems&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">order_bys</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">prefetch_related</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">limit_raw_sql</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">proxy_source_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method that returns new instance of queryset based on passed params,</span>
<span class="sd">    all not passed params are taken from current values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">overwrites</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;select_related&quot;</span><span class="p">:</span> <span class="s2">&quot;_select_related&quot;</span><span class="p">,</span>
        <span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="s2">&quot;query_offset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;excludable&quot;</span><span class="p">:</span> <span class="s2">&quot;_excludable&quot;</span><span class="p">,</span>
        <span class="s2">&quot;prefetch_related&quot;</span><span class="p">:</span> <span class="s2">&quot;_prefetch_related&quot;</span><span class="p">,</span>
        <span class="s2">&quot;limit_raw_sql&quot;</span><span class="p">:</span> <span class="s2">&quot;limit_sql_raw&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">passed_args</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">replace_if_none</span><span class="p">(</span><span class="n">arg_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">passed_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overwrites</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg_name</span><span class="p">,</span> <span class="n">arg_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">passed_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg_name</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>
        <span class="n">filter_clauses</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;filter_clauses&quot;</span><span class="p">),</span>
        <span class="n">exclude_clauses</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;exclude_clauses&quot;</span><span class="p">),</span>
        <span class="n">select_related</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;select_related&quot;</span><span class="p">),</span>
        <span class="n">limit_count</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;limit_count&quot;</span><span class="p">),</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">),</span>
        <span class="n">excludable</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;excludable&quot;</span><span class="p">),</span>
        <span class="n">order_bys</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;order_bys&quot;</span><span class="p">),</span>
        <span class="n">prefetch_related</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;prefetch_related&quot;</span><span class="p">),</span>
        <span class="n">limit_raw_sql</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;limit_raw_sql&quot;</span><span class="p">),</span>
        <span class="n">proxy_source_model</span><span class="o">=</span><span class="n">replace_if_none</span><span class="p">(</span><span class="s2">&quot;proxy_source_model&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.select_all" class="doc doc-heading">
<code class="highlight language-python"><span class="n">select_all</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>By default adds only directly related models.</p>
<p>If follow=True is set it adds also related models of related models.</p>
<p>To not get stuck in an infinite loop as related models also keep a relation
to parent model visited models set is kept.</p>
<p>That way already visited models that are nested are loaded, but the load do not
follow them inside. So Model A -&gt; Model B -&gt; Model C -&gt; Model A -&gt; Model X
will load second Model A but will never follow into Model X.
Nested relations of those kind need to be loaded manually.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>follow</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag to trigger deep save - by default only directly related models are saved with follow=True also related models of related models are saved</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>reloaded Model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">select_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    By default adds only directly related models.</span>

<span class="sd">    If follow=True is set it adds also related models of related models.</span>

<span class="sd">    To not get stuck in an infinite loop as related models also keep a relation</span>
<span class="sd">    to parent model visited models set is kept.</span>

<span class="sd">    That way already visited models that are nested are loaded, but the load do not</span>
<span class="sd">    follow them inside. So Model A -&gt; Model B -&gt; Model C -&gt; Model A -&gt; Model X</span>
<span class="sd">    will load second Model A but will never follow into Model X.</span>
<span class="sd">    Nested relations of those kind need to be loaded manually.</span>

<span class="sd">    :param follow: flag to trigger deep save -</span>
<span class="sd">    by default only directly related models are saved</span>
<span class="sd">    with follow=True also related models of related models are saved</span>
<span class="sd">    :type follow: bool</span>
<span class="sd">    :return: reloaded Model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">relations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">follow</span><span class="p">:</span>
        <span class="n">relations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_iterate_related_models</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">select_related</span><span class="o">=</span><span class="n">relations</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.select_related" class="doc doc-heading">
<code class="highlight language-python"><span class="n">select_related</span><span class="p">(</span><span class="n">related</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Allows to prefetch related models during the same query.</p>
<p><strong>With <code>select_related</code> always only one query is run against the database</strong>,
meaning that one (sometimes complicated) join is generated and later nested
models are processed in python.</p>
<p>To fetch related model use <code>ForeignKey</code> names.</p>
<p>To chain related <code>Models</code> relation use double underscores between names.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>related</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <a class="autorefs autorefs-internal" title="ormar.queryset.FieldAccessor" href="queryset/#ormar.queryset.FieldAccessor">FieldAccessor</a>]</code>
          </td>
          <td><p>list of relation field names, can be linked by '__' to nest</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>QuerySet</code>
          </td>
          <td><p>QuerySet</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">select_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">related</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuerySet[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows to prefetch related models during the same query.</span>

<span class="sd">    **With `select_related` always only one query is run against the database**,</span>
<span class="sd">    meaning that one (sometimes complicated) join is generated and later nested</span>
<span class="sd">    models are processed in python.</span>

<span class="sd">    To fetch related model use `ForeignKey` names.</span>

<span class="sd">    To chain related `Models` relation use double underscores between names.</span>

<span class="sd">    :param related: list of relation field names, can be linked by &#39;__&#39; to nest</span>
<span class="sd">    :type related: Union[List, str]</span>
<span class="sd">    :return: QuerySet</span>
<span class="sd">    :rtype: QuerySet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">related</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">related</span> <span class="o">=</span> <span class="p">[</span><span class="n">related</span><span class="p">]</span>
    <span class="n">related</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">rel</span><span class="o">.</span><span class="n">_access_chain</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rel</span><span class="p">,</span> <span class="n">FieldAccessor</span><span class="p">)</span> <span class="k">else</span> <span class="n">rel</span>
        <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">related</span>
    <span class="p">]</span>

    <span class="n">related</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">)</span> <span class="o">+</span> <span class="n">related</span><span class="p">)))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rebuild_self</span><span class="p">(</span><span class="n">select_related</span><span class="o">=</span><span class="n">related</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.sum" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">sum</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns sum value of columns for rows matching the given criteria
(applied with <code>filter</code> and <code>exclude</code> if set before).</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>sum value of columns</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>  <span class="c1"># noqa: A003</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns sum value of columns for rows matching the given criteria</span>
<span class="sd">    (applied with `filter` and `exclude` if set before).</span>

<span class="sd">    :return: sum value of columns</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_aggr_function</span><span class="p">(</span><span class="n">func_name</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">table</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Shortcut to models table from Meta class.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy.Table</code>
          </td>
          <td><p>database table</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Table</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Shortcut to models table from Meta class.</span>

<span class="sd">    :return: database table</span>
<span class="sd">    :rtype: sqlalchemy.Table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">table</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">each</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Updates the model table after applying the filters from kwargs.</p>
<p>You have to either pass a filter to narrow down a query or explicitly pass
each=True flag to affect whole table.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>each</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if whole table should be affected if no filter is passed</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of updated rows</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">each</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the model table after applying the filters from kwargs.</span>

<span class="sd">    You have to either pass a filter to narrow down a query or explicitly pass</span>
<span class="sd">    each=True flag to affect whole table.</span>

<span class="sd">    :param each: flag if whole table should be affected if no filter is passed</span>
<span class="sd">    :type each: bool</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: number of updated rows</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">each</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;You cannot update without filtering the queryset first. &quot;</span>
            <span class="s2">&quot;If you want to update all rows use update(each=True, **kwargs)&quot;</span>
        <span class="p">)</span>

    <span class="n">self_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_db_own_fields</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">extract_related_names</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">updates</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">self_fields</span><span class="p">}</span>
    <span class="n">updates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">validate_choices</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span>
    <span class="n">updates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">translate_columns_to_aliases</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span>

    <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_clauses</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">updates</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">FilterQuery</span><span class="p">(</span><span class="n">filter_clauses</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exclude_clauses</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="n">expr</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.update_or_create" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_or_create</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Updates the model, or in case there is no match in database creates a new one.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Model</code>
          </td>
          <td><p>updated or created model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update_or_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the model, or in case there is no match in database creates a new one.</span>

<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: updated or created model</span>
<span class="sd">    :rtype: Model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pk_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_meta</span><span class="o">.</span><span class="n">pkname</span>
    <span class="k">if</span> <span class="s2">&quot;pk&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="n">pk_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pk&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pk_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="n">pk_name</span><span class="p">])</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">model</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude_through</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_as_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_flatten</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of dictionaries with column values in order of the fields
passed or all fields from queried models.</p>
<p>To filter for given row use filter/exclude methods before values,
to limit number of rows use limit/offset or paginate before values.</p>
<p>Note that it always return a list even for one row from database.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>exclude_through</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if through models should be excluded</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>_flatten</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>internal parameter to flatten one element tuples</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>_as_dict</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>internal parameter if return dict or tuples</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>fields</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <span title="typing.Set">Set</span>, <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>field name or list of field names to extract from db</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">values</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">fields</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exclude_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_as_dict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of dictionaries with column values in order of the fields</span>
<span class="sd">    passed or all fields from queried models.</span>

<span class="sd">    To filter for given row use filter/exclude methods before values,</span>
<span class="sd">    to limit number of rows use limit/offset or paginate before values.</span>

<span class="sd">    Note that it always return a list even for one row from database.</span>

<span class="sd">    :param exclude_through: flag if through models should be excluded</span>
<span class="sd">    :type exclude_through: bool</span>
<span class="sd">    :param _flatten: internal parameter to flatten one element tuples</span>
<span class="sd">    :type _flatten: bool</span>
<span class="sd">    :param _as_dict: internal parameter if return dict or tuples</span>
<span class="sd">    :type _as_dict: bool</span>
<span class="sd">    :param fields: field name or list of field names to extract from db</span>
<span class="sd">    :type fields:  Union[List, str, Set, Dict]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">fields</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
            <span class="n">_as_dict</span><span class="o">=</span><span class="n">_as_dict</span><span class="p">,</span> <span class="n">_flatten</span><span class="o">=</span><span class="n">_flatten</span><span class="p">,</span> <span class="n">exclude_through</span><span class="o">=</span><span class="n">exclude_through</span>
        <span class="p">)</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_select_expression</span><span class="p">()</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="n">alias_resolver</span> <span class="o">=</span> <span class="n">ReverseAliasResolver</span><span class="p">(</span>
        <span class="n">select_related</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_related</span><span class="p">,</span>
        <span class="n">excludable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="p">,</span>
        <span class="n">model_cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">exclude_through</span><span class="o">=</span><span class="n">exclude_through</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">column_map</span> <span class="o">=</span> <span class="n">alias_resolver</span><span class="o">.</span><span class="n">resolve_columns</span><span class="p">(</span>
        <span class="n">columns_names</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">LegacyRow</span><span class="p">,</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="n">column_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">column_map</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rows</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">_as_dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">if</span> <span class="n">_flatten</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excludable</span><span class="o">.</span><span class="n">include_entry_count</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">QueryDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;You cannot flatten values_list if more than one field is selected!&quot;</span>
        <span class="p">)</span>
    <span class="n">tuple_result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">tuple_result</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">_flatten</span> <span class="k">else</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tuple_result</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.queryset.queryset.QuerySet.values_list" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values_list</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flatten</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exclude_through</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of tuples with column values in order of the fields passed or
all fields from queried models.</p>
<p>When one field is passed you can flatten the list of tuples into list of values
of that single field.</p>
<p>To filter for given row use filter/exclude methods before values,
to limit number of rows use limit/offset or paginate before values.</p>
<p>Note that it always return a list even for one row from database.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>exclude_through</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if through models should be excluded</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>fields</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>, str, <span title="typing.Set">Set</span>, <span title="typing.Dict">Dict</span>]</code>
          </td>
          <td><p>field name or list of field names to extract from db</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>flatten</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>when one field is passed you can flatten the list of tuples</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/queryset.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">values_list</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">fields</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">exclude_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of tuples with column values in order of the fields passed or</span>
<span class="sd">    all fields from queried models.</span>

<span class="sd">    When one field is passed you can flatten the list of tuples into list of values</span>
<span class="sd">    of that single field.</span>

<span class="sd">    To filter for given row use filter/exclude methods before values,</span>
<span class="sd">    to limit number of rows use limit/offset or paginate before values.</span>

<span class="sd">    Note that it always return a list even for one row from database.</span>

<span class="sd">    :param exclude_through: flag if through models should be excluded</span>
<span class="sd">    :type exclude_through: bool</span>
<span class="sd">    :param fields: field name or list of field names to extract from db</span>
<span class="sd">    :type fields: Union[str, List[str]]</span>
<span class="sd">    :param flatten: when one field is passed you can flatten the list of tuples</span>
<span class="sd">    :type flatten: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
        <span class="n">exclude_through</span><span class="o">=</span><span class="n">exclude_through</span><span class="p">,</span>
        <span class="n">_as_dict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">_flatten</span><span class="o">=</span><span class="n">flatten</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.ReferentialAction" class="doc doc-heading">
        <code>ReferentialAction</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="enum.Enum">Enum</span></code></p>

  
      <p>Because the database management system(DBMS) enforces referential constraints,
it must ensure data integrity
if rows in a referenced table are to be deleted (or updated).</p>
<p>If dependent rows in referencing tables still exist,
those references have to be considered.</p>
<p>SQL specifies 5 different referential actions
that shall take place in such occurrences.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/referential_actions.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ReferentialAction</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Because the database management system(DBMS) enforces referential constraints,</span>
<span class="sd">    it must ensure data integrity</span>
<span class="sd">    if rows in a referenced table are to be deleted (or updated).</span>

<span class="sd">    If dependent rows in referencing tables still exist,</span>
<span class="sd">    those references have to be considered.</span>

<span class="sd">    SQL specifies 5 different referential actions</span>
<span class="sd">    that shall take place in such occurrences.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CASCADE</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CASCADE&quot;</span>
    <span class="n">RESTRICT</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;RESTRICT&quot;</span>
    <span class="n">SET_NULL</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;SET NULL&quot;</span>
    <span class="n">SET_DEFAULT</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;SET DEFAULT&quot;</span>
    <span class="n">DO_NOTHING</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;NO ACTION&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.RelationType" class="doc doc-heading">
        <code>RelationType</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="enum.Enum">Enum</span></code></p>

  
      <p>Different types of relations supported by ormar:</p>
<ul>
<li>ForeignKey = PRIMARY</li>
<li>reverse ForeignKey = REVERSE</li>
<li>ManyToMany = MULTIPLE</li>
</ul>


        <details class="quote">
          <summary>Source code in <code>ormar/relations/relation.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RelationType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Different types of relations supported by ormar:</span>

<span class="sd">    *  ForeignKey = PRIMARY</span>
<span class="sd">    *  reverse ForeignKey = REVERSE</span>
<span class="sd">    *  ManyToMany = MULTIPLE</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PRIMARY</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">REVERSE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">MULTIPLE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">THROUGH</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Signal" class="doc doc-heading">
        <code>Signal</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Signal that notifies all receiver functions.
In ormar used by models to send pre_save, post_save etc. signals.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/signals/signal.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Signal</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Signal that notifies all receiver functions.</span>
<span class="sd">    In ormar used by models to send pre_save, post_save etc. signals.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receiver</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connects given receiver function to the signal.</span>

<span class="sd">        :raises SignalDefinitionError: if receiver is not callable</span>
<span class="sd">        or not accept **kwargs</span>
<span class="sd">        :param receiver: receiver function</span>
<span class="sd">        :type receiver: Callable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">receiver</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SignalDefinitionError</span><span class="p">(</span><span class="s2">&quot;Signal receivers must be callable.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable_accepts_kwargs</span><span class="p">(</span><span class="n">receiver</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SignalDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;Signal receivers must accept **kwargs argument.&quot;</span>
            <span class="p">)</span>
        <span class="n">new_receiver_key</span> <span class="o">=</span> <span class="n">make_id</span><span class="p">(</span><span class="n">receiver</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_receiver_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="p">[</span><span class="n">new_receiver_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">receiver</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receiver</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes the receiver function from the signal.</span>

<span class="sd">        :param receiver: receiver function</span>
<span class="sd">        :type receiver: Callable</span>
<span class="sd">        :return: flag if receiver was removed</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_receiver_key</span> <span class="o">=</span> <span class="n">make_id</span><span class="p">(</span><span class="n">receiver</span><span class="p">)</span>
        <span class="n">receiver_func</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="n">new_receiver_key</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">receiver_func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Notifies all receiver functions with given kwargs</span>
<span class="sd">        :param sender: model that sends the signal</span>
<span class="sd">        :type sender: Type[&quot;Model&quot;]</span>
<span class="sd">        :param kwargs: arguments passed to receivers</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">receivers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">receiver_func</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">receiver_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">receivers</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.signals.signal.Signal.connect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connect</span><span class="p">(</span><span class="n">receiver</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Connects given receiver function to the signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>receiver</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td><p>receiver function</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>SignalDefinitionError</code>
          </td>
          <td><p>if receiver is not callable or not accept **kwargs</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/signals/signal.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receiver</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connects given receiver function to the signal.</span>

<span class="sd">    :raises SignalDefinitionError: if receiver is not callable</span>
<span class="sd">    or not accept **kwargs</span>
<span class="sd">    :param receiver: receiver function</span>
<span class="sd">    :type receiver: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">receiver</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SignalDefinitionError</span><span class="p">(</span><span class="s2">&quot;Signal receivers must be callable.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">callable_accepts_kwargs</span><span class="p">(</span><span class="n">receiver</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SignalDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;Signal receivers must accept **kwargs argument.&quot;</span>
        <span class="p">)</span>
    <span class="n">new_receiver_key</span> <span class="o">=</span> <span class="n">make_id</span><span class="p">(</span><span class="n">receiver</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">new_receiver_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="p">[</span><span class="n">new_receiver_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">receiver</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.signals.signal.Signal.disconnect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disconnect</span><span class="p">(</span><span class="n">receiver</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Removes the receiver function from the signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>receiver</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td><p>receiver function</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>flag if receiver was removed</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/signals/signal.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receiver</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes the receiver function from the signal.</span>

<span class="sd">    :param receiver: receiver function</span>
<span class="sd">    :type receiver: Callable</span>
<span class="sd">    :return: flag if receiver was removed</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_receiver_key</span> <span class="o">=</span> <span class="n">make_id</span><span class="p">(</span><span class="n">receiver</span><span class="p">)</span>
    <span class="n">receiver_func</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
        <span class="n">new_receiver_key</span><span class="p">,</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">receiver_func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.signals.signal.Signal.send" class="doc doc-heading">
<code class="highlight language-python"><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Notifies all receiver functions with given kwargs</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>sender</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]</code>
          </td>
          <td><p>model that sends the signal</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>arguments passed to receivers</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/signals/signal.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Notifies all receiver functions with given kwargs</span>
<span class="sd">    :param sender: model that sends the signal</span>
<span class="sd">    :type sender: Type[&quot;Model&quot;]</span>
<span class="sd">    :param kwargs: arguments passed to receivers</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">receivers</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">receiver_func</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">receiver_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receivers</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="p">]</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">receivers</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.SmallInteger" class="doc doc-heading">
        <code>SmallInteger</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.Integer" href="fields/model_fields/#ormar.fields.model_fields.Integer">Integer</a></code>, <code>int</code></p>

  
      <p>SmallInteger field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SmallInteger</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SmallInteger field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">int</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minimum</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maximum</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multiple_of</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>
        <span class="n">autoincrement</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;autoincrement&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">autoincrement</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">autoincrement</span>
            <span class="k">if</span> <span class="n">autoincrement</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ge&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;minimum&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;le&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;maximum&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">SmallInteger</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.SmallInteger.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">SmallInteger</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.String" class="doc doc-heading">
        <code>String</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>str</code></p>

  
      <p>String field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">String</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    String field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">str</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">min_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to validate if all required parameters on a given field type are set.</span>
<span class="sd">        :param kwargs: all params passed during construction</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
                <span class="s2">&quot;Parameter max_length is required for field String&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.String.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.String.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Used to validate if all required parameters on a given field type are set.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>all params passed during construction</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to validate if all required parameters on a given field type are set.</span>
<span class="sd">    :param kwargs: all params passed during construction</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">max_length</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">max_length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ModelDefinitionError</span><span class="p">(</span>
            <span class="s2">&quot;Parameter max_length is required for field String&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Text" class="doc doc-heading">
        <code>Text</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>str</code></p>

  
      <p>Text field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Text</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Text field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="nb">str</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Text.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.Time" class="doc doc-heading">
        <code>Time</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>datetime.<span title="datetime.time">time</span></code></p>

  
      <p>Time field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Time</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Time field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;time&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timezone</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timezone&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.Time.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timezone&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.UUID" class="doc doc-heading">
        <code>UUID</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ormar.fields.model_fields.ModelFieldFactory" href="fields/model_fields/#ormar.fields.model_fields.ModelFieldFactory">ModelFieldFactory</a></code>, <code>uuid.<span title="uuid.UUID">UUID</span></code></p>

  
      <p>UUID field factory that construct Field classes and populated their values.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UUID</span><span class="p">(</span><span class="n">ModelFieldFactory</span><span class="p">,</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    UUID field factory that construct Field classes and populated their values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_type</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span>
    <span class="n">_sample</span> <span class="o">=</span> <span class="s2">&quot;uuid&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">uuid_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;hex&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseField</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;__class__&quot;</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return proper type of db column for given field type.</span>
<span class="sd">        Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">        :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">        :type kwargs: Any</span>
<span class="sd">        :return: initialized column with proper options</span>
<span class="sd">        :rtype: sqlalchemy Column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uuid_format</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uuid_format&quot;</span><span class="p">,</span> <span class="s2">&quot;hex&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sqlalchemy_uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">uuid_format</span><span class="o">=</span><span class="n">uuid_format</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="ormar.fields.model_fields.UUID.get_column_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_column_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return proper type of db column for given field type.
Accepts required and optional parameters that each column type accepts.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>key, value pairs of sqlalchemy options</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>sqlalchemy Column</code>
          </td>
          <td><p>initialized column with proper options</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/model_fields.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_column_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return proper type of db column for given field type.</span>
<span class="sd">    Accepts required and optional parameters that each column type accepts.</span>

<span class="sd">    :param kwargs: key, value pairs of sqlalchemy options</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: initialized column with proper options</span>
<span class="sd">    :rtype: sqlalchemy Column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uuid_format</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uuid_format&quot;</span><span class="p">,</span> <span class="s2">&quot;hex&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sqlalchemy_uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">uuid_format</span><span class="o">=</span><span class="n">uuid_format</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ormar.UniqueColumns" class="doc doc-heading">
        <code>UniqueColumns</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="sqlalchemy.UniqueConstraint">UniqueConstraint</span></code></p>

  
      <p>Subclass of sqlalchemy.UniqueConstraint.
Used to avoid importing anything from sqlalchemy by user.</p>


        <details class="quote">
          <summary>Source code in <code>ormar/fields/constraints.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UniqueColumns</span><span class="p">(</span><span class="n">UniqueConstraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Subclass of sqlalchemy.UniqueConstraint.</span>
<span class="sd">    Used to avoid importing anything from sqlalchemy by user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="ormar.ForeignKey" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">virtual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Despite a name it's a function that returns constructed ForeignKeyField.
This function is actually used in model declaration (as ormar.ForeignKey(ToModel)).</p>
<p>Accepts number of relation setting parameters as well as all BaseField ones.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>to</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<span title="ormar.models.T">T</span>], <span title="pydantic.typing.ForwardRef">ForwardRef</span>]</code>
          </td>
          <td><p>target related ormar Model</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the database field - later called alias</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>unique</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>parameter passed to sqlalchemy.ForeignKey, unique flag</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>nullable</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>marks field as optional/ required</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>related_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of reversed FK relation populated for you on to model</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>virtual</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>marks if relation is virtual. It is for reversed FK and auto generated FK on through model in Many2Many relations.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>onupdate</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="ormar.fields.referential_actions.ReferentialAction" href="fields/referential_actions/#ormar.fields.referential_actions.ReferentialAction">ReferentialAction</a>, str]</code>
          </td>
          <td><p>parameter passed to sqlalchemy.ForeignKey. How to treat child rows on update of parent (the one where FK is defined) model.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>ondelete</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="ormar.fields.referential_actions.ReferentialAction" href="fields/referential_actions/#ormar.fields.referential_actions.ReferentialAction">ReferentialAction</a>, str]</code>
          </td>
          <td><p>parameter passed to sqlalchemy.ForeignKey. How to treat child rows on delete of parent (the one where FK is defined) model.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>all other args to be populated by BaseField</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ForeignKeyField</code>
          </td>
          <td><p>ormar ForeignKeyField with relation to selected model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/foreign_key.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ForeignKey</span><span class="p">(</span>  <span class="c1"># type: ignore # noqa CFQ002</span>
    <span class="n">to</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">],</span> <span class="s2">&quot;ForwardRef&quot;</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">nullable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">related_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">virtual</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">onupdate</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ReferentialAction</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ondelete</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ReferentialAction</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Despite a name it&#39;s a function that returns constructed ForeignKeyField.</span>
<span class="sd">    This function is actually used in model declaration (as ormar.ForeignKey(ToModel)).</span>

<span class="sd">    Accepts number of relation setting parameters as well as all BaseField ones.</span>

<span class="sd">    :param to: target related ormar Model</span>
<span class="sd">    :type to: Model class</span>
<span class="sd">    :param name: name of the database field - later called alias</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param unique: parameter passed to sqlalchemy.ForeignKey, unique flag</span>
<span class="sd">    :type unique: bool</span>
<span class="sd">    :param nullable: marks field as optional/ required</span>
<span class="sd">    :type nullable: bool</span>
<span class="sd">    :param related_name: name of reversed FK relation populated for you on to model</span>
<span class="sd">    :type related_name: str</span>
<span class="sd">    :param virtual: marks if relation is virtual.</span>
<span class="sd">    It is for reversed FK and auto generated FK on through model in Many2Many relations.</span>
<span class="sd">    :type virtual: bool</span>
<span class="sd">    :param onupdate: parameter passed to sqlalchemy.ForeignKey.</span>
<span class="sd">    How to treat child rows on update of parent (the one where FK is defined) model.</span>
<span class="sd">    :type onupdate: Union[ReferentialAction, str]</span>
<span class="sd">    :param ondelete: parameter passed to sqlalchemy.ForeignKey.</span>
<span class="sd">    How to treat child rows on delete of parent (the one where FK is defined) model.</span>
<span class="sd">    :type ondelete: Union[ReferentialAction, str]</span>
<span class="sd">    :param kwargs: all other args to be populated by BaseField</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: ormar ForeignKeyField with relation to selected model</span>
<span class="sd">    :rtype: ForeignKeyField</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">onupdate</span> <span class="o">=</span> <span class="n">validate_referential_action</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="n">onupdate</span><span class="p">)</span>
    <span class="n">ondelete</span> <span class="o">=</span> <span class="n">validate_referential_action</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="n">ondelete</span><span class="p">)</span>

    <span class="n">owner</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">self_reference</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;self_reference&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">orders_by</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;orders_by&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">related_orders_by</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;related_orders_by&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="n">skip_reverse</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;skip_reverse&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">skip_field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;skip_field&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">sql_nullable</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;sql_nullable&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">sql_nullable</span> <span class="o">=</span> <span class="n">nullable</span> <span class="k">if</span> <span class="n">sql_nullable</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">sql_nullable</span>

    <span class="n">validate_not_allowed_fields</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
        <span class="n">__type__</span> <span class="o">=</span> <span class="n">to</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">nullable</span> <span class="k">else</span> <span class="n">Optional</span><span class="p">[</span><span class="n">to</span><span class="p">]</span>
        <span class="n">constraints</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">column_type</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">__type__</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">column_type</span> <span class="o">=</span> <span class="n">populate_fk_params_based_on_to_model</span><span class="p">(</span>
            <span class="n">to</span><span class="o">=</span><span class="n">to</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">nullable</span><span class="o">=</span><span class="n">nullable</span><span class="p">,</span>
            <span class="n">ondelete</span><span class="o">=</span><span class="n">ondelete</span><span class="p">,</span>
            <span class="n">onupdate</span><span class="o">=</span><span class="n">onupdate</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">namespace</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">__type__</span><span class="o">=</span><span class="n">__type__</span><span class="p">,</span>
        <span class="n">to</span><span class="o">=</span><span class="n">to</span><span class="p">,</span>
        <span class="n">through</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">alias</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;real_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">nullable</span><span class="o">=</span><span class="n">nullable</span><span class="p">,</span>
        <span class="n">sql_nullable</span><span class="o">=</span><span class="n">sql_nullable</span><span class="p">,</span>
        <span class="n">constraints</span><span class="o">=</span><span class="n">constraints</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="n">unique</span><span class="p">,</span>
        <span class="n">column_type</span><span class="o">=</span><span class="n">column_type</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="n">related_name</span><span class="p">,</span>
        <span class="n">virtual</span><span class="o">=</span><span class="n">virtual</span><span class="p">,</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">pydantic_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">onupdate</span><span class="p">,</span>
        <span class="n">ondelete</span><span class="o">=</span><span class="n">ondelete</span><span class="p">,</span>
        <span class="n">owner</span><span class="o">=</span><span class="n">owner</span><span class="p">,</span>
        <span class="n">self_reference</span><span class="o">=</span><span class="n">self_reference</span><span class="p">,</span>
        <span class="n">is_relation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">orders_by</span><span class="o">=</span><span class="n">orders_by</span><span class="p">,</span>
        <span class="n">related_orders_by</span><span class="o">=</span><span class="n">related_orders_by</span><span class="p">,</span>
        <span class="n">skip_reverse</span><span class="o">=</span><span class="n">skip_reverse</span><span class="p">,</span>
        <span class="n">skip_field</span><span class="o">=</span><span class="n">skip_field</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">Field</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s2">&quot;ForeignKey&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">ForeignKeyField</span><span class="p">,</span> <span class="n">BaseField</span><span class="p">),</span> <span class="p">{})</span>
    <span class="k">return</span> <span class="n">Field</span><span class="p">(</span><span class="o">**</span><span class="n">namespace</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.ManyToMany" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ManyToMany</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">virtual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Despite a name it's a function that returns constructed ManyToManyField.
This function is actually used in model declaration
(as ormar.ManyToMany(ToModel, through=ThroughModel)).</p>
<p>Accepts number of relation setting parameters as well as all BaseField ones.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>to</code></td>
          <td>
                <code><span title="ormar.fields.many_to_many.ToType">ToType</span></code>
          </td>
          <td><p>target related ormar Model</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>through</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="ormar.fields.many_to_many.ToType">ToType</span>]</code>
          </td>
          <td><p>through model for m2m relation</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the database field - later called alias</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>unique</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>parameter passed to sqlalchemy.ForeignKey, unique flag</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>virtual</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>marks if relation is virtual. It is for reversed FK and auto generated FK on through model in Many2Many relations.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>all other args to be populated by BaseField</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ManyToManyField</code>
          </td>
          <td><p>ormar ManyToManyField with m2m relation to selected model</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/fields/many_to_many.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ManyToMany</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
    <span class="n">to</span><span class="p">:</span> <span class="s2">&quot;ToType&quot;</span><span class="p">,</span>
    <span class="n">through</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ToType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">virtual</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RelationProxy[T]&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Despite a name it&#39;s a function that returns constructed ManyToManyField.</span>
<span class="sd">    This function is actually used in model declaration</span>
<span class="sd">    (as ormar.ManyToMany(ToModel, through=ThroughModel)).</span>

<span class="sd">    Accepts number of relation setting parameters as well as all BaseField ones.</span>

<span class="sd">    :param to: target related ormar Model</span>
<span class="sd">    :type to: Model class</span>
<span class="sd">    :param through: through model for m2m relation</span>
<span class="sd">    :type through: Model class</span>
<span class="sd">    :param name: name of the database field - later called alias</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param unique: parameter passed to sqlalchemy.ForeignKey, unique flag</span>
<span class="sd">    :type unique: bool</span>
<span class="sd">    :param virtual: marks if relation is virtual.</span>
<span class="sd">    It is for reversed FK and auto generated FK on through model in Many2Many relations.</span>
<span class="sd">    :type virtual: bool</span>
<span class="sd">    :param kwargs: all other args to be populated by BaseField</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: ormar ManyToManyField with m2m relation to selected model</span>
<span class="sd">    :rtype: ManyToManyField</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">related_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;related_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">nullable</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;nullable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">owner</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">self_reference</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;self_reference&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">orders_by</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;orders_by&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">related_orders_by</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;related_orders_by&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="n">skip_reverse</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;skip_reverse&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">skip_field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;skip_field&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">through_relation_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;through_relation_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">through_reverse_relation_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;through_reverse_relation_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">through</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">through</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">ForwardRef</span><span class="p">:</span>
        <span class="n">forbid_through_relations</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">through</span><span class="p">))</span>

    <span class="n">validate_not_allowed_fields</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">to</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">ForwardRef</span><span class="p">:</span>
        <span class="n">__type__</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">to</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">to</span><span class="p">]]</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">nullable</span>
            <span class="k">else</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">to</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">to</span><span class="p">]]]</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
        <span class="n">column_type</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">__type__</span><span class="p">,</span> <span class="n">column_type</span> <span class="o">=</span> <span class="n">populate_m2m_params_based_on_to_model</span><span class="p">(</span>
            <span class="n">to</span><span class="o">=</span><span class="n">to</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="n">nullable</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">__type__</span><span class="o">=</span><span class="n">__type__</span><span class="p">,</span>
        <span class="n">to</span><span class="o">=</span><span class="n">to</span><span class="p">,</span>
        <span class="n">through</span><span class="o">=</span><span class="n">through</span><span class="p">,</span>
        <span class="n">alias</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">nullable</span><span class="o">=</span><span class="n">nullable</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="n">unique</span><span class="p">,</span>
        <span class="n">column_type</span><span class="o">=</span><span class="n">column_type</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="n">related_name</span><span class="p">,</span>
        <span class="n">virtual</span><span class="o">=</span><span class="n">virtual</span><span class="p">,</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">pydantic_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">owner</span><span class="o">=</span><span class="n">owner</span><span class="p">,</span>
        <span class="n">self_reference</span><span class="o">=</span><span class="n">self_reference</span><span class="p">,</span>
        <span class="n">is_relation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">is_multi</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">orders_by</span><span class="o">=</span><span class="n">orders_by</span><span class="p">,</span>
        <span class="n">related_orders_by</span><span class="o">=</span><span class="n">related_orders_by</span><span class="p">,</span>
        <span class="n">skip_reverse</span><span class="o">=</span><span class="n">skip_reverse</span><span class="p">,</span>
        <span class="n">skip_field</span><span class="o">=</span><span class="n">skip_field</span><span class="p">,</span>
        <span class="n">through_relation_name</span><span class="o">=</span><span class="n">through_relation_name</span><span class="p">,</span>
        <span class="n">through_reverse_relation_name</span><span class="o">=</span><span class="n">through_reverse_relation_name</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">Field</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s2">&quot;ManyToMany&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">ManyToManyField</span><span class="p">,</span> <span class="n">BaseField</span><span class="p">),</span> <span class="p">{})</span>
    <span class="k">return</span> <span class="n">Field</span><span class="p">(</span><span class="o">**</span><span class="n">namespace</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.and_" class="doc doc-heading">
<code class="highlight language-python"><span class="n">and_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Construct and filter from nested groups and keyword arguments</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>args</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ormar.queryset.clause.FilterGroup" href="queryset/clause/#ormar.queryset.clause.FilterGroup">FilterGroup</a></code>
          </td>
          <td><p>nested filter groups</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ormar.queryset.clause.FilterGroup</code>
          </td>
          <td><p>FilterGroup ready to be resolved</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/clause.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">and_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">FilterGroup</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterGroup</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct and filter from nested groups and keyword arguments</span>

<span class="sd">    :param args: nested filter groups</span>
<span class="sd">    :type args: Tuple[FilterGroup]</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: FilterGroup ready to be resolved</span>
<span class="sd">    :rtype: ormar.queryset.clause.FilterGroup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FilterGroup</span><span class="p">(</span><span class="n">_filter_type</span><span class="o">=</span><span class="n">FilterType</span><span class="o">.</span><span class="n">AND</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.or_" class="doc doc-heading">
<code class="highlight language-python"><span class="n">or_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Construct or filter from nested groups and keyword arguments</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>args</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ormar.queryset.clause.FilterGroup" href="queryset/clause/#ormar.queryset.clause.FilterGroup">FilterGroup</a></code>
          </td>
          <td><p>nested filter groups</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>fields names and proper value types</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ormar.queryset.clause.FilterGroup</code>
          </td>
          <td><p>FilterGroup ready to be resolved</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/queryset/clause.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">or_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">FilterGroup</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FilterGroup</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct or filter from nested groups and keyword arguments</span>

<span class="sd">    :param args: nested filter groups</span>
<span class="sd">    :type args: Tuple[FilterGroup]</span>
<span class="sd">    :param kwargs: fields names and proper value types</span>
<span class="sd">    :type kwargs: Any</span>
<span class="sd">    :return: FilterGroup ready to be resolved</span>
<span class="sd">    :rtype: ormar.queryset.clause.FilterGroup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FilterGroup</span><span class="p">(</span><span class="n">_filter_type</span><span class="o">=</span><span class="n">FilterType</span><span class="o">.</span><span class="n">OR</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.post_bulk_update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_bulk_update</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for post_bulk_update signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_bulk_update</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for post_bulk_update signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;post_bulk_update&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.post_delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_delete</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for post_delete signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_delete</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for post_delete signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;post_delete&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.post_relation_add" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_relation_add</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for post_relation_add signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_relation_add</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for post_relation_add signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;post_relation_add&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.post_relation_remove" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_relation_remove</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for post_relation_remove signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_relation_remove</span><span class="p">(</span>
    <span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for post_relation_remove signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;post_relation_remove&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.post_save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_save</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for post_save signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_save</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for post_save signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;post_save&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.post_update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_update</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for post_update signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_update</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for post_update signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;post_update&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.pre_delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pre_delete</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for pre_delete signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pre_delete</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for pre_delete signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;pre_delete&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.pre_relation_add" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pre_relation_add</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for pre_relation_add signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pre_relation_add</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for pre_relation_add signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;pre_relation_add&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.pre_relation_remove" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pre_relation_remove</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for pre_relation_remove signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pre_relation_remove</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for pre_relation_remove signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;pre_relation_remove&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.pre_save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pre_save</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for pre_save signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pre_save</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for pre_save signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;pre_save&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ormar.pre_update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pre_update</span><span class="p">(</span><span class="n">senders</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Connect given function to all senders for pre_update signal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>senders</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>], <span title="typing.List">List</span>[<span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="ormar.Model" href="#ormar.Model">Model</a>]]]</code>
          </td>
          <td><p>one or a list of "Model" classes that should have the signal receiver registered</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Callable</code>
          </td>
          <td><p>returns the original function untouched</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ormar/decorators/signals.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pre_update</span><span class="p">(</span><span class="n">senders</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect given function to all senders for pre_update signal.</span>

<span class="sd">    :param senders: one or a list of &quot;Model&quot; classes</span>
<span class="sd">    that should have the signal receiver registered</span>
<span class="sd">    :type senders: Union[Type[&quot;Model&quot;], List[Type[&quot;Model&quot;]]]</span>
<span class="sd">    :return: returns the original function untouched</span>
<span class="sd">    :rtype: Callable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">receiver</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="s2">&quot;pre_update&quot;</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="n">senders</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../releases/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Release Notes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Release Notes
            </div>
          </div>
        </a>
      
      
        
        <a href="decorators/" class="md-footer__link md-footer__link--next" aria-label="Next: decorators" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              decorators
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
    
    
  </body>
</html>